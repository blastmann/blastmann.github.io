<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>第 3 页 | @chaoming.edc blog</title>
  <meta name="author" content="chaoming.edc|blastmann">
  
  <meta name="description" content="track my learning">
  
  
  <meta name="keywords" content="windowsphone,windows,xaml,developer,iOS,OSX,productive">
  
  

  

  <meta property="og:site_name" content="@chaoming.edc blog"/>
  <meta name="copyright" content="@chaoming.edc blog"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
    <meta property="og:image" content="undefined"/>
  
   <meta name="google-site-verification" content="nTpmJEYYJgba5eVrpd_dfj1W_Ayr-NjZ1vFvhi5aqzI" />
   <meta name="baidu-site-verification" content="QO84kHVH0w" />
   <link rel="apple-touch-icon" href="/icon.png" />
   <link rel="shortcut icon" href="/favicon.png" >
   <link rel="alternate" href="http://blog.edi-c.com/atom.xml" title="@chaoming.edc blog" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
</head>


<body>
  <div id="content" class="inner">
    <aside id="sidebar" class="alignleft">
      <div class="navigationBar">
        <a href="/">@chaoming.edc blog</a>
      </div>
    	
  <nav class="widget" id="menu">
	<ul>
    
      <li class="cell"><a class="next" href="/">Home</a><li>
    
      <li class="cell"><a class="next" href="/archives/">Archives</a><li>
    
      <li class="cell"><a class="next" href="/about/">About</a><li>
    
      <li class="cell"><a class="next" href="/atom.xml">Subscribe</a><li>
    
    </ul>
</nav>

  <div class="widget weibo">
<iframe width="100%" height="100" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=110&fansRow=2&ptype=1&speed=0&skin=1&isTitle=1&noborder=0&isWeibo=0&isFans=0&uid=newdings&verifier=78e1ee4d&colors=ffffff,ffffff,999,000,ecfbfd&dpc=1"></iframe>
</div>

  

  
<div class="widget tagcloud">
  <h3 class="title">标签云</h3>
  <div class="entry">
    <a href="/tags/IE/" style="font-size: 10.00px;">IE</a><a href="/tags/Swift/" style="font-size: 10.00px;">Swift</a><a href="/tags/WPF/" style="font-size: 10.00px;">WPF</a><a href="/tags/alfred/" style="font-size: 10.00px;">alfred</a><a href="/tags/aspnet/" style="font-size: 10.00px;">aspnet</a><a href="/tags/browser/" style="font-size: 10.00px;">browser</a><a href="/tags/csharp/" style="font-size: 10.00px;">csharp</a><a href="/tags/css3/" style="font-size: 12.00px;">css3</a><a href="/tags/dev/" style="font-size: 10.00px;">dev</a><a href="/tags/diary/" style="font-size: 10.00px;">diary</a><a href="/tags/directx/" style="font-size: 10.00px;">directx</a><a href="/tags/fiddler/" style="font-size: 12.00px;">fiddler</a><a href="/tags/google/" style="font-size: 10.00px;">google</a><a href="/tags/iOS/" style="font-size: 10.00px;">iOS</a><a href="/tags/ie/" style="font-size: 10.00px;">ie</a><a href="/tags/ie11/" style="font-size: 10.00px;">ie11</a><a href="/tags/javascript/" style="font-size: 10.00px;">javascript</a><a href="/tags/mac/" style="font-size: 10.00px;">mac</a><a href="/tags/markdown/" style="font-size: 10.00px;">markdown</a><a href="/tags/mvc/" style="font-size: 10.00px;">mvc</a><a href="/tags/note/" style="font-size: 10.00px;">note</a><a href="/tags/notes/" style="font-size: 16.00px;">notes</a><a href="/tags/plugin/" style="font-size: 10.00px;">plugin</a><a href="/tags/productivity/" style="font-size: 10.00px;">productivity</a><a href="/tags/programming/" style="font-size: 12.00px;">programming</a><a href="/tags/python/" style="font-size: 10.00px;">python</a><a href="/tags/reflow/" style="font-size: 10.00px;">reflow</a><a href="/tags/st2/" style="font-size: 16.00px;">st2</a><a href="/tags/summaries/" style="font-size: 10.00px;">summaries</a><a href="/tags/system/" style="font-size: 10.00px;">system</a><a href="/tags/vim/" style="font-size: 10.00px;">vim</a><a href="/tags/vs2012/" style="font-size: 10.00px;">vs2012</a><a href="/tags/web/" style="font-size: 10.00px;">web</a><a href="/tags/webdev/" style="font-size: 20.00px;">webdev</a><a href="/tags/webview/" style="font-size: 10.00px;">webview</a><a href="/tags/windows/" style="font-size: 14.00px;">windows</a><a href="/tags/winrt/" style="font-size: 12.00px;">winrt</a><a href="/tags/workflow/" style="font-size: 10.00px;">workflow</a><a href="/tags/wp/" style="font-size: 10.00px;">wp</a><a href="/tags/wp8/" style="font-size: 18.00px;">wp8</a>
  </div>
</div>


    	<footer id="footer" class="inner"><div class="copyright">
  
  &copy; 2014 chaoming.edc|blastmann
  
</div>



<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-51731334-1', 'edi-c.com');
  ga('send', 'pageview');

</script></footer>
    </aside>


    <div id="hidden-navigationBar" class="navigationBar">
      <a href="/">@chaoming.edc blog</a>
    </div>
    <div id="main-col" class="alignright">
    <div id="wrapper">
      
  
<article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
  <header>
      
      
  
    <h1 class="title"><a href="/post/notes-about-wp8-customized-control.html">Windows Phone 自定义控件学习小记</a></h1>
  

      <time datetime="2013-06-12T08:54:00.000Z"><a href="/post/notes-about-wp8-customized-control.html">6月 12 2013</a></time>
      
  </header>
    <div class="entry">
      
        <h2 id="自定义控件的简单过程记录">自定义控件的简单过程记录</h2>
<ol>
<li>新建项目（Windows Phone Class Library）</li>
<li><p>新建一个类，继承自 <code>Control</code> 类，并在构造函数中定义 <code>DefaultStyleKey</code>，示例如下：</p>
<pre><code><span class="keyword">public</span> <span class="keyword">class</span> CustomControl : Control
{
    <span class="keyword">public</span> <span class="title">CustomControl</span>()
    {
        DefaultStyleKey = <span class="keyword">typeof</span> (CustomControl);
    }
}
</code></pre></li>
<li><p>在项目中添加一个新文件夹，名字定义为：Themes（必须是这个名字）。</p>
</li>
<li><p>在 Themes 文件夹中添加一个 <code>Generic.xaml</code> 文件，内建一个自定义的资源字典，示例如下：</p>
<pre><code>&lt;ResourceDictionary
    xmlns=<span class="string">"http://schemas.microsoft.com/winfx/2006/xaml/presentation"</span>
    xmlns:x=<span class="string">"http://schemas.microsoft.com/winfx/2006/xaml"</span>
    xmlns:phoneClassLibrary1=<span class="string">"clr-namespace:PhoneClassLibrary1"</span>&gt;

    &lt;<span class="keyword">Style</span> TargetType=<span class="string">"phoneClassLibrary1:CustomControl"</span>&gt;
        &lt;<span class="keyword">Style</span>.Setters&gt;
            &lt;<span class="keyword">Setter</span> <span class="keyword">Property</span>=<span class="string">"Background"</span> <span class="keyword">Value</span>=<span class="string">"{StaticResource PhoneAccentBrush}"</span>/&gt;
            &lt;<span class="keyword">Setter</span> <span class="keyword">Property</span>=<span class="string">"Template"</span>&gt;
                &lt;<span class="keyword">Setter</span>.<span class="keyword">Value</span>&gt;
                    &lt;ControlTemplate TargetType=<span class="string">"phoneClassLibrary1:CustomControl"</span>&gt;
                        &lt;Border BorderThickness=<span class="string">"{StaticResource PhoneBorderThickness}"</span> 
                                BorderBrush=<span class="string">"{StaticResource PhoneBorderBrush}"</span> 
                                <span class="keyword">Background</span>=<span class="string">"{StaticResource PhoneAccentBrush}"</span> /&gt;
                    &lt;/ControlTemplate&gt;
                &lt;/<span class="keyword">Setter</span>.<span class="keyword">Value</span>&gt;
            &lt;/<span class="keyword">Setter</span>&gt;
        &lt;/<span class="keyword">Style</span>.Setters&gt;
    &lt;/<span class="keyword">Style</span>&gt;
&lt;/ResourceDictionary&gt;
</code></pre><p><strong>注意</strong>：Style 在定义时切莫声明 <code>Key</code> 值，否则会造成样式无法索引，编译通过、运行正常但控件无法显示。</p>
</li>
<li><p>在 Windows Phone 应用程序工程中引用此类库项目，尝试添加以上定义的 <code>CustomControl</code>，编译运行，观察是否正常显示。运行截图如下：</p>
<p><img src="http://d.pr/i/PX3B.png" alt="CustomControl"></p>
</li>
</ol>

	 
	     <p style="margin:20px 0; color:#9f9f9f; font-size:12px;">
<span>Posted by <a style="color:#9f9f9f;" href="http://weibo.com/newdings/"><strong>@cmm要给力</strong></a> - 6月 12 2013</span><br />
<span style="line-height:13px;">如需转载，请注明： 本文来自 <a style="color:#9f9f9f;" href="http://blog.edi-c.com"><strong>@chaoming.edc blog</strong></a></span>
</p>
       	 
      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  
<article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
  <header>
      
      
  
    <h1 class="title"><a href="/post/ui-dev-tricks-in-windows-phone.html">Windows Phone UI 开发中的各种诡异</a></h1>
  

      <time datetime="2013-05-27T08:41:00.000Z"><a href="/post/ui-dev-tricks-in-windows-phone.html">5月 27 2013</a></time>
      
  </header>
    <div class="entry">
      
        <h2 id="自定义_TextBox_的诡异地方">自定义 TextBox 的诡异地方</h2>
<p>自己自定义了一个<code>TextBox</code>，<code>TextBox</code>样式设置高度之类的属性，然后发现里面选中的时候选择手柄没有显示完整，于是发现可以通过设置 <code>MaxHeight</code> 来让手柄显示正常。</p>
<p><a href="http://msdn.microsoft.com/zh-cn/library/windowsphone/develop/system.windows.frameworkelement.maxheight(v=vs.105).aspx" target="_blank">参考资料：FrameworkElement中的高度信息</a></p>
<blockquote>
<p><strong>依赖项属性标识符字段： <code>MaxHeightProperty</code></strong></p>
<p>这是 <code>FrameworkElement</code> 上的三个用于指定高度信息的属性之一。 另外两个是 <code>MinHeight</code> 和 <code>Height</code>。 如果这三个值之间存在冲突，则应用程序确定高度的实际顺序是：首先必须采用 <code>MinHeight</code>；然后采用 <code>MaxHeight</code>；最后，如果这些值中的每个值都在限制之内，则采用 <code>Height</code>。</p>
<p>从技术角度讲，允许 <code>MaxHeight</code> 的值不是整数，但应通常避免这种情况，并且一般通过默认的布局舍入行为来舍入这些值。</p>
</blockquote>
<h2 id="ScrollViewer_做渐变动画时内容变模糊">ScrollViewer 做渐变动画时内容变模糊</h2>
<p>在测试的示例代码中基本结构是在一个<code>ScrollViewer</code>中内嵌一个<code>StackPanel</code>，然后添加一个<code>TextBlock</code>和一个<code>Button</code>。点击<code>Button</code>，触发<code>Button</code>上的<code>Click</code>事件，启动外层<code>Grid</code>上的渐变动画。</p>
<p>测试结果如下：</p>
<ul>
<li>当<code>ScrollViewer</code>中内容不多的时候（不超过最外层<code>Grid</code>的高度），动画显示正常，内容不会出现模糊。</li>
<li>复制示例代码中的<code>TextBlock</code>，确保<code>ScrollViewer</code>高度大于外层<code>Grid</code>高度，再次点击<code>Button</code>进行测试，动画显示正常，但动画过程中内容变模糊，直至动画完成。</li>
</ul>
<p>根据动画进行过程中的内存情况分析，猜测动画过程中，如对<code>ScrollViewer</code>本身及其外层窗口进行渐变动画，<code>ScrollViewer</code>将自动开启<code>BitmapCache</code>（渲染大小为1X），造成一定程度的模糊，同时内存也会对应上升一定程度（动画结束后内存释放）。</p>
<p>暂时发现比较好的解决方法是：直接对内嵌于<code>ScrollViewer</code>中的<code>Panel</code>控件做动画，模糊问题可以得到解决。但<code>ListBox</code> \ <code>LLS</code>等控件该怎么获取内部<code>ScrollViewer</code>中的控件，这是一个问题，或者是对其中的<code>ItemsPresenter</code>进行动画吧。</p>
<p>示例代码如下（包含多余的样式代码）：</p>
<ul>
<li><p>XAML:</p>
<pre><code> <span class="tag">&lt;<span class="title">Grid</span> <span class="attribute">x:Name</span>=<span class="value">"ContentPanel"</span> <span class="attribute">Grid.Row</span>=<span class="value">"1"</span> <span class="attribute">Margin</span>=<span class="value">"12,0,12,0"</span>&gt;</span>
     <span class="tag">&lt;<span class="title">ScrollViewer</span> <span class="attribute">Name</span>=<span class="value">"ContentSV"</span>&gt;</span>
         <span class="tag">&lt;<span class="title">StackPanel</span> <span class="attribute">Name</span>=<span class="value">"ContentSP"</span>&gt;</span>
             <span class="tag">&lt;<span class="title">Button</span> <span class="attribute">Content</span>=<span class="value">"Fade Grid"</span> <span class="attribute">Click</span>=<span class="value">"FadeGrid_OnClick"</span>/&gt;</span>
             <span class="tag">&lt;<span class="title">Button</span> <span class="attribute">Content</span>=<span class="value">"Fade ScrollViewer"</span> <span class="attribute">Click</span>=<span class="value">"FadeSV_OnClick"</span>&gt;</span><span class="tag">&lt;/<span class="title">Button</span>&gt;</span>
             <span class="tag">&lt;<span class="title">Button</span> <span class="attribute">Content</span>=<span class="value">"Fade StackPanel"</span> <span class="attribute">Click</span>=<span class="value">"FadeSP_OnClick"</span>/&gt;</span>

             <span class="tag">&lt;<span class="title">TextBlock</span> <span class="attribute">TextWrapping</span>=<span class="value">"Wrap"</span>&gt;</span>
                 Lorem ipsum Pariatur sint occaecat sunt sint do labore adipisicing 
                 eiusmod incididunt culpa laborum consequat magna dolor labore sunt sed 
                 ullamco anim adipisicing do pariatur ea esse qui sint magna in voluptate 
                 Duis id ut anim id.
             <span class="tag">&lt;/<span class="title">TextBlock</span>&gt;</span>

             <span class="tag">&lt;<span class="title">TextBlock</span> <span class="attribute">TextWrapping</span>=<span class="value">"Wrap"</span>&gt;</span>
                 Lorem ipsum Pariatur sint occaecat sunt sint do labore adipisicing 
                 eiusmod incididunt culpa laborum consequat magna dolor labore sunt sed 
                 ullamco anim adipisicing do pariatur ea esse qui sint magna in voluptate 
                 Duis id ut anim id.
             <span class="tag">&lt;/<span class="title">TextBlock</span>&gt;</span>

             <span class="tag">&lt;<span class="title">TextBlock</span> <span class="attribute">TextWrapping</span>=<span class="value">"Wrap"</span>&gt;</span>
                 Lorem ipsum Pariatur sint occaecat sunt sint do labore adipisicing 
                 eiusmod incididunt culpa laborum consequat magna dolor labore sunt sed 
                 ullamco anim adipisicing do pariatur ea esse qui sint magna in voluptate 
                 Duis id ut anim id.
             <span class="tag">&lt;/<span class="title">TextBlock</span>&gt;</span>

             <span class="tag">&lt;<span class="title">TextBlock</span> <span class="attribute">TextWrapping</span>=<span class="value">"Wrap"</span>&gt;</span>
                 Lorem ipsum Pariatur sint occaecat sunt sint do labore adipisicing 
                 eiusmod incididunt culpa laborum consequat magna dolor labore sunt sed 
                 ullamco anim adipisicing do pariatur ea esse qui sint magna in voluptate 
                 Duis id ut anim id.
             <span class="tag">&lt;/<span class="title">TextBlock</span>&gt;</span>

             <span class="tag">&lt;<span class="title">TextBlock</span> <span class="attribute">TextWrapping</span>=<span class="value">"Wrap"</span>&gt;</span>
                 Lorem ipsum Pariatur sint occaecat sunt sint do labore adipisicing 
                 eiusmod incididunt culpa laborum consequat magna dolor labore sunt sed 
                 ullamco anim adipisicing do pariatur ea esse qui sint magna in voluptate 
                 Duis id ut anim id.
             <span class="tag">&lt;/<span class="title">TextBlock</span>&gt;</span>
         <span class="tag">&lt;/<span class="title">StackPanel</span>&gt;</span>
     <span class="tag">&lt;/<span class="title">ScrollViewer</span>&gt;</span>
 <span class="tag">&lt;/<span class="title">Grid</span>&gt;</span>
</code></pre></li>
</ul>
<ul>
<li><p>C#:</p>
<pre><code>  <span class="keyword">private</span> <span class="keyword">void</span> <span class="title">FadeInAndOut</span>(DependencyObject dObj)
  {
      <span class="keyword">var</span> storyb = <span class="keyword">new</span> Storyboard();
      Duration Show_Duration = <span class="keyword">new</span> Duration(<span class="keyword">new</span> TimeSpan(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">450</span>));
      DoubleAnimation m_OpacityAni = <span class="keyword">new</span> DoubleAnimation();
      m_OpacityAni.Duration = Show_Duration;
      m_OpacityAni.From = <span class="number">1.0</span>;
      m_OpacityAni.To = <span class="number">0.0</span>;
      m_OpacityAni.AutoReverse = <span class="keyword">true</span>;

      storyb.Children.Add(m_OpacityAni);

      Storyboard.SetTarget(m_OpacityAni, dObj);
      Storyboard.SetTargetProperty(m_OpacityAni, <span class="keyword">new</span> PropertyPath(<span class="string">"(UIElement.Opacity)"</span>));

      storyb.Begin();
  }

  <span class="keyword">private</span> <span class="keyword">void</span> <span class="title">FadeGrid_OnClick</span>(<span class="keyword">object</span> sender, RoutedEventArgs e)
  {
      FadeInAndOut(ContentPanel);
  }

  <span class="keyword">private</span> <span class="keyword">void</span> <span class="title">FadeSP_OnClick</span>(<span class="keyword">object</span> sender, RoutedEventArgs e)
  {
      FadeInAndOut(ContentSP);
  }

  <span class="keyword">private</span> <span class="keyword">void</span> <span class="title">FadeSV_OnClick</span>(<span class="keyword">object</span> sender, RoutedEventArgs e)
  {
      FadeInAndOut(ContentSV);
  }
</code></pre></li>
</ul>
<h2 id="ApplicationBar_的坑爹处">ApplicationBar 的坑爹处</h2>
<p><code>ApplicationBar</code> 的透明度很坑爹，如果透明度为<code>1</code>，它将表现为属于页面的一部分，将占据页面中部分空间。如果透明度小于<code>1</code>（如<code>0.99</code>），它将表现为覆盖在页面之上，不会占据页面的空间。</p>
<p>那这个时候就有问题了。如果我们页面中有一个 <code>ListBox</code> （或者 <code>LLS</code> ），我们需要将它滚动至最后一项时， <code>ApplicationBar</code> 透明度小于<code>1</code>时将会阻挡其显示。有什么办法可以解决这个问题呢？</p>
<ol>
<li><p>Hard Code <code>ListBox</code>（或<code>LLS</code>） 父容器的高度或者外边距</p>
<p>这种方法个人觉得并不好用，如果页面不考虑旋转的话还好，如果要考虑旋转的话，就必须在旋转的时候注意设置其父容器的高度（<code>Height</code>）或外边距（<code>Margin</code>）。这样我们需要计算的数字比较多，容易造成混乱，而且每次旋转之后都要重新设置高度或者外边距，自适应性不好。不过，原始的方法总是比较实用的对吧。</p>
</li>
<li><p>为 <code>LongListSelector</code> 设置 <code>ListFooter</code> </p>
<p>查看了官方文档之后发现<code>LLS</code>本身有两个很有趣的属性：<code>ListFooter</code>和<code>ListHeader</code>关于这两个部分的位置，官方文档上有一个图描述得非常清楚：</p>
<p><img src="http://i.msdn.microsoft.com/dynimg/IC619230.png" alt="Header&amp;Footer"></p>
<p>经测试，这种方法相当于在<code>LLS</code>头部或尾部添加了一个特殊项，我们只要将这个特定项设置为空的、有一定高度（一般是 72px）的元素即可。测试出来的效果跟系统的<code>人脉</code>中显示效果一致，滚动至底部后将出现一定的空白用于分隔列表与 ApplicationBar。</p>
<p><img src="http://d.pr/i/iHMH.png" alt="People"></p>
<p>第二种方法比第一种方法好的地方就是：不需要另外指定<code>Margin</code>或者<code>Height</code>这样的属性，所有元素都是自适应的，比起第一种方法要灵活一点。特别是在<code>Pivot</code>和<code>Panorama</code>控件下，不同的页面中对<code>ApplicationBar</code>的要求不一样，当<code>ApplicationBar</code>高度不统一时，我们就需要对其列表控件的高度或外边距进行多个设置，不甚灵活。</p>
</li>
<li><p><code>ListBox</code> 怎么办？</p>
<p>经少量测试，如果给<code>ListBox</code>最后添加上一项空白项的话，可能会造成选项错误。Google 之后发现，还是有一些比较 Tricky 的方法的。下面列出一种：</p>
<p>对<code>ListBox</code>的模板进行修改，在<code>ItemsPrestenter</code>下面添加一个高度为<code>72px</code>的空白项。示例代码：</p>
   <ControlTemplate><br>       <ScrollViewer Height="{Binding Height,RelativeSource={RelativeSource Mode=TemplatedParent}}"><br>           <StackPanel><br>               <ItemsPresenter /><br>               <Canvas Height="72" /><br>           </StackPanel><br>       </ScrollViewer><br>   </ControlTemplate>

<p>但是这种方法有 Bug，造成<code>VirtualizingStackPanel</code>的数据虚拟化失效，暂时没有找到除了设置固定高度之外的解决方法。</p>
</li>
</ol>
<h2 id="ToolKit_中的_SlideInEffects_在_WP8_中无效">ToolKit 中的 SlideInEffects 在 WP8 中无效</h2>
<p>原因：WP8 中，<code>LongListSelector</code>、<code>Panorama</code> 和 <code>Pivot</code> 属于框架中的一部分，它们的 <code>ManipulationCompleted</code> 事件默认被标识为 <code>handled</code>，以提高界面的流畅性。</p>
<p>如果真的要处理 Pivot 控件的 <code>ManipulationCompleted</code> 事件的话，可以把 <code>SlideInEffects.cs</code> 的 <code>OnParentPivotPropertyChanged</code> 函数中的</p>
<pre><code><span class="attribute">newPivot.ManipulationCompleted +</span>=<span class="string"> Pivot_ManipulationCompleted;</span>
</code></pre><p>替换为：</p>
<pre><code>newPivot.<span class="keyword">AddHandler</span>(Pivot.ManipulationCompletedEvent, <span class="keyword">new</span> EventHandler&lt;ManipulationCompletedEventArgs&gt;(Pivot_ManipulationCompleted), <span class="literal">true</span>);
</code></pre><p>但处理效果不好，会导致动画效果异常。原因是 <code>SelectionChanged</code> 事件在 <code>ManipulationCompleted</code> 事件完成之后才会触发，因此造成动画效果异常。</p>
<p>比较丑陋的解决方法是：将 <code>SelectionChanged</code> 事件处理与 <code>ManipulationCompleted</code> 对调，同时将 <code>fromRight</code> 变量抽取为静态变量，让动画在 <code>SelectionChanged</code> 事件中进行处理。<a href="http://d.pr/f/MiSr" target="_blank"><strong>点击这里下载</strong></a>。</p>
<h2 id="Toolkit_中的_HubTile_滑动展开到最大后消失及没有适配_WP8_的新翻转效果">Toolkit 中的 HubTile 滑动展开到最大后消失及没有适配 WP8 的新翻转效果</h2>
<p>经过排查发现，原因应该是 <code>Generic.xaml</code> 中的状态动画没有对 <code>Collapsed</code> 状态进行定义。另外，文件里的动画也很久没有更新了，没有适配 WP8 首屏瓷砖翻转时的 <code>BackEase</code> 效果。我在原来的 <code>HubTile</code> 基础上加了一些内容，主要更新点是：</p>
<ul>
<li>当瓷砖中有具体信息时，瓷砖不会采用滑动展开的动画，只会使用翻转动画。</li>
<li>稍微调整了一下动画触发的时间，减少等待。</li>
<li>适配 WP8 的动画效果。</li>
</ul>
<p>具体可以<a href="http://d.pr/f/7tlo" target="_blank">点击这里</a>下载代码。</p>
<h2 id="ListPicker_选项初始位置偏移的问题">ListPicker 选项初始位置偏移的问题</h2>
<p>在升级 Windows Phone Toolkit 的开发测试过程中出现过这么一个现象：</p>
<blockquote>
<p><code>ListPicker</code> 的初始化一切都很正常，但是在完成初始化之后，选项的第一项位移有些许偏移，而且在初次打开的时候会比较卡。</p>
</blockquote>
<p><img src="http://d.pr/i/fkdl.png" alt="ListPicker"></p>
<p>调试中发现：当 <code>ListPicker</code> 在绑定 <code>SelectionChanged</code> 事件后，进行添加数据的操作将会引起 <code>SelectionChanged</code> 事件的反复调用，估计是反复调用 <code>SelectionChanged</code> 引起的问题。</p>
<p>解决错位的问题：只需要把数据绑定完成之后，再进行事件绑定操作即可，避免事件反复触发进行控件布局异常。</p>
<h2 id="点击事件与背景色">点击事件与背景色</h2>
<p>点击事件的触发与元素的背景色有关系，示例代码：</p>
<ul>
<li><p>XAML:</p>
<pre><code>  &lt;<span class="keyword">Grid</span> x:Name=<span class="string">"ContentPanel"</span> <span class="keyword">Grid</span>.<span class="keyword">Row</span>=<span class="string">"1"</span> Margin=<span class="string">"12,0,12,0"</span> Tap=<span class="string">"ContentPanel_OnTap"</span>&gt;
      &lt;<span class="keyword">Grid</span> Tap=<span class="string">"UIElement_OnTap"</span> Height=<span class="string">"300"</span>&gt;&lt;/<span class="keyword">Grid</span>&gt;
  &lt;/<span class="keyword">Grid</span>&gt;
</code></pre></li>
<li><p>CS:</p>
<pre><code>  <span class="keyword">private</span> <span class="keyword">void</span> <span class="title">ContentPanel_OnTap</span>(<span class="keyword">object</span> sender, GestureEventArgs e)
  {
      System.Diagnostics.Debug.WriteLine(e.OriginalSource.ToString() + <span class="string">"1"</span>);
      e.Handled = <span class="keyword">true</span>;
  }

  <span class="keyword">private</span> <span class="keyword">void</span> <span class="title">UIElement_OnTap</span>(<span class="keyword">object</span> sender, GestureEventArgs e)
  {
      System.Diagnostics.Debug.WriteLine(e.OriginalSource.ToString() + <span class="string">"2"</span>);
      e.Handled = <span class="keyword">true</span>;
  }
</code></pre></li>
<li><p>大致布局如下，高亮框为内嵌高度为300px的 Grid：</p>
<p>  <img src="http://d.pr/i/Fcl2.png" alt="Layout"></p>
</li>
</ul>
<p>示例很简单，只是两个 Grid 的嵌套加上 <code>Tap</code> 事件的简单输出。运行的时候可以发现，我们点击外层 Grid 时输出窗口并没有输出内容，但点击中间的 Grid 时则有输出 <code>System.Windows.Controls.Grid2</code> 的信息，而两者的区别仅在于背景色的设置。在设计流式布局时，要注意这个问题，有时候点击事件没有触发的原因仅仅是因为外层的容器没有设置一个透明的背景色。</p>
<p>当 <code>Background</code> 属性为空时，点击该元素并不会触发 <code>Tap</code> 事件，只有当 <code>Background</code> 属性不为空（如不想影响显示效果，可设置为 <code>Transparent</code>），点击事件才会触发。</p>
<h2 id="莫名其妙的_TextBox_获取焦点事件触发（2013-05-27更新）">莫名其妙的 TextBox 获取焦点事件触发（2013-05-27更新）</h2>
<p>页面结构基本如下：</p>
<pre><code>-<span class="ruby"> <span class="constant">Grid</span>
</span>  -<span class="ruby"> <span class="constant">ScrollViewer</span>
</span>    -<span class="ruby"> <span class="constant">StackPanel</span>
</span>      -<span class="ruby"> <span class="constant">TextBox</span>
</span>      -<span class="ruby"> <span class="constant">TextBlock</span></span>
</code></pre><p>问题就是，当我们点击 TextBlock 设置 Grid 进行隐藏时，ScrollViewer 很神奇地会让 TextBox 触发 <code>GotFocus</code> 事件，导致页面隐藏后出现软键盘。</p>
<p>废话不多说了，直接看代码：</p>
<ul>
<li><p>XAML:</p>
<pre><code>  <span class="tag">&lt;<span class="title">Grid</span> <span class="attribute">x:Name</span>=<span class="value">"ContentPanel"</span> <span class="attribute">Grid.Row</span>=<span class="value">"1"</span> <span class="attribute">Margin</span>=<span class="value">"12,0,12,0"</span>&gt;</span>
      <span class="tag">&lt;<span class="title">Grid.RowDefinitions</span>&gt;</span>
          <span class="tag">&lt;<span class="title">RowDefinition</span> <span class="attribute">Height</span>=<span class="value">"Auto"</span>&gt;</span><span class="tag">&lt;/<span class="title">RowDefinition</span>&gt;</span>
          <span class="tag">&lt;<span class="title">RowDefinition</span> <span class="attribute">Height</span>=<span class="value">"*"</span>&gt;</span><span class="tag">&lt;/<span class="title">RowDefinition</span>&gt;</span>
      <span class="tag">&lt;/<span class="title">Grid.RowDefinitions</span>&gt;</span>

      <span class="tag">&lt;<span class="title">Button</span> <span class="attribute">Grid.Row</span>=<span class="value">"0"</span> <span class="attribute">Click</span>=<span class="value">"ButtonBase_OnClick"</span>&gt;</span>Display<span class="tag">&lt;/<span class="title">Button</span>&gt;</span>

      <span class="tag">&lt;<span class="title">Grid</span> <span class="attribute">Grid.Row</span>=<span class="value">"1"</span> <span class="attribute">Name</span>=<span class="value">"canvas"</span> <span class="attribute">GotFocus</span>=<span class="value">"UIElement_OnGotFocus"</span>&gt;</span>
          <span class="tag">&lt;<span class="title">ScrollViewer</span> <span class="attribute">Name</span>=<span class="value">"SV"</span> <span class="attribute">GotFocus</span>=<span class="value">"UIElement_OnGotFocus"</span> &gt;</span>
              <span class="tag">&lt;<span class="title">StackPanel</span>&gt;</span>
                  <span class="tag">&lt;<span class="title">TextBox</span> <span class="attribute">Name</span>=<span class="value">"TB"</span> <span class="attribute">GotFocus</span>=<span class="value">"UIElement_OnGotFocus"</span> <span class="attribute">Width</span>=<span class="value">"200"</span> /&gt;</span>
                  <span class="tag">&lt;<span class="title">TextBlock</span> <span class="attribute">Margin</span>=<span class="value">"0,50,0,0"</span> <span class="attribute">Tap</span>=<span class="value">"ButtonBase_OnClick"</span> 
                             <span class="attribute">GotFocus</span>=<span class="value">"UIElement_OnGotFocus"</span>&gt;</span>Hide<span class="tag">&lt;/<span class="title">TextBlock</span>&gt;</span>
              <span class="tag">&lt;/<span class="title">StackPanel</span>&gt;</span>
          <span class="tag">&lt;/<span class="title">ScrollViewer</span>&gt;</span>
      <span class="tag">&lt;/<span class="title">Grid</span>&gt;</span>
</code></pre></li>
<li><p>CS:</p>
<pre><code>  private void ButtonBase_OnClick(object sender, RoutedEventArgs e)
  {
      System<span class="preprocessor">.Diagnostics</span><span class="preprocessor">.Debug</span><span class="preprocessor">.WriteLine</span>(<span class="string">"Click: "</span> + sender<span class="preprocessor">.GetType</span>())<span class="comment">;</span>

      // 在修改`Visibility`前禁用ScrollViewer
      SV<span class="preprocessor">.IsEnabled</span> = canvas<span class="preprocessor">.Visibility</span> != Visibility<span class="preprocessor">.Visible</span><span class="comment">;</span>

      canvas<span class="preprocessor">.Visibility</span> = canvas<span class="preprocessor">.Visibility</span> == Visibility<span class="preprocessor">.Visible</span>
                              ? Visibility<span class="preprocessor">.Collapsed</span>
                              : Visibility<span class="preprocessor">.Visible</span><span class="comment">;</span>
  }

  private void UIElement_OnGotFocus(object sender, RoutedEventArgs e)
  {
      System<span class="preprocessor">.Diagnostics</span><span class="preprocessor">.Debug</span><span class="preprocessor">.WriteLine</span>(<span class="string">"GotFocus: "</span> + sender<span class="preprocessor">.GetType</span>() + <span class="string">", Source: "</span> + e<span class="preprocessor">.OriginalSource</span>)<span class="comment">;</span>
  }
</code></pre></li>
</ul>
<p>暂时的解决方法是：在隐藏外层 Grid 时，对 <code>ScrollViewer.IsEnabled</code> 设置为 <code>False</code>，或者直接对 ScrollViewer 设置隐藏，两个方法都不会触发到 TextBox 的 <code>GotFocus</code> 事件。</p>

	 
	     <p style="margin:20px 0; color:#9f9f9f; font-size:12px;">
<span>Posted by <a style="color:#9f9f9f;" href="http://weibo.com/newdings/"><strong>@cmm要给力</strong></a> - 5月 27 2013</span><br />
<span style="line-height:13px;">如需转载，请注明： 本文来自 <a style="color:#9f9f9f;" href="http://blog.edi-c.com"><strong>@chaoming.edc blog</strong></a></span>
</p>
       	 
      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  
<article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
  <header>
      
      
  
    <h1 class="title"><a href="/post/create-a-flexible-wp-app-page-layout.html">创建宽度高度自适应的 Windows Phone App 界面布局</a></h1>
  

      <time datetime="2013-05-23T13:00:00.000Z"><a href="/post/create-a-flexible-wp-app-page-layout.html">5月 23 2013</a></time>
      
  </header>
    <div class="entry">
      
        <h4 id="[1]_利用好_Grid_的分行/分列功能">[1] 利用好 Grid 的分行/分列功能</h4>
<p>Grid 提供了分行/分列的属性，示例代码如下：</p>
<pre><code><span class="tag">&lt;<span class="title">Grid.RowDefinitions</span>&gt;</span>
    <span class="tag">&lt;<span class="title">RowDefinition</span> <span class="attribute">Height</span>=<span class="value">"Auto"</span>/&gt;</span>
    <span class="tag">&lt;<span class="title">RowDefinition</span> <span class="attribute">Height</span>=<span class="value">"*"</span>/&gt;</span>
    <span class="tag">&lt;<span class="title">RowDefinition</span> <span class="attribute">Height</span>=<span class="value">"2*"</span>/&gt;</span>
<span class="tag">&lt;/<span class="title">Grid.RowDefinitions</span>&gt;</span>
</code></pre><p>其中行高（列宽）有几种取值方式：</p>
<ol>
<li>直接指定数值。此方式最直接，将直接指定具体高度或宽度。</li>
<li>使用 <code>Auto</code> 值。使用 <code>Auto</code> 的话，Grid 将根据该行/列内容计算其占据空间的大小。</li>
<li>使用 <code>*</code> 值。使用 <code>*</code> 的话，Grid 将根据其他的行/列占据空间后剩余的空间来计算此行/列的大小。此值还支持比例计算，如示例代码中的 <code>2*</code>，表示 Grid 的空间在第一行计算完成后，剩余空间将均分为3份，第二行占据一份，第三行占据两份。</li>
</ol>
<p>分行/分列的属性在实现页面基础布局的情况下十分有用。但需要注意不要在数据模板中使用过于复杂的 Grid 结构，否则会导致大量计算资源消耗在计算 Grid 布局上。</p>
<p>相关资料：《<a href="http://scriptogr.am/blastmann/post/wpf-panels-performance" target="_blank">关于 WPF 中的面板性能分析</a>》</p>
<h4 id="[2]_注意对齐属性的区别">[2] 注意对齐属性的区别</h4>
<ol>
<li><p><code>HorizontalAlignment</code> / <code>VerticalAlignment</code> （水平对齐和垂直对齐）</p>
<p><code>HorizontalAlignment</code> 和 <code>VerticalAlignment</code> 是 FrameworkElement 中定义的两个属性。当 FrameworkElement 位于面板或项控件中时，这两个属性将会有应用，设置后影响此元素的布局。默认值是 <code>Stretch</code>，如果需要建立一个自适应的布局，最好不要修改此值。</p>
<ul>
<li><code>HorizontalAlignment</code> 取值： <code>Left</code> / <code>Right</code> / <code>Center</code> / <code>Stretch</code>。</li>
<li><code>VerticalAlignment</code> 取值： <code>Top</code> / <code>Bottom</code> / <code>Center</code> / <code>Stretch</code>。</li>
</ul>
<p>当前元素没有设置宽度（或高度）时，如使用除 <code>Stretch</code> 以外的值，会导致元素的大小变为该元素内部的元素占据的大小。如：</p>
<pre><code><span class="tag">&lt;<span class="title">Border</span> <span class="attribute">Height</span>=<span class="value">"50"</span> <span class="attribute">BorderBrush</span>=<span class="value">"White"</span> <span class="attribute">BorderThickness</span>=<span class="value">"3"</span> <span class="attribute">Background</span>=<span class="value">"Red"</span>
        <span class="attribute">HorizontalAlignment</span>=<span class="value">"Left"</span>&gt;</span>
<span class="tag">&lt;/<span class="title">Border</span>&gt;</span>
</code></pre><p>则此 <code>Border</code> 的宽度将变为0。因此，注意 <code>Stretch</code> 的使用。</p>
</li>
<li><p><code>HorizontalContentAlignment</code> / <code>VerticalContentAlignment</code> （内容水平对齐和内容垂直对齐）</p>
<p><code>HorizontalContentAlignment</code> 和 <code>VerticalContentAlignment</code> 是 Control 中实现的两个属性，主要影响控件内元素的排列位置，默认值分别是 <code>HorizontalAlignment.Left</code> 和 <code>VerticalAlignment.Top</code>。同样地，如果将属性设置为 <code>Stretch</code> 的话，则内部元素在没有设置固定大小时将会得到拉伸处理。</p>
<ul>
<li><code>HorizontalContentAlignment</code> 取值： <code>Left</code> / <code>Right</code> / <code>Center</code> / <code>Stretch</code>。</li>
<li><code>HorizontalContentAlignment</code> 取值： <code>Top</code> / <code>Bottom</code> / <code>Center</code> / <code>Stretch</code>。</li>
</ul>
</li>
</ol>
<p>强调这两个属性的原因是，当我们需要实现弹性布局时，使用 <code>Stretch</code> 可以免除频繁设置元素大小的困扰。</p>

	 
	     <p style="margin:20px 0; color:#9f9f9f; font-size:12px;">
<span>Posted by <a style="color:#9f9f9f;" href="http://weibo.com/newdings/"><strong>@cmm要给力</strong></a> - 5月 23 2013</span><br />
<span style="line-height:13px;">如需转载，请注明： 本文来自 <a style="color:#9f9f9f;" href="http://blog.edi-c.com"><strong>@chaoming.edc blog</strong></a></span>
</p>
       	 
      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  
<article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
  <header>
      
      
  
    <h1 class="title"><a href="/post/wp8-webbrowser-document-mode.html">关于 WP8 中 WebBrowser 控件的文档模式</a></h1>
  

      <time datetime="2013-05-21T02:39:00.000Z"><a href="/post/wp8-webbrowser-document-mode.html">5月 21 2013</a></time>
      
  </header>
    <div class="entry">
      
        <p>IE 有个很诡异的地方就是：如果 HTML 文档里面没有声明 <code>&lt;!DOCTYPE&gt;</code> 的话，将会触发其「<a href="http://zh.wikipedia.org/zh-cn/%E6%80%AA%E5%BC%82%E6%A8%A1%E5%BC%8F" target="_blank">怪异模式</a>」。同时，WP8 上的 <code>WebBrowser</code> 控件本身有个 Bug 就是当我们使用 <code>NavigateToString()</code> 时，如果 HTML 代码中对 <code>&lt;!DOCTYPE&gt;</code> 进行声明了话，那 <code>WebBrowser</code> 将不能渲染该 HTML 代码（<a href="http://mikaelkoskinen.net/webbrowser-navigatetostring-broken-in-windows-phone-8-and-also-affects-windows-phone-7-apps-solution-included/" target="_blank">参考文章</a>）。</p>
<p>该参考文章给出的方法是利用独立存储来解决这个问题，代码如下：</p>
<pre><code><span class="keyword">var</span> client = <span class="keyword">new</span> WebClient(); 
<span class="keyword">var</span> content = <span class="keyword">await</span> client.DownloadStringTaskAsync(url);
<span class="keyword">var</span> store = IsolatedStorageFile.GetUserStoreForApplication();

<span class="keyword">using</span> (<span class="keyword">var</span> writeFile = <span class="keyword">new</span> StreamWriter(<span class="keyword">new</span> IsolatedStorageFileStream(<span class="string">"htmlcontent.html"</span>, FileMode.Create, FileAccess.Write, store))) 
{ 
    writeFile.Write(content); 
    writeFile.Close(); 
}

<span class="keyword">var</span> uri = <span class="keyword">new</span> Uri(<span class="string">"htmlcontent.html"</span>, UriKind.Relative);
WebBrowser.Navigate(uri);
</code></pre><p>PS：记得要给我们的 HTML 文档加上 <code>&lt;!doctype html&gt;</code> ，这样可以让 WebBrowser 运行在 IE10 的模式下面，对 HTML5 的支持最好，而且对 DOM 的操作速度也会快上不少。</p>
<p><strong>2013-05-20更新</strong>：今天看到 StackOverflow 上关于这个问题的另外一个答案（<a href="http://stackoverflow.com/questions/16276833/windows-8-phone-webbrowser-navigatetostring-does-not-work-when-meta-tag-meta-ch" target="_blank">点击进入</a>），<code>WebBrowser</code> 中 <code>NavigateToString()</code> 失效的根本原因应是 <code>String</code> 的编码问题。由于 <code>String</code> 类型的编码是 UTF-16，如果在 HTML 代码中插入 <code>&lt;meta charset=&quot;UTF-8&quot;&gt;</code> 的声明，<code>NavigateToString()</code> 将无法正确显示页面。</p>
<p><strong>2013-05-21相关资料</strong>：</p>
<ul>
<li><a href="http://msdn.microsoft.com/en-us/library/ie/cc288325" target="_blank"><Defining document compatibility></a>，在此文档中有简介 IE 中关于文档模式的一些问题。特别指出 IE9 及以前的版本，浏览器处理 Quirks Mode 的时候页面功能的支持将相当于 IE5.5。</li>
<li><a href="http://msdn.microsoft.com/en-us/library/ie/jj676915(v=vs.85).aspx" target="_blank"><Specifying legacy document modes></a>，此文档主要是介绍不同的 <code>&lt;!DOCTYPE&gt;</code> 下对应的文档模式。</li>
</ul>
<h4 id="关于_WebBrowser_的文档模式检测">关于 WebBrowser 的文档模式检测</h4>
<p>很简单地过程，只要使用 <code>documentMode()</code> 输出一下文档模式即可。简单测试代码：</p>
<ul>
<li><p>XAML:</p>
<pre><code>  <span class="tag">&lt;<span class="title">StackPanel</span>&gt;</span>
      <span class="tag">&lt;<span class="title">TextBlock</span> <span class="attribute">FontSize</span>=<span class="value">"{StaticResource PhoneFontSizeLarge}"</span> <span class="attribute">Margin</span>=<span class="value">"{StaticResource PhoneMargin}"</span>&gt;</span>doctype and flexbox test<span class="tag">&lt;/<span class="title">TextBlock</span>&gt;</span>
      <span class="tag">&lt;<span class="title">phone:WebBrowser</span> <span class="attribute">Name</span>=<span class="value">"wb1"</span> <span class="attribute">IsScriptEnabled</span>=<span class="value">"True"</span> <span class="attribute">Height</span>=<span class="value">"300"</span> <span class="attribute">Margin</span>=<span class="value">"{StaticResource PhoneMargin}"</span>&gt;</span><span class="tag">&lt;/<span class="title">phone:WebBrowser</span>&gt;</span>

      <span class="tag">&lt;<span class="title">phone:WebBrowser</span> <span class="attribute">Name</span>=<span class="value">"wb2"</span> <span class="attribute">IsScriptEnabled</span>=<span class="value">"True"</span> <span class="attribute">Height</span>=<span class="value">"300"</span> <span class="attribute">Margin</span>=<span class="value">"{StaticResource PhoneMargin}"</span>&gt;</span><span class="tag">&lt;/<span class="title">phone:WebBrowser</span>&gt;</span>
  <span class="tag">&lt;/<span class="title">StackPanel</span>&gt;</span>
</code></pre></li>
<li><p>CS:</p>
<pre><code>  using Microsoft.Phone.Controls;
  namespace PhoneApp3
  {
      public partial class MainPage : PhoneApplicationPage
      {
          // Constructor
          public MainPage()
          {
              InitializeComponent();

              var s2 = @"<span class="doctype">&lt;!doctype html&gt;</span>
                      <span class="tag">&lt;<span class="title">html</span> <span class="attribute">lang</span>=<span class="value">'en'</span>&gt;</span>
                      <span class="tag">&lt;<span class="title">head</span>&gt;</span>
                      <span class="tag">&lt;<span class="title">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="title">title</span>&gt;</span>
                      <span class="tag">&lt;<span class="title">style</span> <span class="attribute">type</span>=<span class="value">'text/css'</span>&gt;</span><span class="css">
                      <span class="class">.flex</span><span class="rules">{<span class="rule"><span class="attribute">display</span>:<span class="value"> -ms-flexbox</span></span>;<span class="rule">}</span></span>
                      <span class="class">.flex</span> <span class="tag">div</span><span class="rules">{<span class="rule"><span class="attribute">-ms-flex</span>:<span class="value"><span class="number">1</span> <span class="number">0</span> auto</span></span>; <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">200</span>px</span></span>; <span class="rule"><span class="attribute">height</span>:<span class="value"> <span class="number">200</span>px</span></span>;<span class="rule">}</span></span>
                      <span class="class">.red</span><span class="rules">{<span class="rule"><span class="attribute">background</span>:<span class="value"> red</span></span>;<span class="rule">}</span></span>
                      <span class="class">.blue</span><span class="rules">{<span class="rule"><span class="attribute">background</span>:<span class="value"> blue</span></span>;<span class="rule">}</span></span>
                      <span class="class">.green</span><span class="rules">{<span class="rule"><span class="attribute">background</span>:<span class="value"> green</span></span>;<span class="rule">}</span></span>
                      </span><span class="tag">&lt;/<span class="title">style</span>&gt;</span>
                      <span class="tag">&lt;/<span class="title">head</span>&gt;</span>
                      <span class="tag">&lt;<span class="title">body</span>&gt;</span>
                      <span class="tag">&lt;<span class="title">p</span>&gt;</span>DocumentMode: <span class="tag">&lt;<span class="title">span</span> <span class="attribute">id</span>=<span class="value">'mode'</span> <span class="attribute">style</span>=<span class="value">'color:red'</span>&gt;</span><span class="tag">&lt;/<span class="title">span</span>&gt;</span><span class="tag">&lt;/<span class="title">p</span>&gt;</span>
                      <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">'flex'</span>&gt;</span>
                      <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">'red'</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span>
                      <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">'blue'</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span>
                      <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">'green'</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span>
                      <span class="tag">&lt;/<span class="title">div</span>&gt;</span>
                      <span class="tag">&lt;/<span class="title">body</span>&gt;</span>
                      <span class="tag">&lt;<span class="title">script</span>&gt;</span><span class="javascript">
                      <span class="keyword">var</span> m = document.getElementById(<span class="string">'mode'</span>);
                      m.innerText = document.documentMode;
                      </span><span class="tag">&lt;/<span class="title">script</span>&gt;</span>
                      <span class="tag">&lt;/<span class="title">html</span>&gt;</span>
                      ";

              var s3 = @"
                      <span class="tag">&lt;<span class="title">html</span> <span class="attribute">lang</span>=<span class="value">'en'</span>&gt;</span>
                      <span class="tag">&lt;<span class="title">head</span>&gt;</span>
                      <span class="tag">&lt;<span class="title">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="title">title</span>&gt;</span>
                      <span class="tag">&lt;<span class="title">style</span> <span class="attribute">type</span>=<span class="value">'text/css'</span>&gt;</span><span class="css">
                      <span class="class">.flex</span><span class="rules">{<span class="rule"><span class="attribute">display</span>:<span class="value"> -ms-flexbox</span></span>;<span class="rule">}</span></span>
                      <span class="class">.flex</span> <span class="tag">div</span><span class="rules">{<span class="rule"><span class="attribute">-ms-flex</span>:<span class="value"><span class="number">1</span> <span class="number">0</span> auto</span></span>; <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">200</span>px</span></span>; <span class="rule"><span class="attribute">height</span>:<span class="value"> <span class="number">200</span>px</span></span>;<span class="rule">}</span></span>
                      <span class="class">.red</span><span class="rules">{<span class="rule"><span class="attribute">background</span>:<span class="value"> red</span></span>;<span class="rule">}</span></span>
                      <span class="class">.blue</span><span class="rules">{<span class="rule"><span class="attribute">background</span>:<span class="value"> blue</span></span>;<span class="rule">}</span></span>
                      <span class="class">.green</span><span class="rules">{<span class="rule"><span class="attribute">background</span>:<span class="value"> green</span></span>;<span class="rule">}</span></span>
                      </span><span class="tag">&lt;/<span class="title">style</span>&gt;</span>
                      <span class="tag">&lt;/<span class="title">head</span>&gt;</span>
                      <span class="tag">&lt;<span class="title">body</span>&gt;</span>
                      <span class="tag">&lt;<span class="title">p</span>&gt;</span>DocumentMode: <span class="tag">&lt;<span class="title">span</span> <span class="attribute">id</span>=<span class="value">'mode'</span> <span class="attribute">style</span>=<span class="value">'color:red'</span>&gt;</span><span class="tag">&lt;/<span class="title">span</span>&gt;</span><span class="tag">&lt;/<span class="title">p</span>&gt;</span>
                      <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">'flex'</span>&gt;</span>
                      <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">'red'</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span>
                      <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">'blue'</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span>
                      <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">'green'</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span>
                      <span class="tag">&lt;/<span class="title">div</span>&gt;</span>
                      <span class="tag">&lt;/<span class="title">body</span>&gt;</span>
                      <span class="tag">&lt;<span class="title">script</span>&gt;</span><span class="javascript">
                      <span class="keyword">var</span> m = document.getElementById(<span class="string">'mode'</span>);
                      m.innerText = document.documentMode;
                      </span><span class="tag">&lt;/<span class="title">script</span>&gt;</span>
                      <span class="tag">&lt;/<span class="title">html</span>&gt;</span>
                      ";

              wb1.NavigateToString(s2);
              wb2.NavigateToString(s3);
          }
      }
  }
</code></pre></li>
</ul>
<p>启动程序即可得到测试结果，我们应该尽可能地让浏览器保持在最新的文档模式中工作，保持最好的 HTML 支持和 JS 性能。</p>
<p><strong>2013-05-22更新</strong>：WebBrowser 控件在显示大量文字的时候性能很差，原因未明。</p>

	 
	     <p style="margin:20px 0; color:#9f9f9f; font-size:12px;">
<span>Posted by <a style="color:#9f9f9f;" href="http://weibo.com/newdings/"><strong>@cmm要给力</strong></a> - 5月 21 2013</span><br />
<span style="line-height:13px;">如需转载，请注明： 本文来自 <a style="color:#9f9f9f;" href="http://blog.edi-c.com"><strong>@chaoming.edc blog</strong></a></span>
</p>
       	 
      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  
<article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
  <header>
      
      
  
    <h1 class="title"><a href="/post/disable-compatibility-view-in-intranet-sites.html">禁此 IE 在本地 Intranet 站点中启用「兼容模式」</a></h1>
  

      <time datetime="2013-05-21T02:20:00.000Z"><a href="/post/disable-compatibility-view-in-intranet-sites.html">5月 21 2013</a></time>
      
  </header>
    <div class="entry">
      
        <p>设置过程比较简单，参考资料：<a href="http://blogs.msdn.com/b/askie/archive/2009/03/23/understanding-compatibility-modes-in-internet-explorer-8.aspx" target="_blank">http://blogs.msdn.com/b/askie/archive/2009/03/23/understanding-compatibility-modes-in-internet-explorer-8.aspx</a></p>
<p>我们只需要在工具栏中找到 <code>工具</code>-&gt;<code>兼容性视图设置</code>，打开设置菜单之后取消 <code>在兼容性视图中显示 Intranet 站点</code> 即可。</p>
<p><img src="http://blogs.msdn.com/blogfiles/askie/WindowsLiveWriter/UnderstandingCompatibilityModesinInterne_E16B/clip_image004_2.jpg" alt="setting"></p>
<p>{图片来自 MSDN Blog}</p>

	 
	     <p style="margin:20px 0; color:#9f9f9f; font-size:12px;">
<span>Posted by <a style="color:#9f9f9f;" href="http://weibo.com/newdings/"><strong>@cmm要给力</strong></a> - 5月 21 2013</span><br />
<span style="line-height:13px;">如需转载，请注明： 本文来自 <a style="color:#9f9f9f;" href="http://blog.edi-c.com"><strong>@chaoming.edc blog</strong></a></span>
</p>
       	 
      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  
<article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
  <header>
      
      
  
    <h1 class="title"><a href="/post/page-reflow-tests.html">测定页面 Reflow 耗时的办法</a></h1>
  

      <time datetime="2013-05-21T01:24:00.000Z"><a href="/post/page-reflow-tests.html">5月 21 2013</a></time>
      
  </header>
    <div class="entry">
      
        <p>最近在查阅关于浏览器 Reflow 性能的资料，在《<a href="http://www.planabc.net/2009/04/13/reflow/" target="_blank">影响 reflow 的因素及其优化</a>》中看到这么一个测试页面 Reflow 性能的脚本：</p>
<pre><code><span class="built_in">var</span> a<span class="subst">=</span>document<span class="built_in">.</span>getElementById(<span class="string">'text'</span>);
a<span class="built_in">.</span>innerHTML <span class="subst">=</span> <span class="string">"text"</span>;
<span class="built_in">var</span> t0 <span class="subst">=</span> <span class="literal">new</span> <span class="built_in">Date</span>();
a<span class="built_in">.</span>offsetHeight;
<span class="built_in">var</span> t1 <span class="subst">=</span> <span class="literal">new</span> <span class="built_in">Date</span>();
alert(t1<span class="attribute">-t0</span>);
</code></pre><p>原理：通常 <code>offsetHeight</code> 总是要等 Reflow 完成才能计算出来，所以脚本会被阻塞直到 Reflow 完成。</p>

	 
	     <p style="margin:20px 0; color:#9f9f9f; font-size:12px;">
<span>Posted by <a style="color:#9f9f9f;" href="http://weibo.com/newdings/"><strong>@cmm要给力</strong></a> - 5月 21 2013</span><br />
<span style="line-height:13px;">如需转载，请注明： 本文来自 <a style="color:#9f9f9f;" href="http://blog.edi-c.com"><strong>@chaoming.edc blog</strong></a></span>
</p>
       	 
      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  
<article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
  <header>
      
      
  
    <h1 class="title"><a href="/post/fiddler_share.html">Fiddler 与 Windows Phone 联调</a></h1>
  

      <time datetime="2013-05-14T04:35:00.000Z"><a href="/post/fiddler_share.html">5月 14 2013</a></time>
      
  </header>
    <div class="entry">
      
        <p>最近对浏览器的页面显示进行调节的时候，不得不使用 <a href="http://fiddler2.com/home" target="_blank">Fiddler</a> 进行本地代理调试。下面简单对使用进行介绍，主要是参考<a href="http://www.spikie.be/blog/post/2013/01/04/Windows-Phone-8-and-Fiddler.aspx" target="_blank"><strong>这个链接</strong></a>。</p>
<h4 id="使用_Fiddler_对_WP8_模拟器进行抓包">使用 Fiddler 对 WP8 模拟器进行抓包</h4>
<p>首先我们先去 Fiddler 官方网站下载一个最新的版本（<a href="http://fiddler2.com/get-fiddler" target="_blank">点击下载</a>）。由于 Windows Phone 8 的模拟器是以 Hyper-V 虚拟机的形式运行，所以它在网络中相当于一台独立的设备。我们需要对 Fiddler 进行监控远程设备的设置。</p>
<ol>
<li>安装启动 Fiddler</li>
<li>按照下面的顺序开启菜单：<code>Tools</code> &gt; <code>Fiddler Options</code> &gt; <code>Connections</code></li>
<li><p>选中 <code>Allow remote computers to connect</code>，确定设置</p>
<p><img src="http://d.pr/i/6mqR.png" alt="remote connection"></p>
</li>
<li><p>返回主界面，在界面右下角有一个黑色的区域，称为 <code>QuickExec Box</code>，在输入框中输入下面的命令，其中 <code>IP Address</code> 为你本机的 IP 地址（设置为本机的主机名亦可）：</p>
<pre><code>prefs <span class="keyword">set</span> fiddler<span class="preprocessor">.network</span><span class="preprocessor">.proxy</span><span class="preprocessor">.registrationhostname</span> [IP Address]
</code></pre><p><img src="http://d.pr/i/1WTT.png" alt="QuickExec"></p>
</li>
<li><p>设置完成后，重新启动 Fiddler 和模拟器，用模拟器中的浏览器打开页面，看能否正常抓包。PS：除了模拟器的流量，本地流量也会同时显示在 Fiddler 中。</p>
</li>
</ol>
<h4 id="使用_Fiddler_对_WP8_设备进行抓包">使用 Fiddler 对 WP8 设备进行抓包</h4>
<p>基本设置与上面的步骤是一样的，我们只需要对设备的 WiFi 接入点进行一点设置即可。</p>
<ol>
<li>打开设备中的 <code>设置</code> &gt; <code>WiFi</code></li>
<li>选择你已经连接的 WiFi 接入点，进入高级设置</li>
<li>高级设置中启用代理服务器，服务器地址为你本机的 IP 地址，端口是8888。</li>
<li>设置完成后手机将通过 PC 代理进行联网，此时即可在 Fiddler 中对其抓包处理。</li>
</ol>
<h4 id="利用_Fiddler_本地调试网页资源">利用 Fiddler 本地调试网页资源</h4>
<p>这部分就比较简单了，属于 Fiddler 的一个最常用的功能。</p>
<ol>
<li>在列表中选择一项抓包内容，打开右键菜单选择将该内容保存到本地</li>
<li>选择右边的 AutoResponder，勾选 <code>Enable automatic responses</code> 和 <code>Unmatched requests passthrough</code></li>
<li>点击 <code>Add</code> 添加规则</li>
<li>在下面列表中选择本地保存下来的文件，然后点击 <code>Save</code></li>
<li>此时可以尝试修改本地的文件内容，测试是否代理成功。</li>
</ol>

	 
	     <p style="margin:20px 0; color:#9f9f9f; font-size:12px;">
<span>Posted by <a style="color:#9f9f9f;" href="http://weibo.com/newdings/"><strong>@cmm要给力</strong></a> - 5月 14 2013</span><br />
<span style="line-height:13px;">如需转载，请注明： 本文来自 <a style="color:#9f9f9f;" href="http://blog.edi-c.com"><strong>@chaoming.edc blog</strong></a></span>
</p>
       	 
      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  
<article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
  <header>
      
      
  
    <h1 class="title"><a href="/post/vintage-mode-in-st2.html">Sublime Text Vim Mode 简单使用</a></h1>
  

      <time datetime="2013-04-18T03:25:00.000Z"><a href="/post/vintage-mode-in-st2.html">4月 18 2013</a></time>
      
  </header>
    <div class="entry">
      
        <h2 id="移动光标">移动光标</h2>
<pre><code>h/l：左右移动光标
k/j：上下移动光标
<span class="number">0</span>：回到行首
Shift+m<span class="regexp">/h/l/g</span>：移动光标至页面中间、顶部、底部及文件结束处
</code></pre><h2 id="编辑类">编辑类</h2>
<pre><code>i：变更状态为光标前插入
a：光标后添加内容
A：在行末添加内容
u：撤销最后一次更改
U：撤销光标所在行的所有更改
dd：删除一行（<span class="number">3</span>dd：删除<span class="number">3</span>行）
<span class="keyword">D</span>：删除光标所在行后面的内容
yy：复制当前行
p：粘贴复制行
n：查找下一个
<span class="keyword">N</span>：查找上一个
/：进入查找模式，向下搜索
?：进入查找模式，向上搜索
</code></pre>
	 
	     <p style="margin:20px 0; color:#9f9f9f; font-size:12px;">
<span>Posted by <a style="color:#9f9f9f;" href="http://weibo.com/newdings/"><strong>@cmm要给力</strong></a> - 4月 18 2013</span><br />
<span style="line-height:13px;">如需转载，请注明： 本文来自 <a style="color:#9f9f9f;" href="http://blog.edi-c.com"><strong>@chaoming.edc blog</strong></a></span>
</p>
       	 
      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  
<article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
  <header>
      
      
  
    <h1 class="title"><a href="/post/how-to-handle-unproductive-days.html">「翻译」效率低的日子怎么办？</a></h1>
  

      <time datetime="2013-04-17T06:50:00.000Z"><a href="/post/how-to-handle-unproductive-days.html">4月 17 2013</a></time>
      
  </header>
    <div class="entry">
      
        <p>本文为译文，原文地址：<a href="http://www.asianefficiency.com/productivity/how-to-handle-unproductive-days/" target="_blank"><strong>http://www.asianefficiency.com/productivity/how-to-handle-unproductive-days/</strong></a>。</p>
<p>每个人都会有效率低的时候，即使是 Efficient Asian™ 也不能保证他们的时间可以 100% 的利用。</p>
<p>有些时候我们会感觉日子过得不对，例如：你的网络瘫痪了，于是就没有了工作的动力，或者是你发现自己每天都在各种事情上面忙碌，但回顾自己的任务列表的时候却发现任务并没有完成。有时候你会发现自己在同一件事情上花了很多的时间，但它就是完成不了。</p>
<p>事出必有因，下面我们就来分析一下它们，同时找出克服它们的办法。</p>
<h2 id="简单总结、图表">简单总结、图表</h2>
<ul>
<li>出现效率低的日子总是有一大堆的原因</li>
<li>如果这些日子没有掌控好的话，它们有可能会变成一段更长的时间</li>
<li>短期内克服效率低的日子需要一些小技巧</li>
<li>长期来看，造成效率低的原因必须找到根源才能最终解决问题</li>
</ul>
<p>这里有个图（暂未翻译）</p>
<p><img src="http://cdn01.asianefficiency.com/wp-content/uploads/2013/03/unproductive-days-chart.png" alt="unproductive-days-chart"></p>
<h2 id="为什么会出现低效的时候？">为什么会出现低效的时候？</h2>
<p>在健身领域内有一个很流行的说法就是：在你所做的运动中有20%是无用的。为什么？大部分的健身教练都会这么跟你说：如果你的<a href="http://www.asianefficiency.com/books/thrive-by-brendan-brazier/" target="_blank">饮食无节制</a>，或者没有<a href="http://www.asianefficiency.com/health/more-sleep-more-productivity-video/" target="_blank">充足的睡眠</a>，或者是你的<a href="http://www.asianefficiency.com/motivation/eliminating-motivation-doing-the-right-thing/" target="_blank">健身意愿下降了</a>，你的训练就不会达到应有的效果。</p>
<p>换在工作和效率的领域，我们认为20%这个数值有点高（它意味着你将是每五个工作日将有一天是完全无效的）。我们稍微把这个数字降低到 3-5%，大概就是在一个月里面会出现 1-2 天是没有效率的，剩余的时间都是高效的或者是达到平均水平的。</p>
<p>下面解释一下几个概念：</p>
<ul>
<li>高效的：所有的事情都完成了。你设置了一系列<a href="http://www.asianefficiency.com/productivity/coveys-time-management-quadrant/" target="_blank">高价值的任务</a>，并且一个接一个地落实并完成了。然后你再接再厉。</li>
<li>平均水平：大概就是你早上的时候定了<a href="http://www.asianefficiency.com/habits/eat-that-frog-most-important-tasks-morning/" target="_blank">6个任务</a>，一天下来完成了三四个。</li>
<li>低效的：早上的时候定了任务列表并开始执行，但是你中途分心了，或者是有人打扰了你。在你发现之前，你已经忙了一整天并且快要下班了，但你的任务列表一点都没有变。</li>
</ul>
<p>在这里，有一个重要的概念就是：如果你的一天开始得很糟糕，你可以通过下面将会谈及的技巧和策略去修正它。这些技巧可能会帮助你把低效的一天转变成平常的、甚至高效的一天。</p>
<h3 id="低效的九个原因">低效的九个原因</h3>
<p>造成低效的原因有很多，下面列举其中重要的几个：</p>
<ol>
<li>糟糕的能量管理。如果你不能很好地管理自己的生理、心理健康，那你肯定不能有一个很好的效率。糟糕的能量管理只会让你整天处于半睡半醒的状态，而这种状态通常都是低效的。</li>
<li>负荷过重。大多数人都会由于过多的任务或者太多电子邮件（或者两者兼有）而造成负荷过重。如果你发现你被过多的事情弄得没有时间的话，那你就要注意：你正向着一个低效区域前进，除非你做出一些改善的措施。</li>
<li>健康问题。这个问题一般都会的伴随着糟糕的能量管理。如果你没有合理用餐、保持运动和正常作息，你就很难达到一个高效的状态。如果你认为自己可以忽略健康问题同时持续工作，那你就会让你的健康程度不断下降。有的人会由于过多的工作而虚脱、病倒（特别是现在这种流感季节）。</li>
<li>经常无法发挥自身优势。有的人不知道自身的优势在哪里或者他们所做的工作并不能发挥自己的长处，于是他们的经常都会处于低效状态。即使他们完成工作了，也会耗费他们很多精力。一个明显的例子就是：创新性的人才经常会发现自己被行政工作困扰一整天。</li>
<li>持续地被打断。如果你处于一个持续被电话、邮件、同事及信息打扰的工作环境中，你将无法达到高效状态。</li>
<li>一心多用。这一点不用说明了吧？</li>
<li>找不到工作流。有的人不明白如何利用工作流以发挥他们的优势，我们在「<a href="http://www.asianefficiency.com/habits/hero-mode/" target="_blank"><strong>英雄模式</strong></a>」这个文章里面有探讨过。</li>
<li>意志，自我约束和毅力被耗尽。所有的这些都需要你通过休息来重装上阵。 <a href="http://www.asianefficiency.com/productivity/downtime-and-breaks/" target="_blank"><strong>休假</strong></a> 是帮助我们恢复效率的最好手段。</li>
<li>缺乏控制。有时候，事情总会在我们的控制之外发生：天气变化、网络中断、家庭紧急状况。尽管我们可以尝试去阻止这些事情发生，但有时候天意难料。</li>
</ol>
<p>通过以上的分析我们可以看到各种低效发生的原因。不过办法总比问题多，我们可以通过长期手段和短期手段来解决这些问题。下面我们简单来看一下。</p>
<h3 id="低效的时间段">低效的时间段</h3>
<p>我们在上面的内容里面已经探讨过低效的一天，但不幸的是这些时间常常会演变成更长的时间段：一周、一个月、甚至几个月。下面我们来分析一下不同的时间段以及为什么它们会延长：</p>
<ul>
<li>天。正如上文所说，每个月总有那么几天是低效的，这是很正常的。但一周里面可以有 3-4 天是高效的，然后有 1-2 天是处于平均水平的。</li>
<li>周。低效的一周通常都是这样发生的：1. 生病了（或者是因为糟糕的能量管理）；2. 你被一个长期项目过分消耗，导致长期低效。</li>
<li>月。这种情况非常糟糕，但是确实会发生，这通常都是因为遇到十分难缠的项目或工作，或者是个人生活中的一些耗费大量时间的杂事（即时你不是在关注那件事件，你的注意力也会被分散）。</li>
<li>年。这种情况我只在一些长期病人或者是一些用绳命在玩网游（魔兽世界）的学生上见过。还有一种情况就是，当一个人遇到职业生涯的瓶颈时，由于他们陷得太深而导致无法了解现状、无法看到出路，这种情况就会造成长期低效。</li>
</ul>
<h2 id="如何去克服低效的日子">如何去克服低效的日子</h2>
<p>下面我们一起来探讨，如何去打败低效魔鬼。</p>
<h3 id="短期的小技巧">短期的小技巧</h3>
<p>这里有一些短期的小技巧可以帮助大家改善低效开始的一天（或是帮助度过糟糕的一天）。</p>
<ol>
<li><p><strong>明天会更好</strong></p>
<p>很明显，有些事情确实晚点做或者明天再做会更好。同时，睡眠可以很好地帮助清空我们在在大脑中的各种想法、情绪以及其他心理影响。为了更好地完成任务，我们可在今天设置一下明天的输出，尽量在第二天早上之前清空我们的大脑中的事情。</p>
</li>
<li><p><strong>克服延迟</strong></p>
<p> 克服延迟这种办法可在短期内有效地帮助我们提高效率。我们推荐现在最流行的两种方法分别是<a href="http://www.asianefficiency.com/motivation/become-more-productive-with-the-pomodoro-technique/" target="_blank"><strong>番茄工作法</strong></a>与<a href="http://www.asianefficiency.com/motivation/solar-flaring-to-overcome-procrastination/" target="_blank"><strong>Solar Flaring</strong></a>。另外，还有一个方法对一部分人很有作用：利用人的欠款心理。你需要把一大笔钱（$500或$1000）交给你一个十分信任的朋友，而这钱只能在你真正完成任务的时候才能取回来。</p>
</li>
<li><p><strong>利用一些事物标记自己的高效状态</strong></p>
<p> 大部分人都会有一些特别的东西可以尽快进入高效状态。我们发现，这些通常是像咖啡、绿茶一类的东西。当我真正投入到一项任务的时候，我只会喝英式早餐茶，所以这东西可以当作是我进入高效工作流时的一个特别的点。</p>
<p> 另外，音乐也可以成为类似的东西。更多的请<a href="http://www.asianefficiency.com/motivation/music-working/" target="_blank">阅读这篇文章</a>。</p>
</li>
<li><p><strong>益智药物</strong></p>
<p> <em>声明：</em>我们并不是专业的药师，我们建议您在服用任何药物前请咨询你的医生。</p>
<p> 我们知道有不少的人会把一些药物当作益智药来服用，以图帮助他们完成各种艰苦的工作，而这些药物对他们真的有效。当然，在服用任何药物前，我们强烈建议您先好好咨询医生，以免影响您的身体健康。</p>
<p> 在 Asian Efficiency 里，我们曾经用一些人体必需的元素进行过小测试，例如维生素B（对我十分有用）以及各种人参制品（对Thanh十分有用）。再次地，我们建议您在服用任何药物前请咨询你的医生。</p>
</li>
<li><p><strong>换种任务</strong></p>
<p> 如果你发现自己在同一类任务中工作、挣扎了很久，请尝试换另外一种工作。例如，如果你在做一种创造性的工作，但无法去产出新的词或者图像，请尝试去做一些简单的行政工作如回复电话、检查电子邮件或者做一下跑腿，这样都会对你有帮助。</p>
</li>
<li><p><strong>休息片刻</strong></p>
<p> 我们在很多地方都谈过这个方法，但我们必须再次强调：<a href="http://www.asianefficiency.com/productivity/downtime-and-breaks/" target="_blank"><strong>休息一小段时间</strong></a>是最好的保持集中力的其中一个方法。即使只是走到室外、呼吸一下新鲜空气或来回走动十来分钟，这些都会让你的集中力得到重新恢复。</p>
</li>
<li><p><strong>小憩片刻</strong></p>
<p> 这个跟上面所说的休息片刻差不多，但是影响会稍微大一点。你需要保持睡眠时间比较短（20-45分钟），确保不要进入深度睡眠。</p>
</li>
<li><p><strong>换个环境</strong></p>
<p> 拿起你的笔记本电脑，走到公园、咖啡厅、另个一个房间或者大楼内的其它地方去工作吧，这样也是一种不错的方法让你的集中力重新集中。有时候只是稍微换个位置就可以让你的大脑重新恢复到高效的状态中了。</p>
</li>
</ol>
<h3 id="长期的、系统的解决方案">长期的、系统的解决方案</h3>
<p>现在，你已经了解了很多快速的方法让你摆脱低效状态、重新集中精神了，下面我们一起来看看一些长期的让你的生活真正摆脱低效的解决方案吧。</p>
<ol>
<li><p><strong>能量管理</strong></p>
<p> 身体才是革命的本钱，健康永远是放在第一位的。健康的身体是高效的源泉。如果你忽略了自己的身体健康和家族幸好，你迟早会为此付出代价的。</p>
<p> 保持一个良好的身体状况，需要良好的睡眠（我们有一款叫<a href="https://www.aepremium.com/better-sleep/?utm_source=asianefficiency.com&amp;utm_medium=blog-post&amp;utm_term=how-to-handle-unproductive-days&amp;utm_content=in-post&amp;utm_campaign=bs-text" target="_blank">「Better Sleep」</a>的产品可以帮助您）、适当的运动以及了解一些营养学上的知识用以选择更好更适合自己的食物。</p>
</li>
<li><p><a href="http://www.asianefficiency.com/email-management/simple-guide-to-managing-your-email/" target="_blank"><strong>邮件管理</strong></a></p>
<p> 在今天的工作环境中，最不幸的一部分是被大量的邮件造成我们工作压力太大。我们的<a href="http://www.asianefficiency.com/email-management/simple-guide-to-managing-your-email/" target="_blank"><strong>这篇文章</strong></a>简单系统地说明了这个问题，下面列举一些简单的规则：</p>
<ul>
<li>请不要把检查电子邮箱作为早上的第一项任务</li>
<li>关闭你的电子邮件提醒</li>
<li>检查邮件的次数越少越好</li>
</ul>
</li>
<li><p><strong>任务管理</strong></p>
<p> 大量的电子邮件，必然就会伴随着大量的任务。</p>
<p> 最简单的就是尝试使用一些更好的方法论去做任务管理（这里有<a href="http://www.asianefficiency.com/task-management/simple-task-management/" target="_blank"><strong>一篇文章有简单介绍</strong></a>），或者是使用一些更好的「工业级」的软件去辅助自己（例如<a href="http://www.asianefficiency.com/omnifocus/" target="_blank"><strong>OmniFocus</strong></a>）。</p>
<p> 如果你发现应用了一些任务管理方法之后工作压力还是十分大，这可能是一个迹象：你过多地尝试去掌握你的生活中的各个不同的领域，你需要重新考虑对你来说什么事情更重要。</p>
</li>
<li><p><strong>控制被打断的次数</strong></p>
<p> 如果你正在一个私人办公室里面工作，你可以订下一些关于你什么时候可以被打扰、什么时候不能被打扰的规则。戴上你的耳机吧，你会神奇地发现人们会让你独处。在你工作的时候，把你的电话放一边去（或者至少是保持静音状态并且远离视线范围）。同时，把电子邮件的提醒给关掉。</p>
<p> 利用一些程序（像 <a href="http://selfcontrolapp.com" target="_blank"><strong>Self Control</strong></a>）去阻止你在工作时访问你不应该访问的网站吧。</p>
</li>
<li><p><strong>找到你的工作流</strong></p>
<p> 学习如何达到自己的工作流（你的最高效状态）吧。这是一种在适当的时间里面做适当的事情的方法（请阅读<a href="http://www.asianefficiency.com/habits/hero-mode/" target="_blank">「英雄模式」</a>）。同时，这也是一种关于建立可以让你保持高效的、有行动力的<a href="http://www.asianefficiency.com/technology/essential-tools-for-a-productive-workspace-environment/" target="_blank">「高效工作环境」</a>的方法。</p>
</li>
<li><p><strong>长假放松</strong></p>
<p> 请确保你有足够的私人时间，你除了工作之外，还需要每天休息。每周的话，至少要有一天休息时间。同时，在那天里面你必须确保精力集中在除工作以外的活动上（即使你只是打算检查一下邮件或者加班一两个小时）。</p>
</li>
<li><p><strong>发挥自身所长</strong></p>
<p> 基于你自身的长处，找一份可实现你的最高价值的工作吧。阅读一下<a href="http://www.asianefficiency.com/goals/the-time-management-secret-that-will-eliminate-all-your-time-wasters/" target="_blank"><strong>这篇文章</strong></a>吧。</p>
</li>
</ol>
<h2 id="下一步该怎么做">下一步该怎么做</h2>
<ol>
<li>找出自己低效的原因：缺乏能量、缺乏注意力、任务过多……</li>
<li>深层次地找出自己效率的根本原因。</li>
<li>开始利用短期的解决办法帮助自己改善低效的一天。</li>
<li>实施长期的解决方案，同时关注自己达到平均水平和高效水平的时间是否在增长。</li>
</ol>
<p>发布时间：2013-04-16</p>

	 
	     <p style="margin:20px 0; color:#9f9f9f; font-size:12px;">
<span>Posted by <a style="color:#9f9f9f;" href="http://weibo.com/newdings/"><strong>@cmm要给力</strong></a> - 4月 17 2013</span><br />
<span style="line-height:13px;">如需转载，请注明： 本文来自 <a style="color:#9f9f9f;" href="http://blog.edi-c.com"><strong>@chaoming.edc blog</strong></a></span>
</p>
       	 
      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  
<article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
  <header>
      
      
  
    <h1 class="title"><a href="/post/wpf-panels-performance.html">关于 WPF 中的面板性能分析</a></h1>
  

      <time datetime="2013-03-24T03:54:00.000Z"><a href="/post/wpf-panels-performance.html">3月 24 2013</a></time>
      
  </header>
    <div class="entry">
      
        <p>资料来源：<a href="http://stackoverflow.com/questions/9946811/in-what-order-are-panels-the-most-efficient-in-terms-of-render-time-and-performa" target="_blank">In what order are Panels the most efficient in terms of render time and performance?</a></p>
<p>以下内容为答案的翻译，如有翻译不当的地方，请指正：</p>
<p>我认为，比起直接给出这些控件的性能比较结论，更好的是准确地去理解每个面板控件自身的性能特性。WPF 在绘制内容的时候，需要经过两个步骤：<em>计算</em>和<em>排列</em>。每种面板在这两个不同的阶段里面都有不同的性能特性。</p>
<p>在<em>计算</em>这个步骤里面，影响性能的是面板是否具有自适应的排列特性（例如在水平对齐的属性中使用 <code>Strech</code> 或者 <code>Grid</code> 中使用 <code>Auto</code>），如有设置，则它的子控件都将会拉伸或者自动计算大小。而在<em>排列</em>这个步骤里面，影响性能的是不同的子控件在布局位置之间的相互作用的复杂度以及子控件的数目。</p>
<p>有时候，原生的面板控件并不方便做成我们想要的布局。我开发过一个控件，它可以指定子控件在开用空间内占据的位置的百分比。在所有默认的控件中，没有一个可以达到这样的效果。如果真想使用默认控件（通过绑定父控件的实际大小），将会得到糟糕的性能表现。于是我创建了一个继承自 <code>Canvas</code> 的布局面板控件来达到我想要的效果（我在 <code>Canvas</code> 控件的源码中修改了大概20行左右，便完成了）。</p>
<p>下面讨论一下 WPF 中可用的面板控件：</p>
<h3 id="Canvas"><code>Canvas</code></h3>
<blockquote>
<p>它定义了一个区域，你将可以显式地指定子元素相对于 Canvas 区域的坐标</p>
</blockquote>
<p><code>Canvas</code> 拥有在所有控件中最好的<em>排列</em>性能，因为它所有的子控件位置都是固定的、直接指定的。在<em>计算</em>步骤中，它也有很好的性能表现，原因是它并没有拉伸的属性，所有的子元素都是使用自己的原始大小。评估：性能最好，无论是计算性能和排列性能。</p>
<h3 id="DockPanel"><code>DockPanel</code></h3>
<blockquote>
<p>它定义了一个区域，你可以将子元素以水平或垂直方向排列。</p>
</blockquote>
<p><code>DockPanel</code> 的布局策略十分简单，所有加入它内部的项目将逐个按顺序排列。默认地，它的大小将由子项目的原始大小来决定（基于顶部/底部和左边/右边的相对位置），如果宽高没有定义的话，对应方向的大小则将 <code>Dock</code> 属性来决定。评估：它的计算性能和排列性能都属于中等水平。</p>
<h3 id="Grid"><code>Grid</code></h3>
<blockquote>
<p>它定义了一个灵活的网格区域，可以分割成多行与多列</p>
</blockquote>
<p>如果使用按比例或者全自动调节界面大小的话，<code>Grid</code> 是一个性能损耗最严重的面板控件。原因是：当子项目的原始大小和布局位置通过 <code>Grid</code> 来指定的时候，子项目的大小计算是一件十分复杂的事情。同时，在所有面板控件中，它的布局过程是最复杂的。评级：它的计算性能和排列性能属于中低水平。</p>
<h3 id="StackPanel"><code>StackPanel</code></h3>
<blockquote>
<p>它定义了一个区域，区域内的子元素将按照水平方向或垂直方向排列成一行</p>
</blockquote>
<p>在 <code>StackPanel</code> 内，子元素的大小将如此计算：根据 <code>StackPanel</code> 的排列方向，如：垂直方向，则它的子元素在水平方向的大小则使用原始大小或相对大小，而垂直方向的大小则使用原始大小（对齐属性在此方向并不影响它的大小）。这将使 <code>StackPanel</code> 拥有一个中等级别的性能。由于它的排列步骤相对简单，只是将子元素按顺序的逐个排列，所以它在这步骤的性能在所有面板控件中估计能排到第二名。评级：它的计算性能属于中等水平，排列性能属于高等水平。</p>
<h3 id="VirtualizingPanel"><code>VirtualizingPanel</code></h3>
<blockquote>
<p>它提供了一个框架，让面板元素可以虚拟化它们的子元素数据集合。这是一个抽象类。</p>
</blockquote>
<p>如果你需要自己实现一个虚拟化面板，你将需要使用这个基类。它只会加载可视项目的数据，防止内存和 CPU 不必要使用。由于只会显示项目集的一部分，因此性能也较好。影响性能的地方估计就在让项目显示的时候需要对显示区域的边界进行检查。在 SDK 中只提供了一个它的子类：<code>VirtualizingStackPanel</code>。</p>
<h3 id="WrapPanel"><code>WrapPanel</code></h3>
<blockquote>
<p>它提供了一个区域，子元素从左到右地排列在连续的位置中，如果到达了面板的边界，则元素的位置将换行显示。根据排列方向的属性定义，元素显示排列可以是从上到下或者从右到左。</p>
</blockquote>
<p><code>WrapPanel</code> 的计算步骤是一个复杂的过程，它的行高可以由行的原始高度或者行中的某个子元素的高度来决定，视乎于哪个的高度比较大，最大的将决定行高。排列步骤则相对简单，只需要将子元素按顺序逐个放置即可，如空间不足则自动换行。评估：<code>WrapPanel</code> 拥有中等水平的计算性能和排列性能。</p>
<h2 id="参考资料">参考资料</h2>
<ul>
<li><p><strong><a href="http://msdn.microsoft.com/zh-cn/library/bb613542.aspx" target="_blank">尽可能使用最高效的面板</a></strong>：</p>
<blockquote>
<p>布局过程的复杂性直接取决于您使用的 Panel 派生元素的布局行为。 例如，Grid 或 StackPanel 控件提供的功能比 Canvas 控件多很多。 功能大大提高的代价是性能成本也大大提高。 但是，如果您不需要 Grid 控件提供的功能，则应使用成本较低的其他控件，如 Canvas 或自定义面板。</p>
</blockquote>
</li>
<li><p><a href="http://msdn.microsoft.com/zh-cn/library/ms745058.aspx#LayoutSystem_Measure_Arrange" target="_blank">测量和排列子控件</a></p>
</li>
</ul>

	 
	     <p style="margin:20px 0; color:#9f9f9f; font-size:12px;">
<span>Posted by <a style="color:#9f9f9f;" href="http://weibo.com/newdings/"><strong>@cmm要给力</strong></a> - 3月 24 2013</span><br />
<span style="line-height:13px;">如需转载，请注明： 本文来自 <a style="color:#9f9f9f;" href="http://blog.edi-c.com"><strong>@chaoming.edc blog</strong></a></span>
</p>
       	 
      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>





<nav id="pagination">
  
    <a href="/page/2/" class="alignleft prev">上一页</a>
  
  
    <a href="/page/4/" class="alignright next">下一页</a>
  
</nav></div>
    </div>
    <div class="tabbar" onload="divideTabBar()">
	
      <div class="tabbaritem"><a class="next" href="/">Home</a></div>
    
      <div class="tabbaritem"><a class="next" href="/archives/">Archives</a></div>
    
      <div class="tabbaritem"><a class="next" href="/about/">About</a></div>
    
      <div class="tabbaritem"><a class="next" href="/atom.xml">Subscribe</a></div>
    
</div>


  </div>

  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  <script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.0.min.js"></script>
</body>
</html>