date: 2013-03-07 10:52
title: WPF 学习笔记（一）——动画
permalink: PRO-WPF-NOTES-001
tags: [wpf,notes]
---

## 故事板
* **故事板**是 `BeginAnimation()` 的 XAML 等价物，可以通过故事板将动画指定到合适的元素和属性。
* **事件触发器**。事件触发器响应属性变化或事件，并且控制故事板。

## 动画性能
### 帧速率
目标：要保持 60 FPS。
要显式限制 FPS，需要对 Storyboard 直接声明：

    <Storyboard Timeline.DesiredFrameRate = "30">

另外，点击 [此网址](http://blogs.msdn.com/b/henryh/archive/2006/08/23/719568.aspx) 可以查看一个动画帧速帮助类。该示例演示了如何根据显卡的渲染级别显式地降低帧速率。

### 位图缓存
对于复杂的 Path 内容，可以对其启用 BitmapCache，将渲染完成的内容以位图的形式发送至显卡中，减低 CPU 占用率。下面的三点指导原则：

* 如果正在绘制的内容需要频繁地重新绘制，使用位图缓存是合理的。
* 如果元素的内容经常变化，使用位图缓存可能不合理。因为可视化内容每次改变时，WPF 需要重新渲染位图并将其发送到显卡缓存，而这需要时间。
* 尽可能降低缓存内容的数量。位图越大，WPF 存储缓存备份所需要的时间越长，并且需要的显存越多。

#### 性能分析工具 [Perforator](http://tinyurl.com/yfqottg)