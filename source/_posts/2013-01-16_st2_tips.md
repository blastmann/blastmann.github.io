date: 2013-01-16  
title: Sublime Text 使用技巧总结
permalink: my-st2-tips
tags: st2
---

Sublime Text 使用技巧总结
-------------------
简单总结一下 ST2 在使用过程中的一些小经验和技巧吧。

## 亮点功能
* 在工程项目中的快速文件切换
* 当前文件中的函数定位
* 支持插件功能
* 自定义Snippet支持
* 免打扰模式
* Mac 版本下支持 TextMate 的 Bundle

## 快捷键
关于软件中的快捷键，其实可以自行查找软件中的快捷键设定文件（ Preferences->Key Binding - Default ），打开之后可以看到一堆快捷键绑定。

简单解释一下配置文档中的快捷键绑定，super 键就是对应 Windows 下面的 win 键，在 OSX 下面对应的是 command 键。一部分键位组合在 Windows 下面并不能使用，例如 super+1,2,3,4,5... 之类当前打开文件切换的快捷键（由于会与系统快捷键产生冲突），所以会更改为 alt+1,2,3,4,5... 等。

### 基本操作
简单列出一些常用的快捷键吧。

* ctrl+shift+p - 调出全局功能菜单，支持模糊匹配，可以直接输入菜单中的命令的部分字母直接调用。
* ctrl+p - 打开快速文件切换面板（可以同时使用组合命令如 `:` 和 `@` 这两个命令）
* ctrl+tab - 按照打开顺序切换当前打开的文件
* ctrl+t - 新建一个tab
* ctrl+w - 关闭当前tab
* ctrl+shift+t - 恢复关闭的tab
* ctrl+d - 选中当前的单词
* ctrl+l - 选中当前的行
* ctrl+m - 移动光标到作用域中括号
* ctrl+shift+m - 选中光标所在位置到框选部分
* ctrl+k, ctrl+b - 显示、关闭侧边栏

### 其他较好用的快捷键
* ctrl+super+g - 快速在当前文档中查找选中部分并全部选中，支持同时编辑
* alt+super+g - 快速向下查找下一项
* ctrl+shift+up/down - 将当前行或选中的部分向上/向下移动一行

## Package Control -- 最重要的插件管理工具
### 如何为Sublime Text添加Package Control？
Sublime Text的软件架构支持添加插件，但是我们仍然需要一个方便的管理工具来管理我们的Package，此时我们就需要使用[Package Control](http://wbond.net/sublime_packages/package_control)。

#### 自动安装
按组合键Ctrl+`打开Console，然后添加下面的命令：

    import urllib2,os; pf='Package Control.sublime-package'; ipp=sublime.installed_packages_path(); os.makedirs(ipp) if not os.path.exists(ipp) else None; urllib2.install_opener(urllib2.build_opener(urllib2.ProxyHandler())); open(os.path.join(ipp,pf),'wb').write(urllib2.urlopen('http://sublime.wbond.net/'+pf.replace(' ','%20')).read()); print 'Please restart Sublime Text to finish installation'

最新版本的Package Control已经完善了网络代理的功能，因此如果使用时的网络环境处于代理环境下，我们可以通过修改Package Control的配置文件来添加代理服务器地址。

#### 手动安装
1. 点击*Preference > Browse Packages..*
2. 打开*Installed Packages*目录
3. [点击下载](http://sublime.wbond.net/Package%20Control.sublime-package)并将文件复制到'Installed Packages'目录下
4. 重启Sublime Text

#### 如何使用
Package Control安装完成之后，会在软件全局菜单（Ctrl+Shift+p）添加相应的菜单项，我们只需调出菜单，输入pci(Package Control: Install Package，对应命令中握住的字母)，即可开始安装我们需要的插件。

### 强大的插件
下面推荐的插件都可以直接在 Package Control 里面安装，很是方便。

* Zen Coding / Emmet - Zen Coding是前端工程师必备快速书写 HTML 代码的插件，后来改名为 Emmet。具体可以参考 [doc.emmet.io](http://docs.emmet.io/)
* SublimeLinter - 用于检查代码书写是否正确的插件，并给出相应的修改提示，支持 C/C++、CSS、HTML、Javascript、Perl、XML 等语言，在使用 Package Control 安装完成后，请参考插件目录下面的 Readme.md 进行相应配置。详情可以[点击这里](https://github.com/SublimeLinter/SublimeLinter)。
* Sublime Alignment - 让你的变量赋值代码自动对齐
* Clipboard History - 添加剪切板历史功能
* Sublime CodeIntel - 添加智能提示功能
* ConvertToUTF8 - ST2 只支持 UTF8 编码。此插件可以让 ST2 支持显示 GBK，BIG5 等编码的显示
* Http Requester - 使用选中的超链接快速发出一个 HTTP 请求并将返回结果显示在当前文件中
* Sublime V8 - 使用 V8 引擎调试当前的 JS 代码

## 设置
在 Preferences->Settings - Defaults 可以找到软件默认的设置选项，需要注意一点：标明 Defaults 的文件在软件升级的时候一般都会被覆盖。建议将需要修改的选项添加到 Settings - User中，避免在升级过程中被覆盖。

下面是我个人的一个喜好设置，其中的一些设置选项可以参考下面的注释。

    {
        // 设置自动完成的延时
        "auto_complete_delay": 500,
        // 默认配色主题
        "color_scheme": "Packages/Color Scheme - Default/Monokai Bright.tmTheme",
        // 检查缩进
        "detect_indentation": true,
        // 检查启动太慢的插件
        "detect_slow_plugins": false,
        // 字体选择
        "font_face": "Monaco",
        // 字体大小
        "font_size": 12,
        // 忽略插件
        "ignored_packages":
        [
            "Vintage"
        ],
        // tab大小设置
        "tab_size": 4,
        // 将tab转换为空格
        "translate_tabs_to_spaces": true,
        // 自动删除空白位置
        "trim_automatic_white_space": true,
        // 保存时删除每行结束后面多余的空格
        "trim_trailing_white_space_on_save": true
    }

## Key Bindings
Key Bindings 是 ST2 中的快捷键绑定设置文件，内容很清晰易懂。Key Bindings 中提供了很多设置的组合选项，可以对不同条件下面的情况进行快捷键绑定。

    [
        // 将 f12 绑定为 ReIndent 命令，自动重新缩进代码（支持HTML与CSS）
        { "keys": ["f12"], "command": "reindent", "args": {"single_line": false} },
        // 除了支持命令绑定参数，还支持定义上下文，只有符合定义上下文中的情况下才启动对应快捷键
        { "keys": ["super+shift+m"], "command": "plain_tasks_cancel", "context": [{"key": "selector", "operator": "equal", "operand": "text.todo" }] }
    ]

## Snippets 代码片段定义
在 ST2 的菜单中可以自行新建一个属于自己的 Snippet，可以将常用的代码片段放置在其中，只要输入自己定义的字符，点击 tab 键便自动拓展其内容。

在 Tools 菜单下点击 New Snippet，自动弹出下面的示例内容。

    <snippet>
        <content><![CDATA[
    Hello, ${1:this} is a ${2:snippet}.
    ]]></content>
        <!-- Optional: Set a tabTrigger to define how to trigger the snippet -->
        <tabTrigger>hello</tabTrigger>
        <!-- Optional: Set a scope to limit where the snippet will trigger -->
        <!-- <scope>source.python</scope> -->
    </snippet>

去掉 tabTrigger 注释保存之后，在文档中输入 hello+tab 便会自动输出对应的 snippet 内容，并提供两个点击 tab 后切换的编辑点。