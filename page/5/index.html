<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>第 5 页 | @chaoming.edc blog</title>
  <meta name="author" content="chaoming.edc|blastmann">
  
  <meta name="description" content="track my learning">
  
  
  <meta name="keywords" content="windowsphone,windows,xaml,developer,iOS,OSX,productive">
  
  

  

  <meta property="og:site_name" content="@chaoming.edc blog"/>
  <meta name="copyright" content="@chaoming.edc blog"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
    <meta property="og:image" content="undefined"/>
  
   <meta name="google-site-verification" content="nTpmJEYYJgba5eVrpd_dfj1W_Ayr-NjZ1vFvhi5aqzI" />
   <meta name="baidu-site-verification" content="QO84kHVH0w" />
   <link rel="apple-touch-icon" href="/icon.png" />
   <link rel="shortcut icon" href="/favicon.png" >
   <link rel="alternate" href="http://blog.edi-c.com/atom.xml" title="@chaoming.edc blog" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
</head>


<body>
  <div id="content" class="inner">
    <aside id="sidebar" class="alignleft">
      <div class="navigationBar">
        <a href="/">@chaoming.edc blog</a>
      </div>
    	
  <nav class="widget" id="menu">
	<ul>
    
      <li class="cell"><a class="next" href="/">Home</a><li>
    
      <li class="cell"><a class="next" href="/archives/">Archives</a><li>
    
      <li class="cell"><a class="next" href="/about/">About</a><li>
    
      <li class="cell"><a class="next" href="/atom.xml">Subscribe</a><li>
    
    </ul>
</nav>

  <div class="widget weibo">
<iframe width="100%" height="100" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=110&fansRow=2&ptype=1&speed=0&skin=1&isTitle=1&noborder=0&isWeibo=0&isFans=0&uid=newdings&verifier=78e1ee4d&colors=ffffff,ffffff,999,000,ecfbfd&dpc=1"></iframe>
</div>

  

  
<div class="widget tagcloud">
  <h3 class="title">标签云</h3>
  <div class="entry">
    <a href="/tags/IE/" style="font-size: 10.00px;">IE</a><a href="/tags/Swift/" style="font-size: 10.00px;">Swift</a><a href="/tags/WPF/" style="font-size: 10.00px;">WPF</a><a href="/tags/alfred/" style="font-size: 10.00px;">alfred</a><a href="/tags/aspnet/" style="font-size: 10.00px;">aspnet</a><a href="/tags/browser/" style="font-size: 10.00px;">browser</a><a href="/tags/csharp/" style="font-size: 10.00px;">csharp</a><a href="/tags/css3/" style="font-size: 12.50px;">css3</a><a href="/tags/dev/" style="font-size: 10.00px;">dev</a><a href="/tags/diary/" style="font-size: 10.00px;">diary</a><a href="/tags/directx/" style="font-size: 10.00px;">directx</a><a href="/tags/fiddler/" style="font-size: 12.50px;">fiddler</a><a href="/tags/google/" style="font-size: 10.00px;">google</a><a href="/tags/iOS/" style="font-size: 10.00px;">iOS</a><a href="/tags/ie/" style="font-size: 10.00px;">ie</a><a href="/tags/ie11/" style="font-size: 10.00px;">ie11</a><a href="/tags/javascript/" style="font-size: 10.00px;">javascript</a><a href="/tags/js/" style="font-size: 10.00px;">js</a><a href="/tags/mac/" style="font-size: 10.00px;">mac</a><a href="/tags/markdown/" style="font-size: 10.00px;">markdown</a><a href="/tags/mvc/" style="font-size: 10.00px;">mvc</a><a href="/tags/note/" style="font-size: 10.00px;">note</a><a href="/tags/notes/" style="font-size: 17.50px;">notes</a><a href="/tags/plugin/" style="font-size: 10.00px;">plugin</a><a href="/tags/productivity/" style="font-size: 10.00px;">productivity</a><a href="/tags/programming/" style="font-size: 12.50px;">programming</a><a href="/tags/python/" style="font-size: 10.00px;">python</a><a href="/tags/reflow/" style="font-size: 10.00px;">reflow</a><a href="/tags/sqlite/" style="font-size: 10.00px;">sqlite</a><a href="/tags/st2/" style="font-size: 17.50px;">st2</a><a href="/tags/summaries/" style="font-size: 10.00px;">summaries</a><a href="/tags/system/" style="font-size: 10.00px;">system</a><a href="/tags/vim/" style="font-size: 10.00px;">vim</a><a href="/tags/vs2012/" style="font-size: 10.00px;">vs2012</a><a href="/tags/vs2013/" style="font-size: 10.00px;">vs2013</a><a href="/tags/web/" style="font-size: 10.00px;">web</a><a href="/tags/webdev/" style="font-size: 20.00px;">webdev</a><a href="/tags/webview/" style="font-size: 12.50px;">webview</a><a href="/tags/windows/" style="font-size: 15.00px;">windows</a><a href="/tags/winrt/" style="font-size: 17.50px;">winrt</a>
  </div>
</div>


    	<footer id="footer" class="inner"><div class="copyright">
  
  &copy; 2015 chaoming.edc|blastmann
  
</div>



<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-51731334-1', 'edi-c.com');
  ga('send', 'pageview');

</script></footer>
    </aside>


    <div id="hidden-navigationBar" class="navigationBar">
      <a href="/">@chaoming.edc blog</a>
    </div>
    <div id="main-col" class="alignright">
    <div id="wrapper">
      
  
<article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
  <header>
      
      
  
    <h1 class="title"><a href="/post/procedure-of-directx-display.html">DirectX显示流程学习小结</a></h1>
  

      <time datetime="2013-01-09T00:00:00.000Z"><a href="/post/procedure-of-directx-display.html">1月 9 2013</a></time>
      
  </header>
    <div class="entry">
      
        <p>下面说一下近来对DX学习的一些自己的理解，不对的地方请提出。下面部分内容可以直接到微软WP8开发者页面查询，<a href="http://msdn.microsoft.com/zh-cn/library/windowsphone/develop/jj714079(v=vs.105" target="_blank">点击链接</a>.aspx)。</p>
<h2 id="无法正常显示图像的原因">无法正常显示图像的原因</h2>
<ul>
<li>设备初始化过程中出现异常</li>
<li>三种视图初始化或设置错误</li>
<li>着色器编写错误</li>
<li>纹理资源视图设置</li>
<li>二维投影视图设置与三维投影视图设定时，位图顶点缓存位置设置的区别</li>
<li>交换链创建时，建议交换链创建时缓存结构格式使用 <code>DXGI_FORMAT_B8G8R8A8_UNORM</code> 。在调用 <code>D3D11CreateDeviceAndSwapChain</code> 或者 <code>D3D11CreateDevice</code> 的时候，添加 <code>D3D11_CREATE_DEVICE_BGRA_SUPPORT</code> 的标志选项。</li>
<li>注意纹理生成时的格式处理（ <code>DXGI_FORMAT_B8G8R8A8_UNORM</code> 与 <code>DXGI_FORMAT_R8G8B8A8_UNORM</code> 的区别），BGRA与RGBA的区别将造成红蓝两色相反</li>
</ul>
<p>基本上DX的使用过程中需要注意的地方都是一些小细节问题，稍微出现一点点差错就会造成图像无法显示、显示错误之类的问题，而且比较多的时候都不会有</p>
<h2 id="桌面DirectX程序与WP8上的DirectX_Component之间的区别">桌面DirectX程序与WP8上的DirectX Component之间的区别</h2>
<p>桌面程序中仍然需要绑定HWND等句柄。内容刷新过程可以使用WM_PAINT、ValidateRect和InvalidateRect等传统的窗体消息循环过程。通过WM_PAINT消息通知DirectX组件进行初始化及屏幕刷新等信息。不使用WM_PAINT消息循环亦可，但需要在DX中自行处理消息响应。</p>
<p>使用DirectX的原因是由于WP8系统上不支持传统的GDI函数，无法直接进行屏幕显示内容的刷新。</p>
<p>WP8上使用DirectX Component则与上述流程有所不同。注意以下几点：</p>
<ul>
<li>WP8上的DX Component，需要与XAML中的DrawingSurfaceBackgroundGrid或DrawingSurface这两个控件进行绑定。</li>
<li>绑定控件后，两种控件都会有不同的接口需要实现。（<a href="#dxctrlapi">后续列出</a>）</li>
<li>两种控件的绑定过程中，DX设备与交换链中的初始化过程不一样，前者将不需要自行初始化交换链，性能更好。</li>
<li>桌面程序中可以调用的DX接口更丰富，WP8中的部分接口实现需要重新封装成异步操作，提高UI的响应效率。</li>
<li>HLSL编写的着色器程序，在WP8编译过程中需要使用编译器对其进行处理，桌面程序则可以在应用程序启动的时候使用相应的API（<code>D3DX11CompileFromFile</code>）进行编译。性能自然是前者更好，因此仍然需要重新编写测试工程中的DX组件。</li>
<li>桌面程序的窗口大小可变，WP8上的应用窗口大小不可变，两者之间的区别会影响DX组件中对交换链的创建处理、纹理大小的创建之类的问题。这也是为何桌面上的游戏程序一般均进行窗口大小锁定，避免Resize过程对显示内容造成影响。</li>
<li>桌面上的DX在初始化的过程中需要检查显卡支持的分辨率，在创建过程需要注意窗口的大小是否符合显卡的大小。当然，我们可以固定创建一个分辨率固定的设备，在纹理生成过程通过更改纹理的顶点缓存位置进行显示区域的修改。在WP8上不需要注意此过程。</li>
<li>WP8的DX组件需要通过复制”同步纹理“来更新显示内容，此接口可以处理为死循环，则会实现高性能屏幕输出，但CPU占用率较高。可以根据自己的需要来修改相应的循环过程。</li>
</ul>
<h2 id="接口代码_">接口代码 <a id="dxctrlapi"></a></h2>
<p>下面的DX接口代码可以在<code>DrawingSurfaceNative.h</code>头文件中查询。</p>
<h5 id="DrawingSurfaceBackgroundGrid:">DrawingSurfaceBackgroundGrid:</h5>
<pre><code>IDrawingSurfaceBackgroundContentProviderNative : <span class="keyword">public</span> IUnknown
{
<span class="keyword">public</span>:
    <span class="keyword">virtual</span> HRESULT STDMETHODCALLTYPE <span class="title">Connect</span>( 
        /* [annotation][<span class="keyword">in</span>] */ 
        _In_  IDrawingSurfaceRuntimeHostNative *host,
        /* [annotation][<span class="keyword">in</span>] */ 
        _In_  ID3D11Device1 *hostDevice) = <span class="number">0</span>;

    <span class="keyword">virtual</span> <span class="keyword">void</span> STDMETHODCALLTYPE Disconnect( <span class="keyword">void</span>) = <span class="number">0</span>;

    <span class="keyword">virtual</span> HRESULT STDMETHODCALLTYPE PrepareResources( 
        <span class="comment">/* [annotation][in] */</span> 
        _In_  <span class="keyword">const</span> LARGE_INTEGER *presentTargetTime,
        <span class="comment">/* [annotation][in][out] */</span> 
        _Inout_  DrawingSurfaceSizeF *desiredRenderTargetSize) = <span class="number">0</span>;

    <span class="keyword">virtual</span> HRESULT STDMETHODCALLTYPE Draw( 
        <span class="comment">/* [annotation][in] */</span> 
        _In_  ID3D11Device1 *hostDevice,
        <span class="comment">/* [annotation][in] */</span> 
        _In_  ID3D11DeviceContext1 *hostDeviceContext,
        <span class="comment">/* [annotation][in] */</span> 
        _In_  ID3D11RenderTargetView *hostRenderTargetView) = <span class="number">0</span>;

};
</code></pre><h5 id="DrawingSurface:">DrawingSurface:</h5>
<pre><code>IDrawingSurfaceContentProviderNative : <span class="keyword">public</span> IUnknown
{
<span class="keyword">public</span>:
    <span class="keyword">virtual</span> HRESULT STDMETHODCALLTYPE <span class="title">Connect</span>( 
        /* [annotation][<span class="keyword">in</span>] */ 
        _In_  IDrawingSurfaceRuntimeHostNative *host) = <span class="number">0</span>;

    <span class="keyword">virtual</span> <span class="keyword">void</span> STDMETHODCALLTYPE Disconnect( <span class="keyword">void</span>) = <span class="number">0</span>;

    <span class="keyword">virtual</span> HRESULT STDMETHODCALLTYPE PrepareResources( 
        <span class="comment">/* [annotation][in] */</span> 
        _In_  <span class="keyword">const</span> LARGE_INTEGER *presentTargetTime,
        <span class="comment">/* [annotation][out] */</span> 
        _Out_  BOOL *isContentDirty) = <span class="number">0</span>;

    <span class="keyword">virtual</span> HRESULT STDMETHODCALLTYPE GetTexture( 
        <span class="comment">/* [annotation][in] */</span> 
        _In_  <span class="keyword">const</span> DrawingSurfaceSizeF *surfaceSize,
        <span class="comment">/* [annotation][out] */</span> 
        _Outptr_  IDrawingSurfaceSynchronizedTextureNative **synchronizedTexture,
        <span class="comment">/* [annotation][out] */</span> 
        _Out_  DrawingSurfaceRectF *textureSubRectangle) = <span class="number">0</span>;

};
</code></pre><p>上述的接口代码中可以看到两者的区别比较明显的是：DSBG控件将由系统创建DX设备、设备上下文、RenderTargetView资源视图。而DrawingSurface则只会负责传入控件的大小和同步纹理（SynchronizedTexture），其他DX所需的资源将要由我们自行创建。但需要注意的是，即使是使用DSBG，我们也可以使用自行创建的设备，具体可以参考HybridMarbleMaze这个示例游戏，游戏对比了两种控件的效率，后者效率仅为前者的2/3。</p>
<h2 id="DirecXHelper-h">DirecXHelper.h</h2>
<p>此文件封装了一部分WP8平台上文件读取和错误信息抛出的函数，帮助我们更方便地创建异步操作。</p>
<pre><code><span class="preprocessor">#pragma once</span>
<span class="preprocessor">#include &lt;wrl/client.h&gt;</span>
<span class="preprocessor">#include &lt;ppl.h&gt;</span>
<span class="preprocessor">#include &lt;ppltasks.h&gt;</span>
<span class="preprocessor">#include &lt;memory&gt;</span>

<span class="keyword">namespace</span> DX
{
    <span class="keyword">inline</span> <span class="keyword">void</span> ThrowIfFailed(HRESULT hr)
    {
        <span class="keyword">if</span> (FAILED(hr))
        {
            <span class="comment">// Set a breakpoint on this line to catch DirectX API errors</span>
            <span class="keyword">throw</span> Platform::Exception::CreateException(hr);
        }
    }

    <span class="keyword">struct</span> ByteArray { Platform::Array&lt;byte&gt;^ data; };

    <span class="comment">// function that reads from a binary file asynchronously</span>
    <span class="keyword">inline</span> Concurrency::task&lt;ByteArray&gt; ReadDataAsync(Platform::String^ filename)
    {
        <span class="keyword">using</span> <span class="keyword">namespace</span> Windows::Storage;
        <span class="keyword">using</span> <span class="keyword">namespace</span> Concurrency;
        <span class="keyword">auto</span> folder = Windows::ApplicationModel::Package::Current-&gt;InstalledLocation;
        task&lt;StorageFile^&gt; getFileTask(folder-&gt;GetFileAsync(filename));
        <span class="comment">// Create a local to allow the DataReader to be passed between lambdas.</span>
        <span class="keyword">auto</span> reader = <span class="built_in">std</span>::make_shared&lt;Streams::DataReader^&gt;(<span class="keyword">nullptr</span>);
        <span class="keyword">return</span> getFileTask.then([](StorageFile^ file)
        {
            <span class="keyword">return</span> file-&gt;OpenReadAsync();
        }).then([reader](Streams::IRandomAccessStreamWithContentType^ stream)
        {
            *reader = ref <span class="keyword">new</span> Streams::DataReader(stream);
            <span class="keyword">return</span> (*reader)-&gt;LoadAsync(<span class="keyword">static_cast</span>&lt;uint32&gt;(stream-&gt;Size));
        }).then([reader](uint32 count)
        {
            <span class="keyword">auto</span> a = ref <span class="keyword">new</span> Platform::Array&lt;byte&gt;(count);
            (*reader)-&gt;ReadBytes(a);
            ByteArray ba = { a };
            <span class="keyword">return</span> ba;
        });
    }
}
</code></pre><p>ReadDataAsync函数是示例工程中提供的用于异步读取着色器编译后的cso文件的接口，当然也可以用于其他地方的文件读取。只需要简单地将文件读取调用封装成Task即可。</p>
<h2 id="XAML中的D3D">XAML中的D3D</h2>
<p>下面摘录一部分来自微软官网的文档：</p>
<p>每次 XAML 引擎更新 XAML UI 时，它都会调用 Draw 方法。当前帧完成后，对 RequestAdditionalFrame 的调用将立即请求 XAML 引擎重新绘制屏幕。要降低应用的耗电量，您可以修改模板代码，以便每次调用 Draw 方法时不会调用 RequestAdditionalFrame。每次更新 UI 时，XAML 引擎仍然调用 Draw，但它不会立即尝试重新绘制。当应用显示不需要在尽可能最高的帧速率下进行重新绘制的静态内容时，这特别有用。</p>

	 
	     <p style="margin:20px 0; color:#9f9f9f; font-size:12px;">
<span>Posted by <a style="color:#9f9f9f;" href="http://weibo.com/newdings/"><strong>@cmm是muffinman_</strong></a> - 1月 9 2013</span><br />
<span style="line-height:13px;">如需转载，请注明： 本文来自 <a style="color:#9f9f9f;" href="http://blog.edi-c.com"><strong>@chaoming.edc blog</strong></a></span>
</p>
       	 
      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  
<article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
  <header>
      
      
  
    <h1 class="title"><a href="/post/notes-of-my-python-learning-01.html">Python简明教程学习笔记一</a></h1>
  

      <time datetime="2012-12-27T15:37:00.000Z"><a href="/post/notes-of-my-python-learning-01.html">12月 27 2012</a></time>
      
  </header>
    <div class="entry">
      
        <p>刚刚开始学习Python，主要还是从基础概念入手，实则这些东西每种语言都是差不多的，不过感觉还是需要学习一门比较简单的脚本语言。下面就列一下一些基本概念吧。</p>
<h2 id="基本概念">基本概念</h2>
<h3 id="字面意义上的常量">字面意义上的常量</h3>
<p>即一般的常量，只代表它自己。</p>
<h3 id="数">数</h3>
<ul>
<li>整数</li>
<li>长整数</li>
<li>浮点数</li>
<li>复数</li>
</ul>
<h3 id="字符串">字符串</h3>
<ul>
<li>单引号与双引号结果的使用是一样的</li>
<li>三引号’’’或”””，可以指示一个多行的字符串</li>
<li>转义符：利用反斜杠\来转义</li>
<li>自然字符串：在字符串前添加r或者R，则其中的内容都无须转义</li>
<li>Unicode字符串：在字符串前添加u或者U</li>
<li>字符串与常量一样，不可变</li>
</ul>
<h3 id="变量">变量</h3>
<p>变量，计算机中存储信息的一部分内存。访问的时候需要给变量命名。</p>
<h3 id="标识符的命名">标识符的命名</h3>
<ul>
<li>标识符的第一个字符必须是字母表中的字母（大小写）或者下划线_</li>
<li>标识符名称的其他部分可以由字母（大小写）、下划线或数字组成</li>
<li>标识符名称对大小写敏感</li>
</ul>
<h3 id="数据类型">数据类型</h3>
<p>变量可以处理不同类型的值，称为数据类型。</p>
<h3 id="对象">对象</h3>
<p>Python中所有东西都是对象。</p>
<h3 id="逻辑行与物理行">逻辑行与物理行</h3>
<p>Pythone中假定每个<em>物理行</em>对应一个<em>逻辑行</em>。如果想要在一个物理行中使用多于一个逻辑行， 那么需要使用分号来特别地标明这种用法。分号表示一个逻辑行/语句的结束。</p>
<h3 id="缩进">缩进</h3>
<p>空白在Python中是重要的。事实上行首的空白是重要的。它称为缩进。在逻辑行首的空白（空格和制表符）用来决定逻辑行的缩进层次，从而用来决定语句的分组。</p>
<p>这意味着同一层次的语句必须有相同的缩进。每一组这样的语句称为一个块。我们将在后面的章节中看到有关块的用处的例子。</p>

	 
	     <p style="margin:20px 0; color:#9f9f9f; font-size:12px;">
<span>Posted by <a style="color:#9f9f9f;" href="http://weibo.com/newdings/"><strong>@cmm是muffinman_</strong></a> - 12月 27 2012</span><br />
<span style="line-height:13px;">如需转载，请注明： 本文来自 <a style="color:#9f9f9f;" href="http://blog.edi-c.com"><strong>@chaoming.edc blog</strong></a></span>
</p>
       	 
      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  
<article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
  <header>
      
      
  
    <h1 class="title"><a href="/post/texture-addressing-modes.html">Texture Addressing Modes（纹理地址模式）</a></h1>
  

      <time datetime="2012-12-26T04:16:00.000Z"><a href="/post/texture-addressing-modes.html">12月 26 2012</a></time>
      
  </header>
    <div class="entry">
      
        <p>Direct3D中的纹理都是位图，所以任何位图数据都可以赋予给一个Direct3D原始数据。除此之外，D3D还可以支持更多的高级渲染技术，例如纹理混合和光源映射。想得到更多相关的信息，可以参阅<a href="http://msdn.microsoft.com/en-us/library/windows/desktop/bb206241(v=vs.85" target="_blank">Texture Blending</a>.aspx)和<a href="http://msdn.microsoft.com/en-us/library/windows/desktop/bb174695(v=vs.85" target="_blank">Light mapping with Textures</a>.aspx)。</p>
<p>如果你的应用程序创建了一个HAL（硬件抽象层）设备或者一个软设备，则可以使用8/16/24/32/64或者128位的纹理。</p>
<h2 id="Texture_Addressing_Modes（纹理地址模式）">Texture Addressing Modes（纹理地址模式）</h2>
<h3 id="Wrap_Texture_Address_Mode">Wrap Texture Address Mode</h3>
<h3 id="Mirror_Texture_Address_Mode">Mirror Texture Address Mode</h3>
<h3 id="Clamp_Texture_Address_Mode">Clamp Texture Address Mode</h3>
<h3 id="Border_Color_Texture_Address_Mode">Border Color Texture Address Mode</h3>
<h2 id="Texture_Dirty_Regions（纹理污染区域）">Texture Dirty Regions（纹理污染区域）</h2>
<p>通过指定纹理中的污染区域，应用程序可以只更新纹理中的部分区域。只有被标明为污染的区域才会调用<code>IDirect3DDevice9::UpdateTexture</code>来拷贝更新区域。然而，污染区域的声明还需要考虑对齐优化的问题。当纹理创建完成后，整个纹理都会被认为是受污染的（脏的）。只有下面的操作会影响纹理的污染状态：</p>
<ul>
<li>在纹理中添加一个污染区域</li>
<li>锁定部分纹理缓存，此操作将自动添加锁定区域为污染区域</li>
<li>在<code>IDirect3DDevice9::UpdateSurface</code>中使用表面级别的纹理作为目标纹理</li>
<li>在<code>IDirect3DDevice9::UpdateTexture</code>中将纹理作为源，用来清除源纹理中的污染区域</li>
<li>使用<code>IDirect3DSurface9::GetDC</code>来返回设备上下文</li>
</ul>
<p>因为每种纹理都有不同类型的污染区域，所以各个纹理类型都有相应的方法取得相应的信息。</p>
<ul>
<li><code>IDirect3DCubeTexture9::AddDirtyRect</code></li>
<li><code>IDirect3DTexture9::AddDirtyRect</code></li>
<li><code>IDirect3DVolumeTexture9::AddDirtyBox</code> </li>
</ul>
<p>当使用<code>NULL</code>作为<code>pDirtyRect</code>或者<code>pDirtyBox</code>作为参数传入上述方法中时，污染区域将会扩展覆盖至整个纹理。</p>
<p>每个锁定方法都可以传入<code>D3DLOCK_NO_DIRTY_UPDATE</code>用于防止纹理的污染状态改变。<br>详情可以参阅<a href="http://msdn.microsoft.com/en-us/library/windows/desktop/bb174707(v=vs.85" target="_blank">Locking Resource</a>.aspx)。</p>
<h2 id="Texture_Palettes（纹理调色板）">Texture Palettes（纹理调色板）</h2>
<p>D3D9支持对纹理进行调色。在<code>IDirect3DDevice9</code>对象中，有一套256色的调色板。可以通过<code>IDirect3DDevice9::SetCurrentTexturePalette</code>设置当前的调色板属性。</p>

	 
	     <p style="margin:20px 0; color:#9f9f9f; font-size:12px;">
<span>Posted by <a style="color:#9f9f9f;" href="http://weibo.com/newdings/"><strong>@cmm是muffinman_</strong></a> - 12月 26 2012</span><br />
<span style="line-height:13px;">如需转载，请注明： 本文来自 <a style="color:#9f9f9f;" href="http://blog.edi-c.com"><strong>@chaoming.edc blog</strong></a></span>
</p>
       	 
      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  
<article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
  <header>
      
      
  
    <h1 class="title"><a href="/post/task-management-in-st2.html">Sublime Text中的任务管理</a></h1>
  

      <time datetime="2012-12-26T04:12:00.000Z"><a href="/post/task-management-in-st2.html">12月 26 2012</a></time>
      
  </header>
    <div class="entry">
      
        <h2 id="说在前面">说在前面</h2>
<p>个人用过很多任务管理软件，虽然觉得像<a href="">Producteev</a>、<a href="">Evernote</a>之类的都可以比较方便地做一下任务管理，但是总是觉得没有一个软件可以很方便地集成我所想的功能。我希望可以在一个地方添加完成任务之后，在同一个地方执行任务，例如写一下Markdown什么的，这样我有时就不怎么想分开两个工作的地方了，可以在一个地方里面完成我的工作感觉还是挺方便的，于是当我看到PlainTask这插件之后就觉得这东西太有趣了，正好它也有个OmniFocus的主题，随便可以拿来用一下。</p>
<p>有的时候一个适合自己的GTD系统还是挺重要的，如果觉得自己没什么资金去买一个OmniFocus这样贵的软件（iOS上是一百多，Mac上的是三百多），而且OmniFocus这东西还不是跨平台的，如果要跨越Mac\iOS\Windows的话就只能用Producteev、Evernote、Doit.im等软件，那些都用得不是很顺。个人的工作环境中比较多的时间还是集中在PC前面，而且有时候也不希望多打开一个别的软件影响自己的工作，于是就觉得PlainTask这东西很适合我平常的工作。因为我平常也有很长时间需要打开Sublime Text这东西，在不影响自己的工作窗口切换的前提下可以使用这东西完成很多事情。这样的感觉很好，同时Sublime Text里面还可以集成Git，我再把文件夹放到网盘上，刚好可以做成一个的版本控制的GTD管理系统。虽然暂时只适用于PC之间的切换，并不是很适合使用在移动设备与PC之间的结合上，但是能够满足自己的需求就是好的东西。</p>
<p>跑题了，下面还是先说一下SublimeText和PlainTask这东西吧。</p>
<h2 id="Package_Control">Package Control</h2>
<h3 id="如何为Sublime_Text添加Package_Control？">如何为Sublime Text添加Package Control？</h3>
<p>Sublime Text的软件架构支持添加插件，但是我们仍然需要一个方便的管理工具来管理我们的Package，此时我们就需要使用<a href="http://wbond.net/sublime_packages/package_control" target="_blank">Package Control</a>。</p>
<h4 id="自动安装">自动安装</h4>
<p>按组合键Ctrl+`打开Console，然后添加下面的命令：</p>
<pre><code>import urllib2,os; pf=<span class="string">'Package Control.sublime-package'</span>; ipp=sublime.installed_packages_path(); os.makedirs(ipp) <span class="keyword">if</span> <span class="keyword">not</span> os.path.<span class="keyword">exists</span>(ipp) <span class="keyword">else</span> None; urllib2.install_opener(urllib2.build_opener(urllib2.ProxyHandler())); <span class="keyword">open</span>(os.path.<span class="keyword">join</span>(ipp,pf),<span class="string">'wb'</span>).<span class="keyword">write</span>(urllib2.urlopen(<span class="string">'http://sublime.wbond.net/'</span>+pf.replace(<span class="string">' '</span>,<span class="string">'%20'</span>)).<span class="keyword">read</span>()); <span class="keyword">print</span> <span class="string">'Please restart Sublime Text to finish installation'</span>
</code></pre><p>最新版本的Package Control已经完善了网络代理的功能，因此如果使用时的网络环境处于代理环境下，我们可以通过修改Package Control的配置文件来添加代理服务器地址。</p>
<h4 id="手动安装">手动安装</h4>
<ol>
<li>点击<em>Preference &gt; Browse Packages..</em></li>
<li>打开<em>Installed Packages</em>目录</li>
<li><a href="http://sublime.wbond.net/Package%20Control.sublime-package" target="_blank">点击下载</a>并将文件复制到’Installed Packages’目录下</li>
<li>重启Sublime Text</li>
</ol>
<h4 id="如何使用">如何使用</h4>
<p>Package Control安装完成之后，会在软件全局菜单（Ctrl+Shift+p）添加相应的菜单项，我们只需调出菜单，输入pci(for Package Control: Install Package)即可开始安装我们需要的插件。</p>
<p>除此之外还有另外的一些管理插件的命令可以调用，只需简单关注一下相应的菜单选项即可了解。</p>
<h2 id="PlainTask_and_PlainTaskOF(Theme)">PlainTask and PlainTaskOF(Theme)</h2>
<p>有了Package Control，我们就可以添加很多强大的插件，例如下面介绍的PlainTask，可以将Sublime Text变身成为一个方便的任务管理软件。</p>
<p>关于PlainTask，可以点击下面的链接看一下Lucifr上面的<a href="http://lucifr.com/2012/09/18/sublime-text-extension-plaintasks/" target="_blank">介绍文章</a>。看完之后大概会有一个了解，能不能适合自己的情况，这样就见仁见智了。</p>
<p>在Package Control中安装完PlainTask之后，可以在全局菜单中输入<em>Task</em>，查看相关的命令。另外一个比较好用的就是，PlainTask里面的快捷键可以帮助我们快捷添加、整理和归档任务列表。不过这个插件的缺点也很明显：没有提醒功能，没有快速采集内容的功能，基本只能靠自己整理。</p>
<p>另外，还有人专门做了一个OmniFocus的配色，很漂亮，可以在这个<a href="https://github.com/poritsky/PlainTasksOF" target="_blank">Github</a>里面下载tasks-OF.hidden-tmTheme，放置到PlainTask中，然后修改PlainTask的配置文件完成配色主题的修改。</p>
<p>而我做了一个简单的Snippet，方便我们在添加新的任务列表时创建新任务模板，<a href="http://d.pr/f/A55t" target="_blank">点击这里</a>下载。下载后放置到<em>Packages/User/</em>目录下，创建新的Task文件后输入task，轻敲tab即可创建一个列表。</p>
<p><img src="http://cdn.lucifr.com/uploads/PlainTasksOF.jpg" alt="PlainTaskOF"></p>
<h2 id="Write_Markdown_format_text_in_Sublime_Text">Write Markdown format text in Sublime Text</h2>
<p>在Sublime Text中书写Markdown其实也不是十分方便，不过鉴于Windows下面没有像OSX上的Mou那样方便漂亮的Markdown编辑App（有一个叫MarkdownPad的东西，不过没有Markdown语法高亮，感觉不大方便，虽然有很多快捷键辅助。），所以还是尽量用一下Sublime Text吧。</p>
<p>在ST中编辑Markdown有几个比较好的插件，在Package Control中可以下载：</p>
<ul>
<li>SmartMarkdown - 提供创建简单表格、智能列表的功能</li>
<li>MarkdownBuild - 将Markdown转换成HTML文件</li>
<li>Markdown to Clipboard - 将Markdown转换成HTML代码，用于发布文章</li>
<li>MarkdownEditing - 与SmartMarkdown类似的插件，但暂时不兼容Windows，有兴趣可以在<a href="https://github.com/ttscoff/MarkdownEditing" target="_blank">Github</a>上Fork一下</li>
</ul>
<p>不过MarkdownEditing这个插件提供了一个比较漂亮的Markdown语法高亮主题，可以点击<a href="http://d.pr/f/MQEy" target="_blank">这里</a>下载，解压放置到<em>Package/User</em>目录下即可。</p>
<h2 id="Git_version_control_and_SkyDrive_sync">Git version control and SkyDrive sync</h2>
<p>由于我的GTD系统都使用纯文本配置，因此可以考虑给它添加一个版本控制和同步功能。同步软件有很多，这个我就不多说了，你喜欢用Dropbox也好，用Google Drive也好，用iCloud也好，用SkyDrive也好，只要你可以达到同步的效果就可以了。当然，有的同步软件还提供了版本控制的功能，以前用过一个叫Oxygen的软件就是这样，不过同步速度太慢了，比SkyDrive还慢，因此不考虑它了。如果考虑到一个比较适合国内的情况的话，可以用一下金山快盘、551之类的，也还算可以。</p>
<p>在同步软件里面按你需要的分类建立相应的文件夹就可以了，你也可以把一个文件夹看作一个项目，在文件夹里面按照项目的需要建立自己的任务列表文件，然后在Sublime Text中添加相应的文件夹，就可以享受ST那快速切换文件的功能，很好很强大。</p>
<p>另外，如果需要添加版本控制系统，可以直接使用现在很流行的Git。Windows下面安装一个也不难，只需要去下载一个Git Extensions就可以完成整个安装流程了（也可以装一个TortoiseGit，不过感觉速度没Git Extensions那么快）。如果要在ST中集成Git功能的话，可以在Package Control中添加<em>Git</em>和<em>SideBarGit</em>两个插件，前者是将系统集成的Git命令添加到全局命令菜单中，后者则是强化侧边栏的右键菜单，看你怎么用了。</p>
<p>在我们的文件夹里面建立一个Repo就可以了，然后就可以开始用我们的版本控制系统了。这个Repo一般不大，因为我们存放的都只是一些纯文本文件，用SkyDrive来同步也很快，每次更新也就几KB的事情，方便快捷。</p>
<h2 id="我说完了">我说完了</h2>
<p>说到这里，有人会觉得，这不是瞎扯吗？其实我也觉得这种任务管理的方法很扯淡，不过还是那句：适合自己的东西就是最好的。你喜欢吗？反正我觉得这方法挺装B的，虽然用着可能会让别人觉得你很2。</p>

	 
	     <p style="margin:20px 0; color:#9f9f9f; font-size:12px;">
<span>Posted by <a style="color:#9f9f9f;" href="http://weibo.com/newdings/"><strong>@cmm是muffinman_</strong></a> - 12月 26 2012</span><br />
<span style="line-height:13px;">如需转载，请注明： 本文来自 <a style="color:#9f9f9f;" href="http://blog.edi-c.com"><strong>@chaoming.edc blog</strong></a></span>
</p>
       	 
      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  
<article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
  <header>
      
      
  
    <h1 class="title"><a href="/post/my-notes-about-how-browsers-work.html">《浏览器工作原理》学习笔记</a></h1>
  

      <time datetime="2012-12-26T00:00:00.000Z"><a href="/post/my-notes-about-how-browsers-work.html">12月 26 2012</a></time>
      
  </header>
    <div class="entry">
      
        <p>学习内容来自于HTML5Rocks网站，<a href="http://www.html5rocks.com/zh/tutorials/internals/howbrowserswork/" target="_blank">《浏览器的工作原理：现代浏览器幕后揭秘》</a>，简单输入输出一下读后笔记。</p>
<h2 id="解析">解析</h2>
<p>解析文档是指将文档转化成有意义的结构，也就是可让代码理解和使用的结构。</p>
<p>解析得到的结果通常是代表了文档结构的节点树，它称作解析树或者语法树。</p>
<h3 id="HTML解析">HTML解析</h3>
<h4 id="HTML语法定义">HTML语法定义</h4>
<p>常规解析器都不适用于HTML，HTML并不能很容易地用解析器所需的的上下文无关的语法来定义。</p>
<p>有一种可以定义HTML的正规格式：DTD（Document Type Definition，文档类型定义），但它还是与上下文无关的语法。原因是HTML的语法处理很宽容，允许省略某些隐匿添加的标记，有时还能省略一些起始或者结束标记等等。</p>
<h4 id="DOM">DOM</h4>
<p>解析器输出的“解析树”是由DOM元素与属性节点构成的树结构。DOM是文档对象模型（Document Object Model）的缩写。它是HTML文档的对象表示，同时也是外部内容与HTML元素之间的接口。</p>
<p><a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/parsing.html" target="_blank">HTML5规范详细地打描述了解析算法</a>。此算法由两个阶段组成：标记化和树构建。</p>
<p><img src="http://1-ps.googleusercontent.com/x/s.html5rocks-hrd.appspot.com/www.html5rocks.com/zh/tutorials/internals/howbrowserswork/308x400ximage017.png.pagespeed.ic.BGy2jYmiQr.jpg" alt="HTML解析流程" title="HTML5规范中的解析流程"></p>
<h4 id="解析算法">解析算法</h4>
<p>我们在之前章节已经说过，HTML 无法用常规的自上而下或自下而上的解析器进行解析。</p>
<p>原因在于：</p>
<ul>
<li>语言的宽容本质。</li>
<li>浏览器历来对一些常见的无效 HTML 用法采取包容态度。</li>
<li>解析过程需要不断地反复。源内容在解析过程中通常不会改变，但是在 HTML 中，脚本标记如果包含 document.write，就会添加额外的标记，这样解析过程实际上就更改了输入内容。</li>
</ul>
<p>HTML的解析算法由两个阶段组成：标记化和树构建</p>
<h5 id="标记化算法">标记化算法</h5>
<pre><code><span class="tag">&lt;<span class="title">html</span>&gt;</span>
    <span class="tag">&lt;<span class="title">body</span>&gt;</span>
        Hello world
    <span class="tag">&lt;/<span class="title">body</span>&gt;</span>
<span class="tag">&lt;/<span class="title">html</span>&gt;</span>
</code></pre><p>初始状态是数据状态，当遇到字符<code>&lt;</code>时，状态更改为“标记打开状态”。接收一个<code>a-z</code>字符会创建“起始标记”，状态更改为“标记名称状态”。这个状态会一直保持到接收<code>&gt;</code>。在此期间接收的每个字符都会附加到新的标记名称上。在本例中，我们创建的标记是<code>html</code>标记。</p>
<p>遇到<code>&gt;</code>标记时，会发送当前的标记，状态发回“数据状态”。<code>&lt;body&gt;</code>标记也会进行同样的处理。目前<code>html</code>和<code>body</code>标记均已发出。现在我们回到“数据状态”。接收到<code>Hello world</code>中的<code>H</code>字符时，将创建并发送字符标记，直到接收<code>&lt;/body&gt;</code>中的<code>&lt;</code>。我们将为<code>Hello world</code>中的每个字符都发送一个字符标记。</p>
<p>现在我们回到“标记打开状态”。接收下一个输入字符<code>/</code>时，会创建<code>end tag token</code>并改为“标记名称状态”。我们会再次保持这个状态，直到接收<code>&gt;</code>。然后将发送新的标记，并回到“数据状态”。<code>&lt;/html&gt;</code>输入也会进行同样的处理。</p>
<p><img src="http://www.html5rocks.com/zh/tutorials/internals/howbrowserswork/image019.png" alt="标记化算法"></p>
<h5 id="树构建算法">树构建算法</h5>
<p>树构建阶段的输入是一个来自标记化阶段的标记序列。第一个模式是<strong>“initial mode”</strong>。接收HTML标记后转为<strong>“before html”</strong>模式，并在这个模式下重新处理此标记。这样会创建一个HTMLHtmlElement元素，并奖其附加到Document根对象上。</p>
<p>后续状态：</p>
<ol>
<li><strong>“before head”</strong>，接收“body”标记，创建HTMLHeadElement，添加到树中。</li>
<li><strong>“in head”</strong>模式，然后转入<strong>“after head”</strong>模式。创建并插入HTMLBodyElement，然后模式转变为<strong>“body”</strong>。</li>
<li>接收body中的字符串，然后创建并插入<strong>“text”</strong>节点，其他字符也将附加到该节点</li>
<li>接收body结束标记，触发<strong>after body</strong>模式，接收剩余的HTML结束标记。解析过程结束。</li>
</ol>
<p><img src="http://www.html5rocks.com/zh/tutorials/internals/howbrowserswork/image022.gif" alt="树构建算法"></p>
<h4 id="解析结束后的操作">解析结束后的操作</h4>
<p>文档标记为交互状态，可以解析处于“deferred”模式的脚本。</p>
<h4 id="浏览器容错机制">浏览器容错机制</h4>
<p>浏览器会纠正任何无效内容，然后继续工作。Webkit在HTML解析器类的形状注释中对此做了相应的概括：</p>
<p>解析器对标记化输入内容进行解析，以构建文档树。如果文档的格式正确，就直接进行解析。遗憾的是，我们不得不处理很多格式错误的 HTML 文档，所以解析器必须具备一定的容错性。</p>
<p>我们至少要能够处理以下错误情况：</p>
<ol>
<li>明显不能在某些外部标记中添加的元素。在此情况下，我们应该关闭所有标记，直到出现禁止添加的元素，然后再加入该元素。</li>
<li>我们不能直接添加的元素。这很可能是网页作者忘记添加了其中的一些标记（或者其中的标记是可选的）。这些标签可能包括：HTML HEAD BODY TBODY TR TD LI（还有遗漏的吗？）。</li>
<li>向 inline 元素内添加 block 元素。关闭所有 inline 元素，直到出现下一个较高级的 block 元素。</li>
<li>如果这样仍然无效，可关闭所有元素，直到可以添加元素为止，或者忽略该标记。</li>
</ol>
<h3 id="CSS解析">CSS解析</h3>
<p>词法语法（词汇）是针对各个标记用正则表达式定义的：</p>
<pre><code>comment   \/\<span class="emphasis">*[^*</span>]<span class="emphasis">*\*</span>+([<span class="link_label">^/*</span>][<span class="link_reference">^*</span>]<span class="emphasis">*\*</span>+)*\/
num   [0-9]+|[0-9]*"."[0-9]+
nonascii  [\200-\377]
nmstart   [_a-z]|{nonascii}|{escape}
nmchar    [_a-z0-9-]|{nonascii}|{escape}
name    {nmchar}+
ident   {nmstart}{nmchar}*
</code></pre><p>语法是采用BNF格式描述的。<a href="http://www.douban.com/group/topic/7580567/" target="_blank">什么是BNF格式</a>？豆瓣里面有解释。</p>
<h4 id="Webkit_CSS_解析器">Webkit CSS 解析器</h4>
<p><img src="http://1-ps.googleusercontent.com/x/s.html5rocks-hrd.appspot.com/www.html5rocks.com/zh/tutorials/internals/howbrowserswork/image023.png.pagespeed.ce.uVfINk36yE.png" alt="Webkit CSS解析"></p>
<h2 id="呈现树构建（Render_Tree）">呈现树构建（Render Tree）</h2>
<p>在 DOM 树构建的同时，浏览器还会构建另一个树结构：呈现树。这是由可视化元素按照其显示顺序而组成的树，也是文档的可视化表示。它的作用是让您按照正确的顺序绘制内容。</p>
<p>在Webkit中，如果一个元素需要创建特殊的呈现器，就会替换<code>createRenderer</code>方法。呈现器所指向的样式对象中包含了一些和几何无关的信息。</p>
<h3 id="呈现树与DOM树的关系">呈现树与DOM树的关系</h3>
<p><img src="http://www.html5rocks.com/zh/tutorials/internals/howbrowserswork/image025.png" alt="呈现树与DOM树的关系"></p>
<h3 id="样式计算">样式计算</h3>
<h4 id="共享样式数据">共享样式数据</h4>
<p>Webkit 节点会引用样式对象 (RenderStyle)。这些对象在某些情况下可以由不同节点共享。这些节点是同级关系，并且：</p>
<ul>
<li>这些元素必须处于相同的鼠标状态（例如，不允许其中一个是“:hover”状态，而另一个不是）</li>
<li>任何元素都没有 ID</li>
<li>标记名称应匹配</li>
<li>类属性应匹配</li>
<li>映射属性的集合必须是完全相同的</li>
<li>链接状态必须匹配</li>
<li>焦点状态必须匹配</li>
<li>任何元素都不应受属性选择器的影响，这里所说的“影响”是指在选择器中的任何位置有任何使用了属性选择器的选择器匹配</li>
<li>元素中不能有任何 inline 样式属性</li>
<li>不能使用任何同级选择器。WebCore 在遇到任何同级选择器时，只会引发一个全局开关，并停用整个文档的样式共享（如果存在）。这包括 + 选择器以及 :first-child 和 :last-child 等选择器。</li>
</ul>

	 
	     <p style="margin:20px 0; color:#9f9f9f; font-size:12px;">
<span>Posted by <a style="color:#9f9f9f;" href="http://weibo.com/newdings/"><strong>@cmm是muffinman_</strong></a> - 12月 26 2012</span><br />
<span style="line-height:13px;">如需转载，请注明： 本文来自 <a style="color:#9f9f9f;" href="http://blog.edi-c.com"><strong>@chaoming.edc blog</strong></a></span>
</p>
       	 
      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  
<article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
  <header>
      
      
  
    <h1 class="title"><a href="/post/mod-mdediting-for-win.html">在Windows下面使用MarkdownEditing</a></h1>
  

      <time datetime="2012-12-25T03:54:00.000Z"><a href="/post/mod-mdediting-for-win.html">12月 25 2012</a></time>
      
  </header>
    <div class="entry">
      
        <p>MarkdownEditing是<a href="https://github.com/ttscoff" target="_blank">ttscoff</a>编写的一个Sublime Text 2插件，用于在ST2中进行Markdown文件的编写。插件中添加一系列的快捷键和自动处理，方便大家在ST2中进行MD的编写。虽然暂时还比不上专门用来处理Markdown编写的MarkdownPad之类的软件，但对习惯使用ST2的同学们来说有这么一个插件还是很好的。</p>
<p>MarkdownEditing插件所在的Github：<a href="https://github.com/ttscoff/MarkdownEditing" target="_blank">戳我进入</a>。</p>
<p>由于作者暂时只添加了为Mac OS X的快捷键绑定，同时提交到Package Control里面的版本安装的时候提示不支持Windows（实际上是支持的）。所以我们只好直接到Github里面把整个Repo拉下来吧。</p>
<p>下面所说的配置内容可以<a href="http://d.pr/f/TEr6" target="_blank">点击此处下载</a>。</p>
<h2 id="安装">安装</h2>
<ol>
<li><p>通过 <code>Preferences -&gt; Browse Packages...</code> 打开Packages目录，将 <code>MarkdownEditing</code> 的Repo复制到Packages目录下面。</p>
<pre><code> <span class="constant">Windows</span><span class="symbol">:</span> git clone <span class="symbol">https:</span>/<span class="regexp">/github.com/ttscoff</span><span class="regexp">/MarkdownEditing.git %APPDATA%\Sublime/</span> <span class="constant">Text</span>/ <span class="number">2</span>/\<span class="constant">MarkdownEditing</span>    
</code></pre></li>
<li><p>重启ST2完成安装。</p>
</li>
</ol>
<p>初次启动的时候可能会提示错误，原因是Windows下面默认没有安装<code>Menlo</code>这个字体，所以我们需要打开<code>Markdown.sublime-settings</code>和<code>MultiMarkdown.sublime-settings</code>这两个文件，将<code>font-face</code>选项注释掉。</p>
<pre><code>// <span class="string">"font_face"</span>: <span class="string">"Menlo"</span>,
</code></pre><p>如此操作则可以将字体设置还原为ST2默认的设置。另外，这两个设置文件中还有不少选项可以进行修改，下面的设置可以自行修改测试。插件中默认提供了两个不同的色彩文件，修改<code>color_scheme</code>可以切换Markdown的语法高亮格式。</p>
<pre><code>{
    <span class="string">"extensions"</span><span class="symbol">:</span>
    [
        <span class="string">"md"</span>,
        <span class="string">"mdown"</span>,
        <span class="string">"mmd"</span>,
        <span class="string">"txt"</span>
    ],
    <span class="string">"trim_trailing_white_space_on_save"</span><span class="symbol">:</span> <span class="keyword">false</span>,
    <span class="regexp">//</span> <span class="string">"font_face"</span><span class="symbol">:</span> <span class="string">"Menlo"</span>,
    <span class="regexp">//</span> <span class="string">"font_size"</span><span class="symbol">:</span> <span class="number">15</span>,
    <span class="string">"font_options"</span><span class="symbol">:</span> [ <span class="string">"subpixel_antialias"</span>, <span class="string">"no_round"</span>, <span class="string">"directwrite"</span>],
    <span class="string">"color_scheme"</span><span class="symbol">:</span> <span class="string">"Packages/MarkdownEditing/MarkdownEditor.tmTheme"</span>,
    <span class="regexp">//</span> <span class="string">"color_scheme"</span><span class="symbol">:</span> <span class="string">"Packages/MarkdownEditing/MarkdownEditor-Focus.tmTheme"</span>,
    <span class="string">"translate_tabs_to_spaces"</span><span class="symbol">:</span> <span class="keyword">true</span>,
    <span class="string">"word_wrap"</span><span class="symbol">:</span> <span class="keyword">true</span>,
    <span class="string">"wrap_width"</span><span class="symbol">:</span> <span class="number">70</span>,
    <span class="string">"draw_centered"</span><span class="symbol">:</span> <span class="keyword">true</span>,
    <span class="string">"auto_match_enabled"</span><span class="symbol">:</span> <span class="keyword">true</span>,
    <span class="string">"line_padding_top"</span><span class="symbol">:</span> <span class="number">5</span>,
    <span class="string">"caret_style"</span><span class="symbol">:</span> <span class="string">"wide"</span>,
    <span class="string">"highlight_line"</span><span class="symbol">:</span> <span class="keyword">true</span>,
    <span class="regexp">//</span> add trailing <span class="comment">#'s to headlines</span>
    <span class="string">"match_header_hashes"</span><span class="symbol">:</span> <span class="keyword">false</span>
}
</code></pre><h2 id="MarkdownEditing的功能">MarkdownEditing的功能</h2>
<p>下面将列出MarkdownEditing提供的功能。</p>
<h3 id="语法增强类">语法增强类</h3>
<ul>
<li>星号*、下划线_和反引号`自动配对</li>
<li>如输入的自动配对符号中间内容为空时，删除第一个符号时将直接删除整对符号</li>
<li>如输入自动配对符号后直接输入空格，则自动删除后面自动配对的符号</li>
<li>波浪线 <code>~</code> 包围的内容将转换为HTML中的 <code>&lt;del&gt;&lt;/del&gt;</code> 标签</li>
<li>当创建了列表后，回车将自动添加一个列表项。如列表项为空，再次回车将删除该列表项</li>
</ul>
<h3 id="快捷键类（根据自行修改的Default_(Windows)-sublime-keymap列出）">快捷键类（根据自行修改的<code>Default (Windows).sublime-keymap</code>列出）</h3>
<p>MarkdownEditing在Windows下面的快捷键需要自行根据<code>Default (OSX).sublime-keymap</code>中的内容进行修改，添加到<code>Default (Windows).sublime-keymap</code>中。</p>
<ul>
<li><code>Ctrl+Win+V</code> 选中的内容将自动转换为行内式超链接，链接到剪贴板中的内容</li>
<li><code>Ctrl+Win+R</code> 选中的内容将自动转换为参考式超链接，链接到剪贴板中的内容</li>
<li><code>Ctrl+Alt+R</code> 弹出提示框插入一个参考式超链接，在提示框中输入链接内容和定义参考ID[^3]</li>
<li><code>Ctrl+Win+K</code> 插入一个标准的行内式超链接</li>
<li><code>Win+Shift+K</code> 插入一个标准的行内式图片（此快捷键可能与输入法有冲突）</li>
<li><code>Ctrl+1</code> 至 <code>Ctrl+6</code> 插入一级至六级标题</li>
<li><code>Win+Alt+i</code> 选中的内容转换为<em>斜体</em></li>
<li><code>Win+Alt+b</code> 选中的内容转换为<strong>粗体</strong>[^1]</li>
<li><code>Ctrl+Shift+6</code> 自动插入一个脚注，并跳转到该脚注的定义中。</li>
<li><code>Alt+Shift+F</code> 查找没有定义的脚注并自动添加其定义链接</li>
<li><code>Alt+Shift+G</code> 查找没有定义的参考式超链接并自动添加其定义链接</li>
<li><code>Ctrl+Alt+S</code> 脚注排序</li>
<li><code>Ctrl+Shift+.</code> 缩进当前内容</li>
<li><code>Ctrl+Shift+,</code> 提前当前内容</li>
</ul>

	 
	     <p style="margin:20px 0; color:#9f9f9f; font-size:12px;">
<span>Posted by <a style="color:#9f9f9f;" href="http://weibo.com/newdings/"><strong>@cmm是muffinman_</strong></a> - 12月 25 2012</span><br />
<span style="line-height:13px;">如需转载，请注明： 本文来自 <a style="color:#9f9f9f;" href="http://blog.edi-c.com"><strong>@chaoming.edc blog</strong></a></span>
</p>
       	 
      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>





<nav id="pagination">
  
    <a href="/page/4/" class="alignleft prev">上一页</a>
  
  
</nav></div>
    </div>
    <div class="tabbar" onload="divideTabBar()">
	
      <div class="tabbaritem"><a class="next" href="/">Home</a></div>
    
      <div class="tabbaritem"><a class="next" href="/archives/">Archives</a></div>
    
      <div class="tabbaritem"><a class="next" href="/about/">About</a></div>
    
      <div class="tabbaritem"><a class="next" href="/atom.xml">Subscribe</a></div>
    
</div>


  </div>

  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  <script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.0.min.js"></script>
</body>
</html>