<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>第 3 页 | @chaoming.edc blog</title>
  <meta name="author" content="chaoming.edc|blastmann">
  
  <meta name="description" content="track my learning">
  
  
  <meta name="keywords" content="windowsphone,windows,xaml,developer,iOS,OSX,productive">
  
  

  

  <meta property="og:site_name" content="@chaoming.edc blog"/>
  <meta name="copyright" content="@chaoming.edc blog"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
    <meta property="og:image" content="undefined"/>
  
   <meta name="google-site-verification" content="nTpmJEYYJgba5eVrpd_dfj1W_Ayr-NjZ1vFvhi5aqzI" />
   <meta name="baidu-site-verification" content="QO84kHVH0w" />
   <link rel="apple-touch-icon" href="/icon.png" />
   <link rel="shortcut icon" href="/favicon.png" >
   <link rel="alternate" href="http://blog.edi-c.com/atom.xml" title="@chaoming.edc blog" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
</head>


<body>
  <div id="content" class="inner">
    <aside id="sidebar" class="alignleft">
      <div class="navigationBar">
        <a href="/">@chaoming.edc blog</a>
      </div>
    	
  <nav class="widget" id="menu">
	<ul>
    
      <li class="cell"><a class="next" href="/">Home</a><li>
    
      <li class="cell"><a class="next" href="/archives/">Archives</a><li>
    
      <li class="cell"><a class="next" href="/about/">About</a><li>
    
      <li class="cell"><a class="next" href="/atom.xml">Subscribe</a><li>
    
    </ul>
</nav>

  <div class="widget weibo">
<iframe width="100%" height="100" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=110&fansRow=2&ptype=1&speed=0&skin=1&isTitle=1&noborder=0&isWeibo=0&isFans=0&uid=newdings&verifier=78e1ee4d&colors=ffffff,ffffff,999,000,ecfbfd&dpc=1"></iframe>
</div>

  

  
<div class="widget tagcloud">
  <h3 class="title">标签云</h3>
  <div class="entry">
    <a href="/tags/IE/" style="font-size: 10.00px;">IE</a><a href="/tags/Swift/" style="font-size: 10.00px;">Swift</a><a href="/tags/WPF/" style="font-size: 10.00px;">WPF</a><a href="/tags/alfred/" style="font-size: 10.00px;">alfred</a><a href="/tags/aspnet/" style="font-size: 10.00px;">aspnet</a><a href="/tags/browser/" style="font-size: 10.00px;">browser</a><a href="/tags/csharp/" style="font-size: 10.00px;">csharp</a><a href="/tags/css3/" style="font-size: 12.50px;">css3</a><a href="/tags/dev/" style="font-size: 10.00px;">dev</a><a href="/tags/diary/" style="font-size: 10.00px;">diary</a><a href="/tags/directx/" style="font-size: 10.00px;">directx</a><a href="/tags/fiddler/" style="font-size: 12.50px;">fiddler</a><a href="/tags/google/" style="font-size: 10.00px;">google</a><a href="/tags/iOS/" style="font-size: 10.00px;">iOS</a><a href="/tags/ie/" style="font-size: 10.00px;">ie</a><a href="/tags/ie11/" style="font-size: 10.00px;">ie11</a><a href="/tags/javascript/" style="font-size: 10.00px;">javascript</a><a href="/tags/js/" style="font-size: 10.00px;">js</a><a href="/tags/mac/" style="font-size: 10.00px;">mac</a><a href="/tags/markdown/" style="font-size: 10.00px;">markdown</a><a href="/tags/mvc/" style="font-size: 10.00px;">mvc</a><a href="/tags/note/" style="font-size: 10.00px;">note</a><a href="/tags/notes/" style="font-size: 17.50px;">notes</a><a href="/tags/plugin/" style="font-size: 10.00px;">plugin</a><a href="/tags/productivity/" style="font-size: 10.00px;">productivity</a><a href="/tags/programming/" style="font-size: 12.50px;">programming</a><a href="/tags/python/" style="font-size: 10.00px;">python</a><a href="/tags/reflow/" style="font-size: 10.00px;">reflow</a><a href="/tags/sqlite/" style="font-size: 10.00px;">sqlite</a><a href="/tags/st2/" style="font-size: 17.50px;">st2</a><a href="/tags/summaries/" style="font-size: 10.00px;">summaries</a><a href="/tags/system/" style="font-size: 10.00px;">system</a><a href="/tags/vim/" style="font-size: 10.00px;">vim</a><a href="/tags/vs2012/" style="font-size: 10.00px;">vs2012</a><a href="/tags/vs2013/" style="font-size: 10.00px;">vs2013</a><a href="/tags/web/" style="font-size: 10.00px;">web</a><a href="/tags/webdev/" style="font-size: 20.00px;">webdev</a><a href="/tags/webview/" style="font-size: 12.50px;">webview</a><a href="/tags/windows/" style="font-size: 15.00px;">windows</a><a href="/tags/winrt/" style="font-size: 17.50px;">winrt</a>
  </div>
</div>


    	<footer id="footer" class="inner"><div class="copyright">
  
  &copy; 2014 chaoming.edc|blastmann
  
</div>



<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-51731334-1', 'edi-c.com');
  ga('send', 'pageview');

</script></footer>
    </aside>


    <div id="hidden-navigationBar" class="navigationBar">
      <a href="/">@chaoming.edc blog</a>
    </div>
    <div id="main-col" class="alignright">
    <div id="wrapper">
      
  
<article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
  <header>
      
      
  
    <h1 class="title"><a href="/post/wp8-ie10-font-face-support.html">WP8 上的 IE10 对 @font-face 属性的支持程度</a></h1>
  

      <time datetime="2013-07-03T09:19:00.000Z"><a href="/post/wp8-ie10-font-face-support.html">7月 3 2013</a></time>
      
  </header>
    <div class="entry">
      
        <p>现在的前端都流行把一些小图标转换成字体，然后利用 <code>@font-face</code> 这个 CSS 属性来定义一个页面专有的字体，从而达到把小图标转换成字符显示的效果。这样做除了可以省流量，图标的显示效果也很好，放大缩小都不怎么会影响效果，确实是一个不错的的手段。</p>
<p>关于 CSS3 中的 <code>@font-face</code> 属性，可以参阅<a href="http://www.w3cplus.com/content/css3-font-face" target="_blank">这篇文章</a>，里面有很详细的属性应用介绍。</p>
<p>但是，在 PC 的 IE10 下面尝试嵌入 ttf 格式的字体时，会提示这样的信息：</p>
<blockquote>
<p>CSS3114: @font-face 未能完成 OpenType 嵌入权限检查。权限必须是可安装的。 </p>
</blockquote>
<p>原因可能是自制的 ttf 格式没有正确的安装权限造成的。因此，有必要对 ttf 格式进行转换，PC 上的 IE10 支持多种字体格式，如 Embedded-Opentype(eot)、Web Open Font Format(woff)、TrueType(ttf) 和 Scalable Vector Graphics(SVG)，具体可以参考上面文章。</p>
<p>但 WP8 上的 IE10 对字体格式的要求更严格，转换成 IE 专用的 eot 格式之后还是不能正常显示。于是又查了一下资料，发现还是能用的（<a href="http://stackoverflow.com/questions/15819717/font-awesome-not-displayed-on-windows-phone-8" target="_blank">点击这里</a>）。于是把格式换成 woff 之后就没有问题了，ttf 转 woff 的工具在网上都有，可以在线转换（<a href="http://everythingfonts.com/" target="_blank">点击这里有一个网站可以试试</a>）。</p>
<p>PS：最好还是在引用的 url 后面声明一下字体的格式。</p>
<pre><code><span class="at_rule">@<span class="keyword">font-face</span></span> <span class="rules">{
    <span class="rule"><span class="attribute">font-family</span>:<span class="value"> <span class="string">'Test'</span></span></span>;
    <span class="rule"><span class="attribute">src</span>:<span class="value"><span class="function">url(font/font.woff)</span> <span class="function">format(<span class="string">'woff'</span>)</span></span></span>;
<span class="rule">}</span></span>
</code></pre>
	 
	     <p style="margin:20px 0; color:#9f9f9f; font-size:12px;">
<span>Posted by <a style="color:#9f9f9f;" href="http://weibo.com/newdings/"><strong>@cmm是muffinman_</strong></a> - 7月 3 2013</span><br />
<span style="line-height:13px;">如需转载，请注明： 本文来自 <a style="color:#9f9f9f;" href="http://blog.edi-c.com"><strong>@chaoming.edc blog</strong></a></span>
</p>
       	 
      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  
<article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
  <header>
      
      
  
    <h1 class="title"><a href="/post/a-brief-about-submitting-a-package-to-package-control.html">Package Control 插件发布流程</a></h1>
  

      <time datetime="2013-07-02T06:57:00.000Z"><a href="/post/a-brief-about-submitting-a-package-to-package-control.html">7月 2 2013</a></time>
      
  </header>
    <div class="entry">
      
        <p>Package Control 是 Sublime Text 下的一个插件管理工具，可以很方便地管理需要安装的 Sublime Text 插件。现在已经有不少开发者在上面发布了<a href="http://blog.edi-c.com/post/my-st2-tips" target="_blank">各式各样的插件</a>，对 Sublime Text 本身的扩展还是很有用的。Sublime Text 本身采用了 Python 作为插件编写的语言，因此在插件开发过程中也十分的轻松，可以实时调试插件的效果。</p>
<p>前两天尝试在上面发布了自己的插件 <a href="https://github.com/blastmann/ScriptOgrSender" target="_blank">ScriptOgrSender</a>，提交过程也十分简单，下面简单整理一下：</p>
<ol>
<li><strong>在 <a href="https://github.com/" target="_blank">GitHub</a> 或 <a href="https://bitbucket.org/" target="_blank">BitBucket</a> 中托管你的插件代码。</strong>单个 Repo 只能包含一个插件，同时需要将插件脚本放置于 Repo 的根目录下。</li>
<li><strong>请勿在你的 Repo 中包含 <code>package-metadata.json</code> 文件。</strong>这个文件会在每台客户端中自行创建，用于跟踪安装包的版本。如需对你的插件包描述进行修改，可以在你的 GitHub 和 BitBucket 仓库中修改相应的描述字段。</li>
<li><strong>Fork the Package Control Channel:  </strong><br>GitHub: <a href="https://github.com/wbond/package_control_channel" target="_blank">https://github.com/wbond/package_control_channel</a><br>BitBucket: <a href="https://bitbucket.org/wbond/package_control_channel" target="_blank">https://bitbucket.org/wbond/package_control_channel</a></li>
<li><p><strong>在 <code>repositories.json</code> 文件中添加你的 repo URL。</strong>如果你的插件不是在三个平台（OS X, Windows 和 Linux）下面通用的话，请参阅「<a href="http://wbond.net/sublime_packages/package_control/package_developers#Custom_packages_json_on_GitHub" target="_blank">在 GitHub 上自定义 packages.json</a>」一节。</p>
<p>添加的 URL 格式请参考下面几种形式：</p>
<ul>
<li><a href="https://github.com/user/repo" target="_blank">https://github.com/user/repo</a></li>
<li><a href="https://github.com/user/repo/tree/branch" target="_blank">https://github.com/user/repo/tree/branch</a></li>
<li><a href="https://bitbucket.org/user/repo" target="_blank">https://bitbucket.org/user/repo</a></li>
</ul>
<p>添加你的 URL 时请注意按字母顺序排列添加，以防产生冲突。同时请注意不要在 URL 尾部添加 <code>.git</code>。</p>
</li>
<li><p><strong>在 <code>package_name_map</code> 中添加自己的插件包名字的映射（可选）。</strong>注意，如果你没有自定义 <code>packages.json</code> 文件而且不想用你的 GitHub Repo 的 URL permalink 作为你的插件名字的话，请务必将你想要的插件名字添加到此字段中。如插件托管在 BitBucket 的话，将使用 Repo 的名字，不需要再另外添加映射。</p>
<p><strong>如果你的插件名中包含 <em>Sublime</em> 这个字眼的话，请考虑映射另外一个名字（去除 <em>Sublime</em>）以减少信息噪音。</strong>这里的映射会在 Community Package 列表、ST 中的安装列表和安装后的文件夹名字中生效。</p>
</li>
<li><p><strong>修改时请确保你的修改不会影响其它代码。</strong></p>
</li>
<li><strong>发送一个 Pull 请求。</strong></li>
</ol>
<p>整个提交过程十分简单，我也是第一次在 GitHub 上对其它代码仓库进行代码提交（其实就加了那么一行），提交时还没有注意到添加的 URL 必须按字母顺序排列，结果被打回来再修改了一次。</p>
<p>之前做的插件在跨平台方面也没有什么问题，所以整个代码提交过程也十分轻松，不用特别去制件一个专属的 JSON 文件。只要加入 Package Control 之后，就可以继续在自己的 Repo 中进行代码更新。Package Control 会自动拉取新的代码更新插件包，过程大概需要一两个小时吧。</p>
<p>至于怎么去针对 ST2 和 ST3 进行插件发布呢？这个问题还没有研究清楚，过两天看看怎么处理吧。</p>

	 
	     <p style="margin:20px 0; color:#9f9f9f; font-size:12px;">
<span>Posted by <a style="color:#9f9f9f;" href="http://weibo.com/newdings/"><strong>@cmm是muffinman_</strong></a> - 7月 2 2013</span><br />
<span style="line-height:13px;">如需转载，请注明： 本文来自 <a style="color:#9f9f9f;" href="http://blog.edi-c.com"><strong>@chaoming.edc blog</strong></a></span>
</p>
       	 
      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  
<article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
  <header>
      
      
  
    <h1 class="title"><a href="/post/external-notify-cant-use-with-uglifyjs-compressor.html">window.external.notify() 与 UglifyJS 压缩优化冲突</a></h1>
  

      <time datetime="2013-06-18T11:14:00.000Z"><a href="/post/external-notify-cant-use-with-uglifyjs-compressor.html">6月 18 2013</a></time>
      
  </header>
    <div class="entry">
      
        <p>近期研究了一下 UglifyJs 对 JS 代码的压缩，发现 UglifyJS 压缩后，无法调用 <code>window.external.notify()</code> 方法，JS 代码如下：</p>
<pre><code><span class="function"><span class="keyword">function</span> <span class="title">MyNotify</span> <span class="params">()</span> {</span>
    <span class="keyword">try</span>{
        alert(<span class="string">"Notify"</span>);
        window.external.notify(<span class="string">"Notify"</span>);
    } <span class="keyword">catch</span> (e){
        alert(e.message);
    }
}

<span class="function"><span class="keyword">function</span> <span class="title">MyNotifyCompressed</span><span class="params">()</span>{</span>
    <span class="keyword">try</span> {
        alert(<span class="string">"Notify"</span>), window.external.notify(<span class="string">"Notify"</span>);
    } <span class="keyword">catch</span> (e) {
        alert(e.message);
    }
}
</code></pre><p>UglifyJS 在压缩 JS 代码时，压缩选项（-c)中有这么一个参数：</p>
<blockquote>
<p>sequences — join consecutive simple statements using the comma operator</p>
</blockquote>
<p>此选项默认是开启状态。当此选项处于开启状态时，UglifyJS 将会把多行代码压缩为一行并使用逗号进行分隔。压缩后，利用 <code>InvokeScript()</code> 调用 <code>MyNotifyCompressed()</code> 函数，系统将提示：</p>
<blockquote>
<p>Object doesn’t support this action</p>
</blockquote>
<p><code>window.external.notify()</code> 方法无法正常使用，则在程序中的一些逻辑无法正常处理。到底为什么无法调用这个方法呢？暂时也不大明白，可能是作用域出现问题了。</p>
<p>如果使用逗号相连导致不能直接调用 <code>window.external.notify()</code> 的话，那还是把它单独封装成一个函数好了。</p>

	 
	     <p style="margin:20px 0; color:#9f9f9f; font-size:12px;">
<span>Posted by <a style="color:#9f9f9f;" href="http://weibo.com/newdings/"><strong>@cmm是muffinman_</strong></a> - 6月 18 2013</span><br />
<span style="line-height:13px;">如需转载，请注明： 本文来自 <a style="color:#9f9f9f;" href="http://blog.edi-c.com"><strong>@chaoming.edc blog</strong></a></span>
</p>
       	 
      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  
<article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
  <header>
      
      
  
    <h1 class="title"><a href="/post/remote-html5-debugging-on-windows-phone-with-weinre.html">在 Windows Phone 上利用 weinre 远程调试 HTML5 页面</a></h1>
  

      <time datetime="2013-06-14T05:53:00.000Z"><a href="/post/remote-html5-debugging-on-windows-phone-with-weinre.html">6月 14 2013</a></time>
      
  </header>
    <div class="entry">
      
        <p>参考资料：</p>
<ul>
<li><a href="http://blogs.windows.com/windows_phone/b/wpdev/archive/2013/06/12/remote-html5-debugging-on-windows-phone-with-weinre.aspx" target="_blank">Remote HTML5 debugging on Windows Phone with weinre</a></li>
<li><a href="http://msopentech.com/blog/2013/05/31/now-on-ie-and-firefox-debug-your-mobile-html5-page-remotely-with-weinre-web-inspector-remote/" target="_blank">Now on IE and Firefox: Debug your mobile HTML5 page remotely with weinre (WEb INspector REmote)</a></li>
<li><a href="http://www.developer.nokia.com/Community/Wiki/How_to_debug_Windows_Phone_HTML5_Apps" target="_blank">How to debug Windows Phone HTML5 Apps</a></li>
</ul>
<h2 id="weinre_(WEb_INspector_REmote)">weinre (WEb INspector REmote)</h2>
<p>Weinre (WEb INspector REmote) 是一个用于调试 HTML5 页面在移动设备上表现的工具。它是 Apache Cordova 计划中的一部分，旨在帮助开发者在设备上远程调试他们的网页或那些基于 Cordova 的移动 App。 Weinre 可远程地进行 DOM 的审查，让开发者在设备上调试 HTML5 页面显示效果更为方便。</p>
<p>如果你熟悉 IE 上的 F12 审查工具、Firefox 上的 Firebug 或 Chrome 的 Web 审查工具，那你将会十分熟悉 Weinre，因为它们非常相像。</p>
<h2 id="安装部署">安装部署</h2>
<ol>
<li>到 <a href="http://nodejs.org/" target="_blank">Node.js</a> 对应平台的版本，安装部署 Node.js。</li>
<li><p>启动 Node.js 的命令提示符，输入下面命令安装 weinre：<code>npm -g -install weinre</code></p>
<p><em>PS</em>：如系统有设置代理的话，可在环境变量中添加 <code>http_proxy</code> 和 <code>https_proxy</code> 两个变量，并设置为代理地址。</p>
</li>
<li><p>安装完成后，输入以下命令启动 weinre： <code>weinre -boundHost xx.xx.xx.xx</code>，<code>xx.xx.xx.xx</code> 你想要绑定的网络适配器 IP 地址。</p>
</li>
<li><p>在浏览器中输入 <code>http://xx.xx.xx.xx:8080</code> 即可打开 weinre 页面。页面如下：</p>
<p><img src="http://d.pr/i/qRTc.png" alt="weinre_console"></p>
</li>
</ol>
<h2 id="开始调试">开始调试</h2>
<p>如果你所在的网络环境不复杂的话，其实已经可以开始调试你的页面了。步骤如下：</p>
<ol>
<li><p>在 PC 上启动调试器客户端页面：<a href="http://xx.xx.xx.xx:8080/client（xx.xx.xx.xx" target="_blank">http://xx.xx.xx.xx:8080/client（xx.xx.xx.xx</a> 的含义如上文所述），打开后可以看到下面的界面：</p>
<p><img src="http://d.pr/i/AvaR.png" alt="weinre_client"></p>
</li>
<li><p>在需要调试的页面中加入下面的标签：</p>
<pre><code><span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">”http:</span>//<span class="attribute">xx.xx.xx.xx:8080</span>/<span class="attribute">target</span>/<span class="attribute">target-script-min.js</span>#<span class="attribute">anonymous</span>”&gt;</span><span class="javascript"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span>
</code></pre></li>
<li><p>然后在应用中打开需要调试的页面，即可在开始调试。</p>
</li>
</ol>
<p><em>PS</em>：关于如何使用 Fiddler 与 Windows Phone 进行联合调试，可以参考这篇文章：《<a href="http://scriptogr.am/blastmann/post/fiddlershare" target="_blank">Fiddler 与 Windows Phone 联调</a>》。</p>

	 
	     <p style="margin:20px 0; color:#9f9f9f; font-size:12px;">
<span>Posted by <a style="color:#9f9f9f;" href="http://weibo.com/newdings/"><strong>@cmm是muffinman_</strong></a> - 6月 14 2013</span><br />
<span style="line-height:13px;">如需转载，请注明： 本文来自 <a style="color:#9f9f9f;" href="http://blog.edi-c.com"><strong>@chaoming.edc blog</strong></a></span>
</p>
       	 
      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  
<article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
  <header>
      
      
  
    <h1 class="title"><a href="/post/notes-about-wp8-customized-control.html">Windows Phone 自定义控件学习小记</a></h1>
  

      <time datetime="2013-06-12T08:54:00.000Z"><a href="/post/notes-about-wp8-customized-control.html">6月 12 2013</a></time>
      
  </header>
    <div class="entry">
      
        <h2 id="自定义控件的简单过程记录">自定义控件的简单过程记录</h2>
<ol>
<li>新建项目（Windows Phone Class Library）</li>
<li><p>新建一个类，继承自 <code>Control</code> 类，并在构造函数中定义 <code>DefaultStyleKey</code>，示例如下：</p>
<pre><code><span class="keyword">public</span> <span class="keyword">class</span> CustomControl : Control
{
    <span class="keyword">public</span> <span class="title">CustomControl</span>()
    {
        DefaultStyleKey = <span class="keyword">typeof</span> (CustomControl);
    }
}
</code></pre></li>
<li><p>在项目中添加一个新文件夹，名字定义为：Themes（必须是这个名字）。</p>
</li>
<li><p>在 Themes 文件夹中添加一个 <code>Generic.xaml</code> 文件，内建一个自定义的资源字典，示例如下：</p>
<pre><code>&lt;ResourceDictionary
    xmlns=<span class="string">"http://schemas.microsoft.com/winfx/2006/xaml/presentation"</span>
    xmlns:x=<span class="string">"http://schemas.microsoft.com/winfx/2006/xaml"</span>
    xmlns:phoneClassLibrary1=<span class="string">"clr-namespace:PhoneClassLibrary1"</span>&gt;

    &lt;<span class="keyword">Style</span> TargetType=<span class="string">"phoneClassLibrary1:CustomControl"</span>&gt;
        &lt;<span class="keyword">Style</span>.Setters&gt;
            &lt;<span class="keyword">Setter</span> <span class="keyword">Property</span>=<span class="string">"Background"</span> <span class="keyword">Value</span>=<span class="string">"{StaticResource PhoneAccentBrush}"</span>/&gt;
            &lt;<span class="keyword">Setter</span> <span class="keyword">Property</span>=<span class="string">"Template"</span>&gt;
                &lt;<span class="keyword">Setter</span>.<span class="keyword">Value</span>&gt;
                    &lt;ControlTemplate TargetType=<span class="string">"phoneClassLibrary1:CustomControl"</span>&gt;
                        &lt;Border BorderThickness=<span class="string">"{StaticResource PhoneBorderThickness}"</span> 
                                BorderBrush=<span class="string">"{StaticResource PhoneBorderBrush}"</span> 
                                <span class="keyword">Background</span>=<span class="string">"{StaticResource PhoneAccentBrush}"</span> /&gt;
                    &lt;/ControlTemplate&gt;
                &lt;/<span class="keyword">Setter</span>.<span class="keyword">Value</span>&gt;
            &lt;/<span class="keyword">Setter</span>&gt;
        &lt;/<span class="keyword">Style</span>.Setters&gt;
    &lt;/<span class="keyword">Style</span>&gt;
&lt;/ResourceDictionary&gt;
</code></pre><p><strong>注意</strong>：Style 在定义时切莫声明 <code>Key</code> 值，否则会造成样式无法索引，编译通过、运行正常但控件无法显示。</p>
</li>
<li><p>在 Windows Phone 应用程序工程中引用此类库项目，尝试添加以上定义的 <code>CustomControl</code>，编译运行，观察是否正常显示。运行截图如下：</p>
<p><img src="http://d.pr/i/PX3B.png" alt="CustomControl"></p>
</li>
</ol>

	 
	     <p style="margin:20px 0; color:#9f9f9f; font-size:12px;">
<span>Posted by <a style="color:#9f9f9f;" href="http://weibo.com/newdings/"><strong>@cmm是muffinman_</strong></a> - 6月 12 2013</span><br />
<span style="line-height:13px;">如需转载，请注明： 本文来自 <a style="color:#9f9f9f;" href="http://blog.edi-c.com"><strong>@chaoming.edc blog</strong></a></span>
</p>
       	 
      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  
<article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
  <header>
      
      
  
    <h1 class="title"><a href="/post/ui-dev-tricks-in-windows-phone.html">Windows Phone UI 开发中的各种诡异</a></h1>
  

      <time datetime="2013-05-27T08:41:00.000Z"><a href="/post/ui-dev-tricks-in-windows-phone.html">5月 27 2013</a></time>
      
  </header>
    <div class="entry">
      
        <h2 id="自定义_TextBox_的诡异地方">自定义 TextBox 的诡异地方</h2>
<p>自己自定义了一个<code>TextBox</code>，<code>TextBox</code>样式设置高度之类的属性，然后发现里面选中的时候选择手柄没有显示完整，于是发现可以通过设置 <code>MaxHeight</code> 来让手柄显示正常。</p>
<p><a href="http://msdn.microsoft.com/zh-cn/library/windowsphone/develop/system.windows.frameworkelement.maxheight(v=vs.105).aspx" target="_blank">参考资料：FrameworkElement中的高度信息</a></p>
<blockquote>
<p><strong>依赖项属性标识符字段： <code>MaxHeightProperty</code></strong></p>
<p>这是 <code>FrameworkElement</code> 上的三个用于指定高度信息的属性之一。 另外两个是 <code>MinHeight</code> 和 <code>Height</code>。 如果这三个值之间存在冲突，则应用程序确定高度的实际顺序是：首先必须采用 <code>MinHeight</code>；然后采用 <code>MaxHeight</code>；最后，如果这些值中的每个值都在限制之内，则采用 <code>Height</code>。</p>
<p>从技术角度讲，允许 <code>MaxHeight</code> 的值不是整数，但应通常避免这种情况，并且一般通过默认的布局舍入行为来舍入这些值。</p>
</blockquote>
<h2 id="ScrollViewer_做渐变动画时内容变模糊">ScrollViewer 做渐变动画时内容变模糊</h2>
<p>在测试的示例代码中基本结构是在一个<code>ScrollViewer</code>中内嵌一个<code>StackPanel</code>，然后添加一个<code>TextBlock</code>和一个<code>Button</code>。点击<code>Button</code>，触发<code>Button</code>上的<code>Click</code>事件，启动外层<code>Grid</code>上的渐变动画。</p>
<p>测试结果如下：</p>
<ul>
<li>当<code>ScrollViewer</code>中内容不多的时候（不超过最外层<code>Grid</code>的高度），动画显示正常，内容不会出现模糊。</li>
<li>复制示例代码中的<code>TextBlock</code>，确保<code>ScrollViewer</code>高度大于外层<code>Grid</code>高度，再次点击<code>Button</code>进行测试，动画显示正常，但动画过程中内容变模糊，直至动画完成。</li>
</ul>
<p>根据动画进行过程中的内存情况分析，猜测动画过程中，如对<code>ScrollViewer</code>本身及其外层窗口进行渐变动画，<code>ScrollViewer</code>将自动开启<code>BitmapCache</code>（渲染大小为1X），造成一定程度的模糊，同时内存也会对应上升一定程度（动画结束后内存释放）。</p>
<p>暂时发现比较好的解决方法是：直接对内嵌于<code>ScrollViewer</code>中的<code>Panel</code>控件做动画，模糊问题可以得到解决。但<code>ListBox</code> \ <code>LLS</code>等控件该怎么获取内部<code>ScrollViewer</code>中的控件，这是一个问题，或者是对其中的<code>ItemsPresenter</code>进行动画吧。</p>
<p>示例代码如下（包含多余的样式代码）：</p>
<ul>
<li><p>XAML:</p>
<pre><code> <span class="tag">&lt;<span class="title">Grid</span> <span class="attribute">x:Name</span>=<span class="value">"ContentPanel"</span> <span class="attribute">Grid.Row</span>=<span class="value">"1"</span> <span class="attribute">Margin</span>=<span class="value">"12,0,12,0"</span>&gt;</span>
     <span class="tag">&lt;<span class="title">ScrollViewer</span> <span class="attribute">Name</span>=<span class="value">"ContentSV"</span>&gt;</span>
         <span class="tag">&lt;<span class="title">StackPanel</span> <span class="attribute">Name</span>=<span class="value">"ContentSP"</span>&gt;</span>
             <span class="tag">&lt;<span class="title">Button</span> <span class="attribute">Content</span>=<span class="value">"Fade Grid"</span> <span class="attribute">Click</span>=<span class="value">"FadeGrid_OnClick"</span>/&gt;</span>
             <span class="tag">&lt;<span class="title">Button</span> <span class="attribute">Content</span>=<span class="value">"Fade ScrollViewer"</span> <span class="attribute">Click</span>=<span class="value">"FadeSV_OnClick"</span>&gt;</span><span class="tag">&lt;/<span class="title">Button</span>&gt;</span>
             <span class="tag">&lt;<span class="title">Button</span> <span class="attribute">Content</span>=<span class="value">"Fade StackPanel"</span> <span class="attribute">Click</span>=<span class="value">"FadeSP_OnClick"</span>/&gt;</span>

             <span class="tag">&lt;<span class="title">TextBlock</span> <span class="attribute">TextWrapping</span>=<span class="value">"Wrap"</span>&gt;</span>
                 Lorem ipsum Pariatur sint occaecat sunt sint do labore adipisicing 
                 eiusmod incididunt culpa laborum consequat magna dolor labore sunt sed 
                 ullamco anim adipisicing do pariatur ea esse qui sint magna in voluptate 
                 Duis id ut anim id.
             <span class="tag">&lt;/<span class="title">TextBlock</span>&gt;</span>

             <span class="tag">&lt;<span class="title">TextBlock</span> <span class="attribute">TextWrapping</span>=<span class="value">"Wrap"</span>&gt;</span>
                 Lorem ipsum Pariatur sint occaecat sunt sint do labore adipisicing 
                 eiusmod incididunt culpa laborum consequat magna dolor labore sunt sed 
                 ullamco anim adipisicing do pariatur ea esse qui sint magna in voluptate 
                 Duis id ut anim id.
             <span class="tag">&lt;/<span class="title">TextBlock</span>&gt;</span>

             <span class="tag">&lt;<span class="title">TextBlock</span> <span class="attribute">TextWrapping</span>=<span class="value">"Wrap"</span>&gt;</span>
                 Lorem ipsum Pariatur sint occaecat sunt sint do labore adipisicing 
                 eiusmod incididunt culpa laborum consequat magna dolor labore sunt sed 
                 ullamco anim adipisicing do pariatur ea esse qui sint magna in voluptate 
                 Duis id ut anim id.
             <span class="tag">&lt;/<span class="title">TextBlock</span>&gt;</span>

             <span class="tag">&lt;<span class="title">TextBlock</span> <span class="attribute">TextWrapping</span>=<span class="value">"Wrap"</span>&gt;</span>
                 Lorem ipsum Pariatur sint occaecat sunt sint do labore adipisicing 
                 eiusmod incididunt culpa laborum consequat magna dolor labore sunt sed 
                 ullamco anim adipisicing do pariatur ea esse qui sint magna in voluptate 
                 Duis id ut anim id.
             <span class="tag">&lt;/<span class="title">TextBlock</span>&gt;</span>

             <span class="tag">&lt;<span class="title">TextBlock</span> <span class="attribute">TextWrapping</span>=<span class="value">"Wrap"</span>&gt;</span>
                 Lorem ipsum Pariatur sint occaecat sunt sint do labore adipisicing 
                 eiusmod incididunt culpa laborum consequat magna dolor labore sunt sed 
                 ullamco anim adipisicing do pariatur ea esse qui sint magna in voluptate 
                 Duis id ut anim id.
             <span class="tag">&lt;/<span class="title">TextBlock</span>&gt;</span>
         <span class="tag">&lt;/<span class="title">StackPanel</span>&gt;</span>
     <span class="tag">&lt;/<span class="title">ScrollViewer</span>&gt;</span>
 <span class="tag">&lt;/<span class="title">Grid</span>&gt;</span>
</code></pre></li>
</ul>
<ul>
<li><p>C#:</p>
<pre><code>  <span class="keyword">private</span> <span class="keyword">void</span> <span class="title">FadeInAndOut</span>(DependencyObject dObj)
  {
      <span class="keyword">var</span> storyb = <span class="keyword">new</span> Storyboard();
      Duration Show_Duration = <span class="keyword">new</span> Duration(<span class="keyword">new</span> TimeSpan(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">450</span>));
      DoubleAnimation m_OpacityAni = <span class="keyword">new</span> DoubleAnimation();
      m_OpacityAni.Duration = Show_Duration;
      m_OpacityAni.From = <span class="number">1.0</span>;
      m_OpacityAni.To = <span class="number">0.0</span>;
      m_OpacityAni.AutoReverse = <span class="keyword">true</span>;

      storyb.Children.Add(m_OpacityAni);

      Storyboard.SetTarget(m_OpacityAni, dObj);
      Storyboard.SetTargetProperty(m_OpacityAni, <span class="keyword">new</span> PropertyPath(<span class="string">"(UIElement.Opacity)"</span>));

      storyb.Begin();
  }

  <span class="keyword">private</span> <span class="keyword">void</span> <span class="title">FadeGrid_OnClick</span>(<span class="keyword">object</span> sender, RoutedEventArgs e)
  {
      FadeInAndOut(ContentPanel);
  }

  <span class="keyword">private</span> <span class="keyword">void</span> <span class="title">FadeSP_OnClick</span>(<span class="keyword">object</span> sender, RoutedEventArgs e)
  {
      FadeInAndOut(ContentSP);
  }

  <span class="keyword">private</span> <span class="keyword">void</span> <span class="title">FadeSV_OnClick</span>(<span class="keyword">object</span> sender, RoutedEventArgs e)
  {
      FadeInAndOut(ContentSV);
  }
</code></pre></li>
</ul>
<h2 id="ApplicationBar_的坑爹处">ApplicationBar 的坑爹处</h2>
<p><code>ApplicationBar</code> 的透明度很坑爹，如果透明度为<code>1</code>，它将表现为属于页面的一部分，将占据页面中部分空间。如果透明度小于<code>1</code>（如<code>0.99</code>），它将表现为覆盖在页面之上，不会占据页面的空间。</p>
<p>那这个时候就有问题了。如果我们页面中有一个 <code>ListBox</code> （或者 <code>LLS</code> ），我们需要将它滚动至最后一项时， <code>ApplicationBar</code> 透明度小于<code>1</code>时将会阻挡其显示。有什么办法可以解决这个问题呢？</p>
<ol>
<li><p>Hard Code <code>ListBox</code>（或<code>LLS</code>） 父容器的高度或者外边距</p>
<p>这种方法个人觉得并不好用，如果页面不考虑旋转的话还好，如果要考虑旋转的话，就必须在旋转的时候注意设置其父容器的高度（<code>Height</code>）或外边距（<code>Margin</code>）。这样我们需要计算的数字比较多，容易造成混乱，而且每次旋转之后都要重新设置高度或者外边距，自适应性不好。不过，原始的方法总是比较实用的对吧。</p>
</li>
<li><p>为 <code>LongListSelector</code> 设置 <code>ListFooter</code> </p>
<p>查看了官方文档之后发现<code>LLS</code>本身有两个很有趣的属性：<code>ListFooter</code>和<code>ListHeader</code>关于这两个部分的位置，官方文档上有一个图描述得非常清楚：</p>
<p><img src="http://i.msdn.microsoft.com/dynimg/IC619230.png" alt="Header&amp;Footer"></p>
<p>经测试，这种方法相当于在<code>LLS</code>头部或尾部添加了一个特殊项，我们只要将这个特定项设置为空的、有一定高度（一般是 72px）的元素即可。测试出来的效果跟系统的<code>人脉</code>中显示效果一致，滚动至底部后将出现一定的空白用于分隔列表与 ApplicationBar。</p>
<p><img src="http://d.pr/i/iHMH.png" alt="People"></p>
<p>第二种方法比第一种方法好的地方就是：不需要另外指定<code>Margin</code>或者<code>Height</code>这样的属性，所有元素都是自适应的，比起第一种方法要灵活一点。特别是在<code>Pivot</code>和<code>Panorama</code>控件下，不同的页面中对<code>ApplicationBar</code>的要求不一样，当<code>ApplicationBar</code>高度不统一时，我们就需要对其列表控件的高度或外边距进行多个设置，不甚灵活。</p>
</li>
<li><p><code>ListBox</code> 怎么办？</p>
<p>经少量测试，如果给<code>ListBox</code>最后添加上一项空白项的话，可能会造成选项错误。Google 之后发现，还是有一些比较 Tricky 的方法的。下面列出一种：</p>
<p>对<code>ListBox</code>的模板进行修改，在<code>ItemsPrestenter</code>下面添加一个高度为<code>72px</code>的空白项。示例代码：</p>
   <ControlTemplate><br>       <ScrollViewer Height="{Binding Height,RelativeSource={RelativeSource Mode=TemplatedParent}}"><br>           <StackPanel><br>               <ItemsPresenter /><br>               <Canvas Height="72" /><br>           </StackPanel><br>       </ScrollViewer><br>   </ControlTemplate>

<p>但是这种方法有 Bug，造成<code>VirtualizingStackPanel</code>的数据虚拟化失效，暂时没有找到除了设置固定高度之外的解决方法。</p>
</li>
</ol>
<h2 id="ToolKit_中的_SlideInEffects_在_WP8_中无效">ToolKit 中的 SlideInEffects 在 WP8 中无效</h2>
<p>原因：WP8 中，<code>LongListSelector</code>、<code>Panorama</code> 和 <code>Pivot</code> 属于框架中的一部分，它们的 <code>ManipulationCompleted</code> 事件默认被标识为 <code>handled</code>，以提高界面的流畅性。</p>
<p>如果真的要处理 Pivot 控件的 <code>ManipulationCompleted</code> 事件的话，可以把 <code>SlideInEffects.cs</code> 的 <code>OnParentPivotPropertyChanged</code> 函数中的</p>
<pre><code><span class="attribute">newPivot.ManipulationCompleted +</span>=<span class="string"> Pivot_ManipulationCompleted;</span>
</code></pre><p>替换为：</p>
<pre><code>newPivot.<span class="keyword">AddHandler</span>(Pivot.ManipulationCompletedEvent, <span class="keyword">new</span> EventHandler&lt;ManipulationCompletedEventArgs&gt;(Pivot_ManipulationCompleted), <span class="literal">true</span>);
</code></pre><p>但处理效果不好，会导致动画效果异常。原因是 <code>SelectionChanged</code> 事件在 <code>ManipulationCompleted</code> 事件完成之后才会触发，因此造成动画效果异常。</p>
<p>比较丑陋的解决方法是：将 <code>SelectionChanged</code> 事件处理与 <code>ManipulationCompleted</code> 对调，同时将 <code>fromRight</code> 变量抽取为静态变量，让动画在 <code>SelectionChanged</code> 事件中进行处理。<a href="http://d.pr/f/MiSr" target="_blank"><strong>点击这里下载</strong></a>。</p>
<h2 id="Toolkit_中的_HubTile_滑动展开到最大后消失及没有适配_WP8_的新翻转效果">Toolkit 中的 HubTile 滑动展开到最大后消失及没有适配 WP8 的新翻转效果</h2>
<p>经过排查发现，原因应该是 <code>Generic.xaml</code> 中的状态动画没有对 <code>Collapsed</code> 状态进行定义。另外，文件里的动画也很久没有更新了，没有适配 WP8 首屏瓷砖翻转时的 <code>BackEase</code> 效果。我在原来的 <code>HubTile</code> 基础上加了一些内容，主要更新点是：</p>
<ul>
<li>当瓷砖中有具体信息时，瓷砖不会采用滑动展开的动画，只会使用翻转动画。</li>
<li>稍微调整了一下动画触发的时间，减少等待。</li>
<li>适配 WP8 的动画效果。</li>
</ul>
<p>具体可以<a href="http://d.pr/f/7tlo" target="_blank">点击这里</a>下载代码。</p>
<h2 id="ListPicker_选项初始位置偏移的问题">ListPicker 选项初始位置偏移的问题</h2>
<p>在升级 Windows Phone Toolkit 的开发测试过程中出现过这么一个现象：</p>
<blockquote>
<p><code>ListPicker</code> 的初始化一切都很正常，但是在完成初始化之后，选项的第一项位移有些许偏移，而且在初次打开的时候会比较卡。</p>
</blockquote>
<p><img src="http://d.pr/i/fkdl.png" alt="ListPicker"></p>
<p>调试中发现：当 <code>ListPicker</code> 在绑定 <code>SelectionChanged</code> 事件后，进行添加数据的操作将会引起 <code>SelectionChanged</code> 事件的反复调用，估计是反复调用 <code>SelectionChanged</code> 引起的问题。</p>
<p>解决错位的问题：只需要把数据绑定完成之后，再进行事件绑定操作即可，避免事件反复触发进行控件布局异常。</p>
<h2 id="点击事件与背景色">点击事件与背景色</h2>
<p>点击事件的触发与元素的背景色有关系，示例代码：</p>
<ul>
<li><p>XAML:</p>
<pre><code>  &lt;<span class="keyword">Grid</span> x:Name=<span class="string">"ContentPanel"</span> <span class="keyword">Grid</span>.<span class="keyword">Row</span>=<span class="string">"1"</span> Margin=<span class="string">"12,0,12,0"</span> Tap=<span class="string">"ContentPanel_OnTap"</span>&gt;
      &lt;<span class="keyword">Grid</span> Tap=<span class="string">"UIElement_OnTap"</span> Height=<span class="string">"300"</span>&gt;&lt;/<span class="keyword">Grid</span>&gt;
  &lt;/<span class="keyword">Grid</span>&gt;
</code></pre></li>
<li><p>CS:</p>
<pre><code>  <span class="keyword">private</span> <span class="keyword">void</span> <span class="title">ContentPanel_OnTap</span>(<span class="keyword">object</span> sender, GestureEventArgs e)
  {
      System.Diagnostics.Debug.WriteLine(e.OriginalSource.ToString() + <span class="string">"1"</span>);
      e.Handled = <span class="keyword">true</span>;
  }

  <span class="keyword">private</span> <span class="keyword">void</span> <span class="title">UIElement_OnTap</span>(<span class="keyword">object</span> sender, GestureEventArgs e)
  {
      System.Diagnostics.Debug.WriteLine(e.OriginalSource.ToString() + <span class="string">"2"</span>);
      e.Handled = <span class="keyword">true</span>;
  }
</code></pre></li>
<li><p>大致布局如下，高亮框为内嵌高度为300px的 Grid：</p>
<p>  <img src="http://d.pr/i/Fcl2.png" alt="Layout"></p>
</li>
</ul>
<p>示例很简单，只是两个 Grid 的嵌套加上 <code>Tap</code> 事件的简单输出。运行的时候可以发现，我们点击外层 Grid 时输出窗口并没有输出内容，但点击中间的 Grid 时则有输出 <code>System.Windows.Controls.Grid2</code> 的信息，而两者的区别仅在于背景色的设置。在设计流式布局时，要注意这个问题，有时候点击事件没有触发的原因仅仅是因为外层的容器没有设置一个透明的背景色。</p>
<p>当 <code>Background</code> 属性为空时，点击该元素并不会触发 <code>Tap</code> 事件，只有当 <code>Background</code> 属性不为空（如不想影响显示效果，可设置为 <code>Transparent</code>），点击事件才会触发。</p>
<h2 id="莫名其妙的_TextBox_获取焦点事件触发（2013-05-27更新）">莫名其妙的 TextBox 获取焦点事件触发（2013-05-27更新）</h2>
<p>页面结构基本如下：</p>
<pre><code>-<span class="ruby"> <span class="constant">Grid</span>
</span>  -<span class="ruby"> <span class="constant">ScrollViewer</span>
</span>    -<span class="ruby"> <span class="constant">StackPanel</span>
</span>      -<span class="ruby"> <span class="constant">TextBox</span>
</span>      -<span class="ruby"> <span class="constant">TextBlock</span></span>
</code></pre><p>问题就是，当我们点击 TextBlock 设置 Grid 进行隐藏时，ScrollViewer 很神奇地会让 TextBox 触发 <code>GotFocus</code> 事件，导致页面隐藏后出现软键盘。</p>
<p>废话不多说了，直接看代码：</p>
<ul>
<li><p>XAML:</p>
<pre><code>  <span class="tag">&lt;<span class="title">Grid</span> <span class="attribute">x:Name</span>=<span class="value">"ContentPanel"</span> <span class="attribute">Grid.Row</span>=<span class="value">"1"</span> <span class="attribute">Margin</span>=<span class="value">"12,0,12,0"</span>&gt;</span>
      <span class="tag">&lt;<span class="title">Grid.RowDefinitions</span>&gt;</span>
          <span class="tag">&lt;<span class="title">RowDefinition</span> <span class="attribute">Height</span>=<span class="value">"Auto"</span>&gt;</span><span class="tag">&lt;/<span class="title">RowDefinition</span>&gt;</span>
          <span class="tag">&lt;<span class="title">RowDefinition</span> <span class="attribute">Height</span>=<span class="value">"*"</span>&gt;</span><span class="tag">&lt;/<span class="title">RowDefinition</span>&gt;</span>
      <span class="tag">&lt;/<span class="title">Grid.RowDefinitions</span>&gt;</span>

      <span class="tag">&lt;<span class="title">Button</span> <span class="attribute">Grid.Row</span>=<span class="value">"0"</span> <span class="attribute">Click</span>=<span class="value">"ButtonBase_OnClick"</span>&gt;</span>Display<span class="tag">&lt;/<span class="title">Button</span>&gt;</span>

      <span class="tag">&lt;<span class="title">Grid</span> <span class="attribute">Grid.Row</span>=<span class="value">"1"</span> <span class="attribute">Name</span>=<span class="value">"canvas"</span> <span class="attribute">GotFocus</span>=<span class="value">"UIElement_OnGotFocus"</span>&gt;</span>
          <span class="tag">&lt;<span class="title">ScrollViewer</span> <span class="attribute">Name</span>=<span class="value">"SV"</span> <span class="attribute">GotFocus</span>=<span class="value">"UIElement_OnGotFocus"</span> &gt;</span>
              <span class="tag">&lt;<span class="title">StackPanel</span>&gt;</span>
                  <span class="tag">&lt;<span class="title">TextBox</span> <span class="attribute">Name</span>=<span class="value">"TB"</span> <span class="attribute">GotFocus</span>=<span class="value">"UIElement_OnGotFocus"</span> <span class="attribute">Width</span>=<span class="value">"200"</span> /&gt;</span>
                  <span class="tag">&lt;<span class="title">TextBlock</span> <span class="attribute">Margin</span>=<span class="value">"0,50,0,0"</span> <span class="attribute">Tap</span>=<span class="value">"ButtonBase_OnClick"</span> 
                             <span class="attribute">GotFocus</span>=<span class="value">"UIElement_OnGotFocus"</span>&gt;</span>Hide<span class="tag">&lt;/<span class="title">TextBlock</span>&gt;</span>
              <span class="tag">&lt;/<span class="title">StackPanel</span>&gt;</span>
          <span class="tag">&lt;/<span class="title">ScrollViewer</span>&gt;</span>
      <span class="tag">&lt;/<span class="title">Grid</span>&gt;</span>
</code></pre></li>
<li><p>CS:</p>
<pre><code>  private void ButtonBase_OnClick(object sender, RoutedEventArgs e)
  {
      System<span class="preprocessor">.Diagnostics</span><span class="preprocessor">.Debug</span><span class="preprocessor">.WriteLine</span>(<span class="string">"Click: "</span> + sender<span class="preprocessor">.GetType</span>())<span class="comment">;</span>

      // 在修改`Visibility`前禁用ScrollViewer
      SV<span class="preprocessor">.IsEnabled</span> = canvas<span class="preprocessor">.Visibility</span> != Visibility<span class="preprocessor">.Visible</span><span class="comment">;</span>

      canvas<span class="preprocessor">.Visibility</span> = canvas<span class="preprocessor">.Visibility</span> == Visibility<span class="preprocessor">.Visible</span>
                              ? Visibility<span class="preprocessor">.Collapsed</span>
                              : Visibility<span class="preprocessor">.Visible</span><span class="comment">;</span>
  }

  private void UIElement_OnGotFocus(object sender, RoutedEventArgs e)
  {
      System<span class="preprocessor">.Diagnostics</span><span class="preprocessor">.Debug</span><span class="preprocessor">.WriteLine</span>(<span class="string">"GotFocus: "</span> + sender<span class="preprocessor">.GetType</span>() + <span class="string">", Source: "</span> + e<span class="preprocessor">.OriginalSource</span>)<span class="comment">;</span>
  }
</code></pre></li>
</ul>
<p>暂时的解决方法是：在隐藏外层 Grid 时，对 <code>ScrollViewer.IsEnabled</code> 设置为 <code>False</code>，或者直接对 ScrollViewer 设置隐藏，两个方法都不会触发到 TextBox 的 <code>GotFocus</code> 事件。</p>

	 
	     <p style="margin:20px 0; color:#9f9f9f; font-size:12px;">
<span>Posted by <a style="color:#9f9f9f;" href="http://weibo.com/newdings/"><strong>@cmm是muffinman_</strong></a> - 5月 27 2013</span><br />
<span style="line-height:13px;">如需转载，请注明： 本文来自 <a style="color:#9f9f9f;" href="http://blog.edi-c.com"><strong>@chaoming.edc blog</strong></a></span>
</p>
       	 
      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  
<article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
  <header>
      
      
  
    <h1 class="title"><a href="/post/create-a-flexible-wp-app-page-layout.html">创建宽度高度自适应的 Windows Phone App 界面布局</a></h1>
  

      <time datetime="2013-05-23T13:00:00.000Z"><a href="/post/create-a-flexible-wp-app-page-layout.html">5月 23 2013</a></time>
      
  </header>
    <div class="entry">
      
        <h4 id="[1]_利用好_Grid_的分行/分列功能">[1] 利用好 Grid 的分行/分列功能</h4>
<p>Grid 提供了分行/分列的属性，示例代码如下：</p>
<pre><code><span class="tag">&lt;<span class="title">Grid.RowDefinitions</span>&gt;</span>
    <span class="tag">&lt;<span class="title">RowDefinition</span> <span class="attribute">Height</span>=<span class="value">"Auto"</span>/&gt;</span>
    <span class="tag">&lt;<span class="title">RowDefinition</span> <span class="attribute">Height</span>=<span class="value">"*"</span>/&gt;</span>
    <span class="tag">&lt;<span class="title">RowDefinition</span> <span class="attribute">Height</span>=<span class="value">"2*"</span>/&gt;</span>
<span class="tag">&lt;/<span class="title">Grid.RowDefinitions</span>&gt;</span>
</code></pre><p>其中行高（列宽）有几种取值方式：</p>
<ol>
<li>直接指定数值。此方式最直接，将直接指定具体高度或宽度。</li>
<li>使用 <code>Auto</code> 值。使用 <code>Auto</code> 的话，Grid 将根据该行/列内容计算其占据空间的大小。</li>
<li>使用 <code>*</code> 值。使用 <code>*</code> 的话，Grid 将根据其他的行/列占据空间后剩余的空间来计算此行/列的大小。此值还支持比例计算，如示例代码中的 <code>2*</code>，表示 Grid 的空间在第一行计算完成后，剩余空间将均分为3份，第二行占据一份，第三行占据两份。</li>
</ol>
<p>分行/分列的属性在实现页面基础布局的情况下十分有用。但需要注意不要在数据模板中使用过于复杂的 Grid 结构，否则会导致大量计算资源消耗在计算 Grid 布局上。</p>
<p>相关资料：《<a href="http://scriptogr.am/blastmann/post/wpf-panels-performance" target="_blank">关于 WPF 中的面板性能分析</a>》</p>
<h4 id="[2]_注意对齐属性的区别">[2] 注意对齐属性的区别</h4>
<ol>
<li><p><code>HorizontalAlignment</code> / <code>VerticalAlignment</code> （水平对齐和垂直对齐）</p>
<p><code>HorizontalAlignment</code> 和 <code>VerticalAlignment</code> 是 FrameworkElement 中定义的两个属性。当 FrameworkElement 位于面板或项控件中时，这两个属性将会有应用，设置后影响此元素的布局。默认值是 <code>Stretch</code>，如果需要建立一个自适应的布局，最好不要修改此值。</p>
<ul>
<li><code>HorizontalAlignment</code> 取值： <code>Left</code> / <code>Right</code> / <code>Center</code> / <code>Stretch</code>。</li>
<li><code>VerticalAlignment</code> 取值： <code>Top</code> / <code>Bottom</code> / <code>Center</code> / <code>Stretch</code>。</li>
</ul>
<p>当前元素没有设置宽度（或高度）时，如使用除 <code>Stretch</code> 以外的值，会导致元素的大小变为该元素内部的元素占据的大小。如：</p>
<pre><code><span class="tag">&lt;<span class="title">Border</span> <span class="attribute">Height</span>=<span class="value">"50"</span> <span class="attribute">BorderBrush</span>=<span class="value">"White"</span> <span class="attribute">BorderThickness</span>=<span class="value">"3"</span> <span class="attribute">Background</span>=<span class="value">"Red"</span>
        <span class="attribute">HorizontalAlignment</span>=<span class="value">"Left"</span>&gt;</span>
<span class="tag">&lt;/<span class="title">Border</span>&gt;</span>
</code></pre><p>则此 <code>Border</code> 的宽度将变为0。因此，注意 <code>Stretch</code> 的使用。</p>
</li>
<li><p><code>HorizontalContentAlignment</code> / <code>VerticalContentAlignment</code> （内容水平对齐和内容垂直对齐）</p>
<p><code>HorizontalContentAlignment</code> 和 <code>VerticalContentAlignment</code> 是 Control 中实现的两个属性，主要影响控件内元素的排列位置，默认值分别是 <code>HorizontalAlignment.Left</code> 和 <code>VerticalAlignment.Top</code>。同样地，如果将属性设置为 <code>Stretch</code> 的话，则内部元素在没有设置固定大小时将会得到拉伸处理。</p>
<ul>
<li><code>HorizontalContentAlignment</code> 取值： <code>Left</code> / <code>Right</code> / <code>Center</code> / <code>Stretch</code>。</li>
<li><code>HorizontalContentAlignment</code> 取值： <code>Top</code> / <code>Bottom</code> / <code>Center</code> / <code>Stretch</code>。</li>
</ul>
</li>
</ol>
<p>强调这两个属性的原因是，当我们需要实现弹性布局时，使用 <code>Stretch</code> 可以免除频繁设置元素大小的困扰。</p>

	 
	     <p style="margin:20px 0; color:#9f9f9f; font-size:12px;">
<span>Posted by <a style="color:#9f9f9f;" href="http://weibo.com/newdings/"><strong>@cmm是muffinman_</strong></a> - 5月 23 2013</span><br />
<span style="line-height:13px;">如需转载，请注明： 本文来自 <a style="color:#9f9f9f;" href="http://blog.edi-c.com"><strong>@chaoming.edc blog</strong></a></span>
</p>
       	 
      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  
<article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
  <header>
      
      
  
    <h1 class="title"><a href="/post/wp8-webbrowser-document-mode.html">关于 WP8 中 WebBrowser 控件的文档模式</a></h1>
  

      <time datetime="2013-05-21T02:39:00.000Z"><a href="/post/wp8-webbrowser-document-mode.html">5月 21 2013</a></time>
      
  </header>
    <div class="entry">
      
        <p>IE 有个很诡异的地方就是：如果 HTML 文档里面没有声明 <code>&lt;!DOCTYPE&gt;</code> 的话，将会触发其「<a href="http://zh.wikipedia.org/zh-cn/%E6%80%AA%E5%BC%82%E6%A8%A1%E5%BC%8F" target="_blank">怪异模式</a>」。同时，WP8 上的 <code>WebBrowser</code> 控件本身有个 Bug 就是当我们使用 <code>NavigateToString()</code> 时，如果 HTML 代码中对 <code>&lt;!DOCTYPE&gt;</code> 进行声明了话，那 <code>WebBrowser</code> 将不能渲染该 HTML 代码（<a href="http://mikaelkoskinen.net/webbrowser-navigatetostring-broken-in-windows-phone-8-and-also-affects-windows-phone-7-apps-solution-included/" target="_blank">参考文章</a>）。</p>
<p>该参考文章给出的方法是利用独立存储来解决这个问题，代码如下：</p>
<pre><code><span class="keyword">var</span> client = <span class="keyword">new</span> WebClient(); 
<span class="keyword">var</span> content = <span class="keyword">await</span> client.DownloadStringTaskAsync(url);
<span class="keyword">var</span> store = IsolatedStorageFile.GetUserStoreForApplication();

<span class="keyword">using</span> (<span class="keyword">var</span> writeFile = <span class="keyword">new</span> StreamWriter(<span class="keyword">new</span> IsolatedStorageFileStream(<span class="string">"htmlcontent.html"</span>, FileMode.Create, FileAccess.Write, store))) 
{ 
    writeFile.Write(content); 
    writeFile.Close(); 
}

<span class="keyword">var</span> uri = <span class="keyword">new</span> Uri(<span class="string">"htmlcontent.html"</span>, UriKind.Relative);
WebBrowser.Navigate(uri);
</code></pre><p>PS：记得要给我们的 HTML 文档加上 <code>&lt;!doctype html&gt;</code> ，这样可以让 WebBrowser 运行在 IE10 的模式下面，对 HTML5 的支持最好，而且对 DOM 的操作速度也会快上不少。</p>
<p><strong>2013-05-20更新</strong>：今天看到 StackOverflow 上关于这个问题的另外一个答案（<a href="http://stackoverflow.com/questions/16276833/windows-8-phone-webbrowser-navigatetostring-does-not-work-when-meta-tag-meta-ch" target="_blank">点击进入</a>），<code>WebBrowser</code> 中 <code>NavigateToString()</code> 失效的根本原因应是 <code>String</code> 的编码问题。由于 <code>String</code> 类型的编码是 UTF-16，如果在 HTML 代码中插入 <code>&lt;meta charset=&quot;UTF-8&quot;&gt;</code> 的声明，<code>NavigateToString()</code> 将无法正确显示页面。</p>
<p><strong>2013-05-21相关资料</strong>：</p>
<ul>
<li><a href="http://msdn.microsoft.com/en-us/library/ie/cc288325" target="_blank"><Defining document compatibility></a>，在此文档中有简介 IE 中关于文档模式的一些问题。特别指出 IE9 及以前的版本，浏览器处理 Quirks Mode 的时候页面功能的支持将相当于 IE5.5。</li>
<li><a href="http://msdn.microsoft.com/en-us/library/ie/jj676915(v=vs.85).aspx" target="_blank"><Specifying legacy document modes></a>，此文档主要是介绍不同的 <code>&lt;!DOCTYPE&gt;</code> 下对应的文档模式。</li>
</ul>
<h4 id="关于_WebBrowser_的文档模式检测">关于 WebBrowser 的文档模式检测</h4>
<p>很简单地过程，只要使用 <code>documentMode()</code> 输出一下文档模式即可。简单测试代码：</p>
<ul>
<li><p>XAML:</p>
<pre><code>  <span class="tag">&lt;<span class="title">StackPanel</span>&gt;</span>
      <span class="tag">&lt;<span class="title">TextBlock</span> <span class="attribute">FontSize</span>=<span class="value">"{StaticResource PhoneFontSizeLarge}"</span> <span class="attribute">Margin</span>=<span class="value">"{StaticResource PhoneMargin}"</span>&gt;</span>doctype and flexbox test<span class="tag">&lt;/<span class="title">TextBlock</span>&gt;</span>
      <span class="tag">&lt;<span class="title">phone:WebBrowser</span> <span class="attribute">Name</span>=<span class="value">"wb1"</span> <span class="attribute">IsScriptEnabled</span>=<span class="value">"True"</span> <span class="attribute">Height</span>=<span class="value">"300"</span> <span class="attribute">Margin</span>=<span class="value">"{StaticResource PhoneMargin}"</span>&gt;</span><span class="tag">&lt;/<span class="title">phone:WebBrowser</span>&gt;</span>

      <span class="tag">&lt;<span class="title">phone:WebBrowser</span> <span class="attribute">Name</span>=<span class="value">"wb2"</span> <span class="attribute">IsScriptEnabled</span>=<span class="value">"True"</span> <span class="attribute">Height</span>=<span class="value">"300"</span> <span class="attribute">Margin</span>=<span class="value">"{StaticResource PhoneMargin}"</span>&gt;</span><span class="tag">&lt;/<span class="title">phone:WebBrowser</span>&gt;</span>
  <span class="tag">&lt;/<span class="title">StackPanel</span>&gt;</span>
</code></pre></li>
<li><p>CS:</p>
<pre><code>  using Microsoft.Phone.Controls;
  namespace PhoneApp3
  {
      public partial class MainPage : PhoneApplicationPage
      {
          // Constructor
          public MainPage()
          {
              InitializeComponent();

              var s2 = @"<span class="doctype">&lt;!doctype html&gt;</span>
                      <span class="tag">&lt;<span class="title">html</span> <span class="attribute">lang</span>=<span class="value">'en'</span>&gt;</span>
                      <span class="tag">&lt;<span class="title">head</span>&gt;</span>
                      <span class="tag">&lt;<span class="title">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="title">title</span>&gt;</span>
                      <span class="tag">&lt;<span class="title">style</span> <span class="attribute">type</span>=<span class="value">'text/css'</span>&gt;</span><span class="css">
                      <span class="class">.flex</span><span class="rules">{<span class="rule"><span class="attribute">display</span>:<span class="value"> -ms-flexbox</span></span>;<span class="rule">}</span></span>
                      <span class="class">.flex</span> <span class="tag">div</span><span class="rules">{<span class="rule"><span class="attribute">-ms-flex</span>:<span class="value"><span class="number">1</span> <span class="number">0</span> auto</span></span>; <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">200</span>px</span></span>; <span class="rule"><span class="attribute">height</span>:<span class="value"> <span class="number">200</span>px</span></span>;<span class="rule">}</span></span>
                      <span class="class">.red</span><span class="rules">{<span class="rule"><span class="attribute">background</span>:<span class="value"> red</span></span>;<span class="rule">}</span></span>
                      <span class="class">.blue</span><span class="rules">{<span class="rule"><span class="attribute">background</span>:<span class="value"> blue</span></span>;<span class="rule">}</span></span>
                      <span class="class">.green</span><span class="rules">{<span class="rule"><span class="attribute">background</span>:<span class="value"> green</span></span>;<span class="rule">}</span></span>
                      </span><span class="tag">&lt;/<span class="title">style</span>&gt;</span>
                      <span class="tag">&lt;/<span class="title">head</span>&gt;</span>
                      <span class="tag">&lt;<span class="title">body</span>&gt;</span>
                      <span class="tag">&lt;<span class="title">p</span>&gt;</span>DocumentMode: <span class="tag">&lt;<span class="title">span</span> <span class="attribute">id</span>=<span class="value">'mode'</span> <span class="attribute">style</span>=<span class="value">'color:red'</span>&gt;</span><span class="tag">&lt;/<span class="title">span</span>&gt;</span><span class="tag">&lt;/<span class="title">p</span>&gt;</span>
                      <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">'flex'</span>&gt;</span>
                      <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">'red'</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span>
                      <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">'blue'</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span>
                      <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">'green'</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span>
                      <span class="tag">&lt;/<span class="title">div</span>&gt;</span>
                      <span class="tag">&lt;/<span class="title">body</span>&gt;</span>
                      <span class="tag">&lt;<span class="title">script</span>&gt;</span><span class="javascript">
                      <span class="keyword">var</span> m = document.getElementById(<span class="string">'mode'</span>);
                      m.innerText = document.documentMode;
                      </span><span class="tag">&lt;/<span class="title">script</span>&gt;</span>
                      <span class="tag">&lt;/<span class="title">html</span>&gt;</span>
                      ";

              var s3 = @"
                      <span class="tag">&lt;<span class="title">html</span> <span class="attribute">lang</span>=<span class="value">'en'</span>&gt;</span>
                      <span class="tag">&lt;<span class="title">head</span>&gt;</span>
                      <span class="tag">&lt;<span class="title">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="title">title</span>&gt;</span>
                      <span class="tag">&lt;<span class="title">style</span> <span class="attribute">type</span>=<span class="value">'text/css'</span>&gt;</span><span class="css">
                      <span class="class">.flex</span><span class="rules">{<span class="rule"><span class="attribute">display</span>:<span class="value"> -ms-flexbox</span></span>;<span class="rule">}</span></span>
                      <span class="class">.flex</span> <span class="tag">div</span><span class="rules">{<span class="rule"><span class="attribute">-ms-flex</span>:<span class="value"><span class="number">1</span> <span class="number">0</span> auto</span></span>; <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">200</span>px</span></span>; <span class="rule"><span class="attribute">height</span>:<span class="value"> <span class="number">200</span>px</span></span>;<span class="rule">}</span></span>
                      <span class="class">.red</span><span class="rules">{<span class="rule"><span class="attribute">background</span>:<span class="value"> red</span></span>;<span class="rule">}</span></span>
                      <span class="class">.blue</span><span class="rules">{<span class="rule"><span class="attribute">background</span>:<span class="value"> blue</span></span>;<span class="rule">}</span></span>
                      <span class="class">.green</span><span class="rules">{<span class="rule"><span class="attribute">background</span>:<span class="value"> green</span></span>;<span class="rule">}</span></span>
                      </span><span class="tag">&lt;/<span class="title">style</span>&gt;</span>
                      <span class="tag">&lt;/<span class="title">head</span>&gt;</span>
                      <span class="tag">&lt;<span class="title">body</span>&gt;</span>
                      <span class="tag">&lt;<span class="title">p</span>&gt;</span>DocumentMode: <span class="tag">&lt;<span class="title">span</span> <span class="attribute">id</span>=<span class="value">'mode'</span> <span class="attribute">style</span>=<span class="value">'color:red'</span>&gt;</span><span class="tag">&lt;/<span class="title">span</span>&gt;</span><span class="tag">&lt;/<span class="title">p</span>&gt;</span>
                      <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">'flex'</span>&gt;</span>
                      <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">'red'</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span>
                      <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">'blue'</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span>
                      <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">'green'</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span>
                      <span class="tag">&lt;/<span class="title">div</span>&gt;</span>
                      <span class="tag">&lt;/<span class="title">body</span>&gt;</span>
                      <span class="tag">&lt;<span class="title">script</span>&gt;</span><span class="javascript">
                      <span class="keyword">var</span> m = document.getElementById(<span class="string">'mode'</span>);
                      m.innerText = document.documentMode;
                      </span><span class="tag">&lt;/<span class="title">script</span>&gt;</span>
                      <span class="tag">&lt;/<span class="title">html</span>&gt;</span>
                      ";

              wb1.NavigateToString(s2);
              wb2.NavigateToString(s3);
          }
      }
  }
</code></pre></li>
</ul>
<p>启动程序即可得到测试结果，我们应该尽可能地让浏览器保持在最新的文档模式中工作，保持最好的 HTML 支持和 JS 性能。</p>
<p><strong>2013-05-22更新</strong>：WebBrowser 控件在显示大量文字的时候性能很差，原因未明。</p>

	 
	     <p style="margin:20px 0; color:#9f9f9f; font-size:12px;">
<span>Posted by <a style="color:#9f9f9f;" href="http://weibo.com/newdings/"><strong>@cmm是muffinman_</strong></a> - 5月 21 2013</span><br />
<span style="line-height:13px;">如需转载，请注明： 本文来自 <a style="color:#9f9f9f;" href="http://blog.edi-c.com"><strong>@chaoming.edc blog</strong></a></span>
</p>
       	 
      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  
<article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
  <header>
      
      
  
    <h1 class="title"><a href="/post/disable-compatibility-view-in-intranet-sites.html">禁此 IE 在本地 Intranet 站点中启用「兼容模式」</a></h1>
  

      <time datetime="2013-05-21T02:20:00.000Z"><a href="/post/disable-compatibility-view-in-intranet-sites.html">5月 21 2013</a></time>
      
  </header>
    <div class="entry">
      
        <p>设置过程比较简单，参考资料：<a href="http://blogs.msdn.com/b/askie/archive/2009/03/23/understanding-compatibility-modes-in-internet-explorer-8.aspx" target="_blank">http://blogs.msdn.com/b/askie/archive/2009/03/23/understanding-compatibility-modes-in-internet-explorer-8.aspx</a></p>
<p>我们只需要在工具栏中找到 <code>工具</code>-&gt;<code>兼容性视图设置</code>，打开设置菜单之后取消 <code>在兼容性视图中显示 Intranet 站点</code> 即可。</p>
<p><img src="http://blogs.msdn.com/blogfiles/askie/WindowsLiveWriter/UnderstandingCompatibilityModesinInterne_E16B/clip_image004_2.jpg" alt="setting"></p>
<p>{图片来自 MSDN Blog}</p>

	 
	     <p style="margin:20px 0; color:#9f9f9f; font-size:12px;">
<span>Posted by <a style="color:#9f9f9f;" href="http://weibo.com/newdings/"><strong>@cmm是muffinman_</strong></a> - 5月 21 2013</span><br />
<span style="line-height:13px;">如需转载，请注明： 本文来自 <a style="color:#9f9f9f;" href="http://blog.edi-c.com"><strong>@chaoming.edc blog</strong></a></span>
</p>
       	 
      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  
<article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
  <header>
      
      
  
    <h1 class="title"><a href="/post/page-reflow-tests.html">测定页面 Reflow 耗时的办法</a></h1>
  

      <time datetime="2013-05-21T01:24:00.000Z"><a href="/post/page-reflow-tests.html">5月 21 2013</a></time>
      
  </header>
    <div class="entry">
      
        <p>最近在查阅关于浏览器 Reflow 性能的资料，在《<a href="http://www.planabc.net/2009/04/13/reflow/" target="_blank">影响 reflow 的因素及其优化</a>》中看到这么一个测试页面 Reflow 性能的脚本：</p>
<pre><code><span class="built_in">var</span> a<span class="subst">=</span>document<span class="built_in">.</span>getElementById(<span class="string">'text'</span>);
a<span class="built_in">.</span>innerHTML <span class="subst">=</span> <span class="string">"text"</span>;
<span class="built_in">var</span> t0 <span class="subst">=</span> <span class="literal">new</span> <span class="built_in">Date</span>();
a<span class="built_in">.</span>offsetHeight;
<span class="built_in">var</span> t1 <span class="subst">=</span> <span class="literal">new</span> <span class="built_in">Date</span>();
alert(t1<span class="attribute">-t0</span>);
</code></pre><p>原理：通常 <code>offsetHeight</code> 总是要等 Reflow 完成才能计算出来，所以脚本会被阻塞直到 Reflow 完成。</p>

	 
	     <p style="margin:20px 0; color:#9f9f9f; font-size:12px;">
<span>Posted by <a style="color:#9f9f9f;" href="http://weibo.com/newdings/"><strong>@cmm是muffinman_</strong></a> - 5月 21 2013</span><br />
<span style="line-height:13px;">如需转载，请注明： 本文来自 <a style="color:#9f9f9f;" href="http://blog.edi-c.com"><strong>@chaoming.edc blog</strong></a></span>
</p>
       	 
      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>





<nav id="pagination">
  
    <a href="/page/2/" class="alignleft prev">上一页</a>
  
  
    <a href="/page/4/" class="alignright next">下一页</a>
  
</nav></div>
    </div>
    <div class="tabbar" onload="divideTabBar()">
	
      <div class="tabbaritem"><a class="next" href="/">Home</a></div>
    
      <div class="tabbaritem"><a class="next" href="/archives/">Archives</a></div>
    
      <div class="tabbaritem"><a class="next" href="/about/">About</a></div>
    
      <div class="tabbaritem"><a class="next" href="/atom.xml">Subscribe</a></div>
    
</div>


  </div>

  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  <script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.0.min.js"></script>
</body>
</html>