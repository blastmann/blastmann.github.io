<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>@chaoming.edc blog</title>
  <meta name="author" content="chaoming.edc|blastmann">
  
  <meta name="description" content="track my learning">
  
  
  <meta name="keywords" content="windowsphone,windows,xaml,developer,iOS,OSX,productive">
  
  

  

  <meta property="og:site_name" content="@chaoming.edc blog"/>
  <meta name="copyright" content="@chaoming.edc blog"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
    <meta property="og:image" content="undefined"/>
  
   <meta name="google-site-verification" content="nTpmJEYYJgba5eVrpd_dfj1W_Ayr-NjZ1vFvhi5aqzI" />
   <meta name="baidu-site-verification" content="QO84kHVH0w" />
   <link rel="apple-touch-icon" href="/icon.png" />
   <link rel="shortcut icon" href="/favicon.png" >
   <link rel="alternate" href="http://blog.edi-c.com/atom.xml" title="@chaoming.edc blog" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
</head>


<body>
  <div id="content" class="inner">
    <aside id="sidebar" class="alignleft">
      <div class="navigationBar">
        <a href="/">@chaoming.edc blog</a>
      </div>
    	
  <nav class="widget" id="menu">
	<ul>
    
      <li class="cell"><a class="next" href="/">Home</a><li>
    
      <li class="cell"><a class="next" href="/archives/">Archives</a><li>
    
      <li class="cell"><a class="next" href="/about/">About</a><li>
    
      <li class="cell"><a class="next" href="/atom.xml">Subscribe</a><li>
    
    </ul>
</nav>

  <div class="widget weibo">
<iframe width="100%" height="100" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=110&fansRow=2&ptype=1&speed=0&skin=1&isTitle=1&noborder=0&isWeibo=0&isFans=0&uid=newdings&verifier=78e1ee4d&colors=ffffff,ffffff,999,000,ecfbfd&dpc=1"></iframe>
</div>

  

  
<div class="widget tagcloud">
  <h3 class="title">标签云</h3>
  <div class="entry">
    <a href="/tags/IE/" style="font-size: 10.00px;">IE</a><a href="/tags/WPF/" style="font-size: 10.00px;">WPF</a><a href="/tags/alfred/" style="font-size: 10.00px;">alfred</a><a href="/tags/aspnet/" style="font-size: 10.00px;">aspnet</a><a href="/tags/browser/" style="font-size: 10.00px;">browser</a><a href="/tags/csharp/" style="font-size: 10.00px;">csharp</a><a href="/tags/css3/" style="font-size: 12.00px;">css3</a><a href="/tags/dev/" style="font-size: 10.00px;">dev</a><a href="/tags/diary/" style="font-size: 10.00px;">diary</a><a href="/tags/directx/" style="font-size: 10.00px;">directx</a><a href="/tags/fiddler/" style="font-size: 12.00px;">fiddler</a><a href="/tags/google/" style="font-size: 10.00px;">google</a><a href="/tags/ie/" style="font-size: 10.00px;">ie</a><a href="/tags/ie11/" style="font-size: 10.00px;">ie11</a><a href="/tags/javascript/" style="font-size: 10.00px;">javascript</a><a href="/tags/mac/" style="font-size: 10.00px;">mac</a><a href="/tags/markdown/" style="font-size: 10.00px;">markdown</a><a href="/tags/mvc/" style="font-size: 10.00px;">mvc</a><a href="/tags/note/" style="font-size: 10.00px;">note</a><a href="/tags/notes/" style="font-size: 16.00px;">notes</a><a href="/tags/plugin/" style="font-size: 10.00px;">plugin</a><a href="/tags/productivity/" style="font-size: 10.00px;">productivity</a><a href="/tags/programming/" style="font-size: 12.00px;">programming</a><a href="/tags/python/" style="font-size: 10.00px;">python</a><a href="/tags/reflow/" style="font-size: 10.00px;">reflow</a><a href="/tags/st2/" style="font-size: 16.00px;">st2</a><a href="/tags/summaries/" style="font-size: 10.00px;">summaries</a><a href="/tags/system/" style="font-size: 10.00px;">system</a><a href="/tags/vim/" style="font-size: 10.00px;">vim</a><a href="/tags/vs2012/" style="font-size: 10.00px;">vs2012</a><a href="/tags/web/" style="font-size: 10.00px;">web</a><a href="/tags/webdev/" style="font-size: 20.00px;">webdev</a><a href="/tags/windows/" style="font-size: 14.00px;">windows</a><a href="/tags/winrt/" style="font-size: 10.00px;">winrt</a><a href="/tags/workflow/" style="font-size: 10.00px;">workflow</a><a href="/tags/wp8/" style="font-size: 18.00px;">wp8</a><a href="/tags/wp8.1/" style="font-size: 10.00px;">wp8.1</a><a href="/tags/wpf/" style="font-size: 12.00px;">wpf</a><a href="/tags/xaml/" style="font-size: 10.00px;">xaml</a>
  </div>
</div>


    	<footer id="footer" class="inner"><div class="copyright">
  
  &copy; 2014 chaoming.edc|blastmann
  
</div>



<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-51731334-1', 'edi-c.com');
  ga('send', 'pageview');

</script></footer>
    </aside>


    <div id="hidden-navigationBar" class="navigationBar">
      <a href="/">@chaoming.edc blog</a>
    </div>
    <div id="main-col" class="alignright">
    <div id="wrapper">
      
  
<article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
  <header>
      
      
  
    <h1 class="title"><a href="/post/how-to-import-custom-font-in-wp8.html">WP8如何引用自定义字体</a></h1>
  

      <time datetime="2014-06-14T15:34:42.000Z"><a href="/post/how-to-import-custom-font-in-wp8.html">6月 14 2014</a></time>
      
  </header>
    <div class="entry">
      
        <h2 id="前言">前言</h2>
<p>最近重操故业，拿起了PS认真做了个App的设计图，然后就是把设计稿转化成App了。由于设计的时候使用了一些系统不存在的字体，所以只好研究怎么引入自定义的字体。</p>
<h2 id="说一下WP里面对字体的一个特殊处理">说一下WP里面对字体的一个特殊处理</h2>
<p>其实刚开始的时候也没有想着使用自定义字体的，毕竟也只是把Segoe这个字体压缩了一下，在PS里面将它设置成了Condensed。结果发现WP开发的时候，把<code>FontStretch</code>设置成<code>Condensed</code>是没有作用的。原因是：设置字体拉伸这个属性，对应的字体必须支持该样式（即需要Segoe Condensed这个字体），如果不支持，则不应用该属性。</p>
<p>于是，只能想想别的方法：把字体打包到应用里面吧。</p>
<h2 id="引入自定义字体">引入自定义字体</h2>
<p>有这么特殊的处理也就算了，在WP7开始可以正常使用的引用自定义字体的方法，在WP8下面竟然不适用。引用方法如下：</p>
<ol>
<li>将字体复制到工程中，建议使用”Fonts”目录存放</li>
<li>将字体文件在工程中的属性设置为Contents</li>
<li>在XAML文件中需要定义字体的地方，使用”Fonts/MyCustomFont.tff#MyCustomFont”这种语法进行引用</li>
</ol>
<p>需要注意的是：#后面的字体名需要自行打开该字体进行查看，字体名不等于文件名。</p>
<p>本来到这里，这文章也就完了，结果引用完了之后发现没有任何效果。于是继续Google，在<a href="http://nicksnettravels.builttoroam.com/post/2013/06/22/TTF-Font-with-Windows-Phone-8.aspx" target="_blank">TTF Font with Windows Phone 8</a>这文章里面，作者也遇到这个问题。他的最终解决方法是：使用<a href="http://birdfont.org/" target="_blank">BirdFont</a>软件修改字体，换个名字之后重新导出就可以正常引用了。该同学也不明白这是为什么。</p>
<p>PS：该文章里面使用的BirdFont原来是不需要收费的，但最新的版本已经是需要购买才能正常使用（不购买的话只能修改SIL协议下的字体）。不过费用也不贵，是以捐赠的形式进行购买的，最低只需要捐赠1美元就可以买到了。</p>
<p>PPS：这样修改过的字体不知道能不能在商业用途中使用，有这样的风险。</p>

	 
	     <p style="margin:20px 0; color:#9f9f9f; font-size:12px;">
<span>Posted by <a style="color:#9f9f9f;" href="http://weibo.com/newdings/"><strong>@cmm要给力</strong></a> - 6月 14 2014</span><br />
<span style="line-height:13px;">如需转载，请注明： 本文来自 <a style="color:#9f9f9f;" href="http://blog.edi-c.com"><strong>@chaoming.edc blog</strong></a></span>
</p>
       	 
      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  
<article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
  <header>
      
      
  
    <h1 class="title"><a href="/post/test-for-google.html">测试一下Google的索引</a></h1>
  

      <time datetime="2014-06-07T14:50:45.000Z"><a href="/post/test-for-google.html">6月 7 2014</a></time>
      
  </header>
    <div class="entry">
      
        <p>最近把Blog迁移到Github Pages之后，发现好几篇Post都没有及时收录。研究了一下，说是建议添加Sitemap都Google站长工具里面。</p>
<p>添加完之后，发布一篇post测试一下。</p>

	 
	     <p style="margin:20px 0; color:#9f9f9f; font-size:12px;">
<span>Posted by <a style="color:#9f9f9f;" href="http://weibo.com/newdings/"><strong>@cmm要给力</strong></a> - 6月 7 2014</span><br />
<span style="line-height:13px;">如需转载，请注明： 本文来自 <a style="color:#9f9f9f;" href="http://blog.edi-c.com"><strong>@chaoming.edc blog</strong></a></span>
</p>
       	 
      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  
<article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
  <header>
      
      
  
    <h1 class="title"><a href="/post/handle-scrollviewer-manipulation-events-in-winrt.html">WinRT下ScrollViewer的Manipulation事件如何响应</a></h1>
  

      <time datetime="2014-06-06T04:44:13.000Z"><a href="/post/handle-scrollviewer-manipulation-events-in-winrt.html">6月 6 2014</a></time>
      
  </header>
    <div class="entry">
      
        <h2 id="前言">前言</h2>
<p>WP 8.1发布了，并且官方也宣布了Universal App的开发方式。可以针对Windows 8.1和Windows Phone 8.1的同时开发一个项目。UI部分只需要简单适配一下就可以了，大部分API都是共用的（个人对8.1研究不大深入，这里说的只是个大概的理解，有错误请指正）。</p>
<h2 id="XAML_App和Silverlight_8-1">XAML App和Silverlight 8.1</h2>
<p>8.1环境下面，有个概念要搞清楚：XAML App和Silverlight App不是一回事。虽然大家都用XAML，但8.1 XAML App的UI模型和Silverlight的模型不大一样，而且XAML App支持使用C/C++进行UI编程，这样做起来好像是会对内存控制上好一点。</p>
<p>可惜的是，XAML App暂时还不能完全替代掉Silverlight App，但这肯定是一个趋势。而且看Silverlight App中控件的API在8.1下面基本没有增加（其实我也觉得XAML App里面的控件用起来更爽）。</p>
<h2 id="正题">正题</h2>
<p>说了那么多，下面讲一下这次的正题。在XAML App下，<code>UIElement</code>引入了<code>ManipulationMode</code>的概念。下面是官方解释：</p>
<blockquote>
<p>如果要处理操作事件（例如从您应用程序代码中 UI 元素的 ManipulationStarted），则必须将 ManipulationMode 设置为其他值，而不是 System 或 None。</p>
<p>ManipulationMode 的典型默认值为 System 而不是 None。该值为 System 时，源自该元素的操作可以由根据 直接操作API 的 Windows </p>
<p>]运行时基础结构处理。例如，ScrollViewer 按其控件逻辑处理用户操作，并将它们作为控件的滚动事件处理。System 值还可启用响应操作事件的个性动画。<br>Slider 和 ToggleSwitch 具有默认模板，将 ManipulationMode 值设置为 None，因此，None 将是在设计时所看到的默认值。</p>
<p>指定相关的操作模式<br>你可以在代码或 XAML 中使用所示的逗号语法将多个按标志的 ManipulationModes 值指定为 ManipulationMode 属性的值。例如，可以合并 TranslateX、TranslateY、Rotate 和 Scale，或者它们的任意组合。但是，并非所有组合都有效。仅当特定控件使用 ManipulationModes 后，才会强制实施有效性，因此设置存在的问题（ManipulationModes 的无效组合）不到运行时可能不会出现。不要合并 Translate<em> 值与 TranslateRails</em> 值，因为它们被视为独占值，不合并惯性值与非惯性值。All 值不是所有标志的实际附加值，因此，All 不一定表示所有值的组合有效，或已设置任何特定值。<br>在 Windows 8 上，如果将 ManipulationMode 设置为一个将 System 与其他值组合的值，将会引发异常。从 Windows 8.1 开始，你可以将 System 与其他值结合使用。</p>
</blockquote>
<p>简单理解为：如果我们想要使用<code>Manipulation**</code>事件的话，在使用时必须将该控件的<code>ManipulationMode</code>修改为非<code>System</code>和<code>None</code>，否则系统将会接管触摸事件。</p>
<p>那回到这次的主题，我们想在<code>ScrollViewer</code>上对它作水平方向的平移该怎么做呢？本来我以为只要在ScrollViewer上修改它的<code>ManipulationMode</code>就可以了，结果修改之后，并没有任何反应，绑定的<code>ManipulationDelta</code>事件并不会响应：</p>
<figure class="highlight xaml"><table><tr><td class="gutter"><pre>1
2
3
4
5
</pre></td><td class="code"><pre><span class="tag">&lt;<span class="title">ScrollViewer</span> <span class="attribute">x:Name</span>=<span class="value">"sv"</span> <span class="attribute">Height</span>=<span class="value">"200"</span> <span class="attribute">ManipulationMode</span>=<span class="value">"TranslateX"</span> <span class="attribute">ManipulationDelta</span>=<span class="value">"UIElement_OnManipulationDelta"</span>&gt;</span>
    <span class="tag">&lt;<span class="title">Border</span> <span class="attribute">Height</span>=<span class="value">"600"</span> <span class="attribute">Background</span>=<span class="value">"Red"</span>&gt;</span>
        <span class="tag">&lt;<span class="title">TextBlock</span>&gt;</span>1<span class="tag">&lt;/<span class="title">TextBlock</span>&gt;</span>
    <span class="tag">&lt;/<span class="title">Border</span>&gt;</span>
<span class="tag">&lt;/<span class="title">ScrollViewer</span>&gt;</span>
</pre></td></tr></table></figure>

<figure class="highlight csharp"><table><tr><td class="gutter"><pre>1
2
3
4
</pre></td><td class="code"><pre><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">UIElement_OnManipulationDelta</span>(<span class="keyword">object</span> sender, ManipulationDeltaRoutedEventArgs e)
{
    Debug.WriteLine(e.Delta.Translation.X);
}
</pre></td></tr></table></figure>

<p>后面想了一下，会不会是因为它的子控件<code>Border</code>上的事件被截获了呢？于是我又改了一下，在<code>Border</code>上绑定了一个<code>ManipulationDelta</code>事件，结果还是没有响应：</p>
<figure class="highlight xaml"><table><tr><td class="gutter"><pre>1
2
3
4
5
</pre></td><td class="code"><pre><span class="tag">&lt;<span class="title">ScrollViewer</span> <span class="attribute">x:Name</span>=<span class="value">"sv"</span> <span class="attribute">Height</span>=<span class="value">"200"</span> <span class="attribute">ManipulationMode</span>=<span class="value">"TranslateX"</span> <span class="attribute">ManipulationDelta</span>=<span class="value">"UIElement_OnManipulationDelta"</span>&gt;</span>
    <span class="tag">&lt;<span class="title">Border</span> <span class="attribute">Height</span>=<span class="value">"600"</span> <span class="attribute">Background</span>=<span class="value">"Red"</span> <span class="attribute">ManipulationDelta</span>=<span class="value">"BorderOnManipulationDelta"</span>&gt;</span>
        <span class="tag">&lt;<span class="title">TextBlock</span>&gt;</span>1<span class="tag">&lt;/<span class="title">TextBlock</span>&gt;</span>
    <span class="tag">&lt;/<span class="title">Border</span>&gt;</span>
<span class="tag">&lt;/<span class="title">ScrollViewer</span>&gt;</span>
</pre></td></tr></table></figure>

<p>于是我决定修改一下<code>Border</code>的<code>ManipulationMode</code>。发现如果修改成<code>All</code>，那<code>ScrollViewer</code>就无法正常滚动了，坑大发了。再次研读上面关于<code>ManipulationMode</code>的备注，发现这个属性的比较神奇，如果修改成非<code>System</code>外的值，那将由开发者自己去处理对应的触摸事件（这不就跟IE10开始使用那个坑爹属性<code>-ms-touch-action</code>一样吗？！）。不过XAML App里面对这个属性提供了一个神奇的使用方法：属性组合。也就是<code>ManipulationMode</code>这个属性里面，可以将多个模式组合使用。</p>
<p>也就是说<code>ManipulationMode</code>可以接受以下的设置方式：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre><span class="setting">ManipulationMode = <span class="value"><span class="string">"TranslateX,TranslateY,Rotate,Scale"</span></span></span>
</pre></td></tr></table></figure>

<p>那这时候<code>Manipulation**</code>事件会在响应的参数里面给出TranslateX\TranslateY\Rotate\Scale等相应的响应值。</p>
<p>回到主题：这属性跟<code>ScrollViewer</code>有什么关系啊？还是有点关系哈，看示例代码：</p>
<figure class="highlight xaml"><table><tr><td class="gutter"><pre>1
2
3
4
5
</pre></td><td class="code"><pre><span class="tag">&lt;<span class="title">ScrollViewer</span> <span class="attribute">x:Name</span>=<span class="value">"sv"</span> <span class="attribute">Height</span>=<span class="value">"200"</span> <span class="attribute">ManipulationDelta</span>=<span class="value">"UIElement_OnManipulationDelta"</span>&gt;</span>
    <span class="tag">&lt;<span class="title">Border</span> <span class="attribute">Height</span>=<span class="value">"600"</span> <span class="attribute">Background</span>=<span class="value">"Red"</span> <span class="attribute">ManipulationMode</span>=<span class="value">"System, TranslateX"</span>&gt;</span>
        <span class="tag">&lt;<span class="title">TextBlock</span>&gt;</span>1<span class="tag">&lt;/<span class="title">TextBlock</span>&gt;</span>
    <span class="tag">&lt;/<span class="title">Border</span>&gt;</span>
<span class="tag">&lt;/<span class="title">ScrollViewer</span>&gt;</span>
</pre></td></tr></table></figure>

<p>如果我对<code>ScrollViewer</code>的子控件添加<code>ManipulationMode=&quot;System,TranslateX</code>，那就相当于告诉系统：子控件的触摸事件除了水平方向之外，其它的都按照系统默认的响应处理。</p>
<p>这样一来，子控件就不会截获掉水平方向的触摸事件，而我在上层<code>ScrollViewer</code>的触摸事件绑定也可以正常响应了！</p>
<h3 id="备注">备注</h3>
<p>WinRT下面对触摸事件的处理感觉是怪怪的，没有以前直观。像<code>ScrollViewer</code>的触摸事件响应，如果按照此文的方法做处理，只能针对非滚动方向做截获。意思就是：如果你的<code>ScrollViewer</code>需要水平方向的滚动，那你加上对应的<code>ManipulationMode</code>之后，水平方向的触摸就会交给你自己做处理了，也就是！如果你什么都不处理，你的<code>ScrollViewer</code>就没有办法做水平滚动啦！</p>
<p>所以说，此法只适合在非滚动方向上的触摸事件响应。PS：有用过IE上那个<code>touch-action</code>属性的同学应该挺好理解这问题的。</p>

	 
	     <p style="margin:20px 0; color:#9f9f9f; font-size:12px;">
<span>Posted by <a style="color:#9f9f9f;" href="http://weibo.com/newdings/"><strong>@cmm要给力</strong></a> - 6月 6 2014</span><br />
<span style="line-height:13px;">如需转载，请注明： 本文来自 <a style="color:#9f9f9f;" href="http://blog.edi-c.com"><strong>@chaoming.edc blog</strong></a></span>
</p>
       	 
      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  
<article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
  <header>
      
      
  
    <h1 class="title"><a href="/post/functionkey-swithcher-workflow.html">一个在Mac上用于快速切换Function Key的Alfred Workflow</a></h1>
  

      <time datetime="2014-06-03T05:37:51.000Z"><a href="/post/functionkey-swithcher-workflow.html">6月 3 2014</a></time>
      
  </header>
    <div class="entry">
      
        <p>最近切换到iOS开发上，每天都在忍受着Xcode和VS之间的异同。Mac上有一些比较脑残的设置（虽然有时候会觉得挺方便）。不过对开发者影响比较大的还是Debug的时候，键盘顶部的Function Keys默认被设置成了OS X上的一些快捷方式。</p>
<p>虽然，MAS（Mac App Store）上有一款可以自动切换Function Key的软件（叫Puala），有兴趣可以自行下载（￥6）。不过Apple提供了AppleScript，可以对OS X系统、GUI等进行编程，快速实现想要的功能。本来是想自己写一个简单的脚本做处理的，结果查阅了一下各大网站，有人已经写过了。我就简单封装成Alfred Workflow，需要的同学自行下载安装。</p>
<p>使用方法：呼出Alfred之后，输入swfn回车即可将按钮功能切换成标准的Function Key。</p>
<p><a href="https://www.dropbox.com/s/ptdtvpsoa1gwzm2/Switch%20FunctionKeys.alfredworkflow" target="_blank">点击下载</a>。</p>

	 
	     <p style="margin:20px 0; color:#9f9f9f; font-size:12px;">
<span>Posted by <a style="color:#9f9f9f;" href="http://weibo.com/newdings/"><strong>@cmm要给力</strong></a> - 6月 3 2014</span><br />
<span style="line-height:13px;">如需转载，请注明： 本文来自 <a style="color:#9f9f9f;" href="http://blog.edi-c.com"><strong>@chaoming.edc blog</strong></a></span>
</p>
       	 
      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  
<article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
  <header>
      
      
  
    <h1 class="title"><a href="/post/effective-objetive-c-note.html">Effective Objective-C 阅读记录</a></h1>
  

      <time datetime="2014-05-24T04:31:59.000Z"><a href="/post/effective-objetive-c-note.html">5月 24 2014</a></time>
      
  </header>
    <div class="entry">
      
        <p>关键的最佳实践：</p>
<h2 id="第一章：了解OC">第一章：了解OC</h2>
<ol>
<li>Item 2: 减少头文件的引用：在.h文件中添加#import的时候，其它文件引用此.h文件时也会导入其它的头文件。此时可以使用@class转发声明，然后在.m中再引入该类的头文件。简单地说就是只在Implementation中进行头文件的引用，减少多重引用。使用这种方法声明的时候，如果外部需要访问该类的方法/属性，则需要再引用该类的头文件，否则会报错。</li>
<li>Item 4: 常量使用类型常量定义更好，减少使用宏定义。因为在头文件中定义宏的话，所有引用它的地方都会进行宏替换，相当于添加了一些不必要的暴露。</li>
</ol>
<h2 id="第二章：对象、消息和运行时">第二章：对象、消息和运行时</h2>
<ol>
<li>Item 9: 学会使用类簇，更好地 封装不同的数据和逻辑（书中介绍的是抽象类的使用）</li>
<li>Item 11: 理解objc_msgSend的作用<ul>
<li>OC中函数调用的流程中会应用到动态绑定</li>
<li>OC中的函数调用声明，最终都是使用objc_msgSend()函数进行消息发送的。</li>
</ul>
</li>
<li><p>Item 12: 理解消息转发的过程</p>
<ul>
<li>当一个对象接收一个它不明白的方法，对象会开始消息转发，根据对象的继承关系进行消息转发，最终传递至根对象（一般是NSObject）。如果找不到实现的方法，则Runtime最终会抛出异常。</li>
<li>消息转发有两种途径。<ul>
<li>动态方法解析：当一个对接收到了一个未知的类方法 调用时，对象会执行resolveInstanceMethod进行方法的动态解析，此时会在类中查找已经实现的接口。（必须注意，调用的方法一定要有实现，否则会失败进入第二阶段的查找）</li>
<li>接收者替换：当动态查找无法找到指定Selector方法时，接收者可以指定一个方法替换者进行消息转发。具体会使用forwardingTargetForSelector这个方法。</li>
<li>完全转发机制（Full Forwarding Mechanism）：触发此机制时，Runtime会创建一个NSInvocation对象（内含Selector\Object\Arguments），使用forwardInvocation进行对象的转发，最终成功调用时可以直接对NSInvocation对象进行Invoke</li>
</ul>
</li>
</ul>
</li>
<li><p>Item 12: 消息转发过程中，Selector对应的名字有可能发生改变。</p>
</li>
<li>Item 14: 理解OC中的Class Object：OC中的对象声明基本都是使用指针，对象比较时优先使用内省函数，避免部分对象重写了消息转发流程引发错误的消息转发。</li>
</ol>
<h3 id="第三章：接口和API设计">第三章：接口和API设计</h3>
<ol>
<li>Item 15: 使用正确的前缀，避免使用命名空间。因为OC中并不存在命名空间的概念，因此如果前缀使用不正确，将会导致程序链接出错（函数符号名称有可能发生重复，导致链接错误）。即使是没有在头文件中声明的函数，也会出现在符号表中的（本来就没有private的概念）。</li>
<li>Item 17: 重写description方法可以方便输出对象的信息</li>
<li>Item 21: 理解OC的异常模型：即使使用ARC的情况下，应用执行时如果抛出异常信息，则异常对象前的资源不会正常释放，容易造成内存泄漏。建议是使用NSError进行普通异常信息传递，出现严重异常时才向外抛出NSException。使用NSError时，需要在API中传入NSError对象。</li>
<li>Item 22: 理解NSCopying协议：实现NSCopying协议时，建议都是重写copyWithZone:，而且需要仔细检查对象内部的变量是需要浅复制还是深复制。</li>
</ol>
<h2 id="第四章：协议和分类">第四章：协议和分类</h2>
<ol>
<li>Item 23: 对象间通信请使用Delegate或Data Source Protocols：使用delegate时，注意声明过程中必须将delegate声明为weak，否则会造成循环引用。</li>
<li>Item 27: 使用class-continuation category来隐藏实现细节。</li>
<li>Item 28: 使用协议来提供匿名对象（暂时未明白怎么做）</li>
</ol>
<h2 id="第五章：内存管理">第五章：内存管理</h2>
<ol>
<li>Item 29: 理解引用计数。</li>
<li>Item 31: 只在dealloc中进行引用解除和KVO清理。如果一个对象持有了系统资源（如文件描述符），则此类对象应该有一个统一的cleanup\close接口，便于调用它的对象在使用完成后释放相关的系统资源。另外，不建议在dealloc方法中调用当前对象的方法，因为当前对象在进入dealloc时一般处于生命周期要结束的时候，调用其它方法有可能在方法未完成调用的时候出现对象被回收的情况，导致应用crash。</li>
<li>Item 32: 注意异常处理流程时的内存管理。在ARC下，我们会以为try/catch语句在使用时，系统会自动处理掉异常抛出前的对象释放，实际不会！而且在ARC下，我们不能在finally语句中手动调用release方法，这样会导致明显的内存泄漏（这不是Bug吗？！）。EOC建议是使用NSError代替大部分NSException，如果真的需要捕获异常，则建议打开-fobjc-arc-exceptions。</li>
<li>Item 33: 使用弱引用避免发生循环引用。</li>
<li>Item 35: 使用僵尸对象来帮助调试内存问题。Cocoa框架有一个“僵尸”特性，当调试启用时，</li>
</ol>
<h2 id="第六章：block和GCD">第六章：block和GCD</h2>
<ol>
<li>Item 37: 理解block。block跟C#里面的委托差不多，定义之后会引用作用域外的变量。需要注意的是：<ul>
<li>block中引用的外部变量不能在block中进行修改（除非变量声明为__block）。</li>
<li>block的声明一般是分配在栈上，如果在if/else语句（即不同的作用域中）进行block的赋值，则有可能造成函数调用出错。如果真要这样使用，建议在赋值时添加copy，将block分配到堆中（此时则需要注意block的生命周期）。</li>
<li>如果block在定义的时候没有捕获到任何外部变量，则block会转化成全局block。全局block永远不会回收（单例对象）。</li>
</ul>
</li>
<li>Item 38: 使用typedefs来定义常用block类型。例子：<figure class="highlight objective-c"><table><tr><td class="gutter"><pre>1
2
</pre></td><td class="code"><pre><span class="keyword">typedef</span> <span class="keyword">int</span>(^EOCSomeBlock)(<span class="built_in">BOOL</span> flag, <span class="keyword">int</span> value);  
EOCSomeBlock block = ^(<span class="built_in">BOOL</span> flag, <span class="keyword">int</span> value){ <span class="comment">// implementation };</span>
</pre></td></tr></table></figure></li>
<li>Item 42: 使用GCD替代performSelector及其相关。在if/else语句中为selector进行赋值，有可能会导致在ARC环境下面出现内存泄漏。原因是在if/else中使用selector时，编译器不确定selector的类型，进而无法确定performSelector能否正常执行，使得ARC不知道该 对象能否正常释放导致编译时没有添加release语句，导致了泄漏。</li>
<li>Item 43: 合理使用GCD和Operation Queue。原因：<ul>
<li>使用NSOperation的时候，可以通过设置内部的标识来中止任务，但GCD只要加入队列后就无法取消（Fire and Forget）。</li>
<li>任务间依赖。NSOperation可以设置不同的任务间有依赖关系。</li>
<li>Key-Value观察。</li>
<li>任务优先级。NSOperation可以设置优先级，通过优先级的设置来调整任务的顺序。GCD没有现成的方法来达到这一目的，它的优先级设置是面对整个任务队列的，无法设置队列内每个block独自的优先级。</li>
<li>重用性。除非你使用了SDK提供的NSOperation子类（如NSBlockOperation），否则你需要自己实现一个子类。</li>
</ul>
</li>
<li>Item 44: 使用Dispatch Group。（未明白到底有什么具体好处）</li>
<li>Item 45: 使用dispatch_once 来进行线程安全一次性代码执行。具体应用在单例模式中。</li>
<li>Item 46: 避免使用dispatch_get_current_queue。原因是在使用dispatch_sync的时候如果发生dispatch_get_current_queue，将会导致死锁。（不知道理解得对不对，因为书里面介绍的情况比较多）。</li>
</ol>
<h2 id="第7章_-_系统框架">第7章 - 系统框架</h2>
<ol>
<li>Item 48: 使用迭代器块取代for循环。<ul>
<li>快速迭代。类似C#里面的foreach，只要使用for-in语法即可，用来遍历NSArray比较方便。</li>
<li>使用block进行遍历。内建的几个集合类都支持使用block进行遍历，这样遍历的时候有时会比使用for-in更方便。还支持使用NSEnumerationOptions进行反向遍历或并行遍历。</li>
</ul>
</li>
<li>Item 49: Use toll-free bridging for collections with custom memory-management semantics（不是很明白在说什么）<ul>
<li>__bridge：ARC仍然对该OC对象有拥有权。</li>
<li>__bridge_retained：ARC将拥有权交出（后续处理需要用户自行释放，使用CFRelease）</li>
<li>__bridge_transfer：将拥有权交给ARC</li>
</ul>
</li>
<li>Item 50: 使用NSCache代替NSDictionary作为缓存。</li>
<li>Item 51: 让initialize和load的函数实现保持简洁。</li>
<li>Item 52: NSTimer会保持对象的引用。如果一个对象内建NSTimer，Timer本身对该对象有引用，则会引发循环引用。导致对象本身在外部引用移除后，仍然不能被释放。使用block可以一定程度上解决这问题。使用Category拓展NSTimer，添加一个使用block的静态方法。</li>
</ol>

	 
	     <p style="margin:20px 0; color:#9f9f9f; font-size:12px;">
<span>Posted by <a style="color:#9f9f9f;" href="http://weibo.com/newdings/"><strong>@cmm要给力</strong></a> - 5月 24 2014</span><br />
<span style="line-height:13px;">如需转载，请注明： 本文来自 <a style="color:#9f9f9f;" href="http://blog.edi-c.com"><strong>@chaoming.edc blog</strong></a></span>
</p>
       	 
      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  
<article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
  <header>
      
      
  
    <h1 class="title"><a href="/post/move-my-blog-to-github.html">将我的Blog迁移到Github Pages上了</a></h1>
  

      <time datetime="2014-05-23T17:35:02.000Z"><a href="/post/move-my-blog-to-github.html">5月 24 2014</a></time>
      
  </header>
    <div class="entry">
      
        <p>一直觉得Scriptogr.am的服务很不稳定，特别是使用了DNSPod的提示之后，经常收到DNSPod发来的宕机提醒。最近受附近的小哥影响，终于下决心把Blog迁移到Github上了。</p>
<p>使用的静态博客程序是Hexo，生成速度不错。暂时还是使用别人制作的博客主题，过段时间慢慢修改吧。</p>
<p>不早了，该睡觉了。</p>

	 
	     <p style="margin:20px 0; color:#9f9f9f; font-size:12px;">
<span>Posted by <a style="color:#9f9f9f;" href="http://weibo.com/newdings/"><strong>@cmm要给力</strong></a> - 5月 24 2014</span><br />
<span style="line-height:13px;">如需转载，请注明： 本文来自 <a style="color:#9f9f9f;" href="http://blog.edi-c.com"><strong>@chaoming.edc blog</strong></a></span>
</p>
       	 
      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  
<article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
  <header>
      
      
  
    <h1 class="title"><a href="/post/using-mklink-to-migrate-windows-phone-emulator-images.html">使用mklink迁移Windows Phone SDK的模拟器镜像</a></h1>
  

      <time datetime="2014-02-27T03:47:00.000Z"><a href="/post/using-mklink-to-migrate-windows-phone-emulator-images.html">2月 27 2014</a></time>
      
  </header>
    <div class="entry">
      
        <p>自从Windows 7引入mklink命令后，再也不用担心系统盘的空间不足了。本来我个人对所有要安装的软件的态度都是放在系统盘里面的，毕竟系统重装之后软件基本都要重装，而且即使安装的时候使用别的盘，安装程序仍然会把部分数据放到系统盘内。但是后来却出现了开发环境占用硬盘空间太多的问题（还是因为系统分区分得太小了），于是开始把部分开发环境的数据迁移到另外的分区里面。</p>
<p>模拟器镜像的位置在<code>C:\Program Files (x86)\Microsoft SDKs\Windows Phone</code>，主要占空间的几个大头都是v8.x里面的Emulator目录。迁移的时候只需把目录剪切到别的分区中，然后运行下面的命令建立对应目录的符号链接即可。由于GDR2和GDR3目录下面都只存放了模拟器镜像，所以下面的命令中是直接对这两个目录进行符号链接。</p>
<p>示例（请使用管理员权限运行）：</p>
<pre><code>mklink /D "C:<span class="command">\Program</span> Files (x86)<span class="command">\Microsoft</span> SDKs<span class="command">\Windows</span> Phone<span class="command">\v</span>8.0<span class="command">\Emulator</span>" "D:<span class="command">\Program</span> Files (x86)<span class="command">\Microsoft</span> SDKs<span class="command">\Windows</span> Phone<span class="command">\v</span>8.0<span class="command">\Emulator</span>"
mklink /D "C:<span class="command">\Program</span> Files (x86)<span class="command">\Microsoft</span> SDKs<span class="command">\Windows</span> Phone<span class="command">\v</span>8.0GDR2" "D:<span class="command">\Program</span> Files (x86)<span class="command">\Microsoft</span> SDKs<span class="command">\Windows</span> Phone<span class="command">\v</span>8.0GDR2"
mklink /D "C:<span class="command">\Program</span> Files (x86)<span class="command">\Microsoft</span> SDKs<span class="command">\Windows</span> Phone<span class="command">\v</span>8.0GDR3" "D:<span class="command">\Program</span> Files (x86)<span class="command">\Microsoft</span> SDKs<span class="command">\Windows</span> Phone<span class="command">\v</span>8.0GDR3"
mklink /D "C:<span class="command">\Users</span><span class="command">\xxx</span><span class="command">\AppData</span><span class="command">\Local</span><span class="command">\Microsoft</span><span class="command">\XDE</span>" "D:<span class="command">\AppData</span><span class="command">\Local</span><span class="command">\Microsoft</span><span class="command">\XDE</span>"
</code></pre><p>相关资料：</p>
<ol>
<li><a href="http://technet.microsoft.com/zh-cn/library/cc753194(v=ws.10" target="_blank">关于mklink命令</a>.aspx)</li>
<li><a href="http://technet.microsoft.com/zh-cn/library/cc754077(v=WS.10" target="_blank">关于符号链接</a>.aspx)</li>
</ol>

	 
	     <p style="margin:20px 0; color:#9f9f9f; font-size:12px;">
<span>Posted by <a style="color:#9f9f9f;" href="http://weibo.com/newdings/"><strong>@cmm要给力</strong></a> - 2月 27 2014</span><br />
<span style="line-height:13px;">如需转载，请注明： 本文来自 <a style="color:#9f9f9f;" href="http://blog.edi-c.com"><strong>@chaoming.edc blog</strong></a></span>
</p>
       	 
      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  
<article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
  <header>
      
      
  
    <h1 class="title"><a href="/post/some-csharp-singleton-snippets.html">几个C#单例模式的Snippet</a></h1>
  

      <time datetime="2014-01-23T10:31:00.000Z"><a href="/post/some-csharp-singleton-snippets.html">1月 23 2014</a></time>
      
  </header>
    <div class="entry">
      
        <p>其实本来不大想做这几个Snippet，但是看了一下ReSharper里面的Template Explorer实在是用起来怪怪的，官方文档又说得不清不楚的。只好先从VS里面自带的模板弄出几个Snippet，模仿着写了四个Singleton，下面贴一下吧。</p>
<ol>
<li><p>静态初始化单例</p>
<pre><code> <span class="pi">&lt;?xml version="1.0" encoding="utf-8" ?&gt;</span>
 <span class="tag">&lt;<span class="title">CodeSnippets</span>  <span class="attribute">xmlns</span>=<span class="value">"http://schemas.microsoft.com/VisualStudio/2005/CodeSnippet"</span>&gt;</span>
     <span class="tag">&lt;<span class="title">CodeSnippet</span> <span class="attribute">Format</span>=<span class="value">"1.0.0"</span>&gt;</span>
         <span class="tag">&lt;<span class="title">Header</span>&gt;</span>
             <span class="tag">&lt;<span class="title">Title</span>&gt;</span>Static Singleton<span class="tag">&lt;/<span class="title">Title</span>&gt;</span>
             <span class="tag">&lt;<span class="title">Shortcut</span>&gt;</span>ston<span class="tag">&lt;/<span class="title">Shortcut</span>&gt;</span>
             <span class="tag">&lt;<span class="title">Description</span>&gt;</span>Code snippet for singleton<span class="tag">&lt;/<span class="title">Description</span>&gt;</span>
             <span class="tag">&lt;<span class="title">Author</span>&gt;</span>chaoming.edc<span class="tag">&lt;/<span class="title">Author</span>&gt;</span>
             <span class="tag">&lt;<span class="title">SnippetTypes</span>&gt;</span>
                 <span class="tag">&lt;<span class="title">SnippetType</span>&gt;</span>Expansion<span class="tag">&lt;/<span class="title">SnippetType</span>&gt;</span>
             <span class="tag">&lt;/<span class="title">SnippetTypes</span>&gt;</span>
         <span class="tag">&lt;/<span class="title">Header</span>&gt;</span>
         <span class="tag">&lt;<span class="title">Snippet</span>&gt;</span>
             <span class="tag">&lt;<span class="title">Declarations</span>&gt;</span>
                 <span class="tag">&lt;<span class="title">Literal</span> <span class="attribute">Editable</span>=<span class="value">"false"</span>&gt;</span>
                     <span class="tag">&lt;<span class="title">ID</span>&gt;</span>classname<span class="tag">&lt;/<span class="title">ID</span>&gt;</span>
                     <span class="tag">&lt;<span class="title">ToolTip</span>&gt;</span>Class name<span class="tag">&lt;/<span class="title">ToolTip</span>&gt;</span>
                     <span class="tag">&lt;<span class="title">Function</span>&gt;</span>ClassName()<span class="tag">&lt;/<span class="title">Function</span>&gt;</span>
                     <span class="tag">&lt;<span class="title">Default</span>&gt;</span>ClassNamePlaceholder<span class="tag">&lt;/<span class="title">Default</span>&gt;</span>
                 <span class="tag">&lt;/<span class="title">Literal</span>&gt;</span>
             <span class="tag">&lt;/<span class="title">Declarations</span>&gt;</span>
             <span class="tag">&lt;<span class="title">Code</span> <span class="attribute">Language</span>=<span class="value">"csharp"</span>&gt;</span><span class="cdata">&lt;![CDATA[/// &lt;summary&gt;
     /// 静态初始化，依赖CLR实现线程安全的实例初始化
     /// &lt;/summary&gt;
     private static readonly $classname$ instance = new $classname$();
     private $classname$() { }
     public static $classname$ Instance
     {
         get
         {
             return instance;
         }
     }
     $end$]]&gt;</span>
             <span class="tag">&lt;/<span class="title">Code</span>&gt;</span>
         <span class="tag">&lt;/<span class="title">Snippet</span>&gt;</span>
     <span class="tag">&lt;/<span class="title">CodeSnippet</span>&gt;</span>
 <span class="tag">&lt;/<span class="title">CodeSnippets</span>&gt;</span>
</code></pre></li>
<li><p>Double-Check单例</p>
<pre><code> <span class="pi">&lt;?xml version="1.0" encoding="utf-8" ?&gt;</span>
 <span class="tag">&lt;<span class="title">CodeSnippets</span>  <span class="attribute">xmlns</span>=<span class="value">"http://schemas.microsoft.com/VisualStudio/2005/CodeSnippet"</span>&gt;</span>
     <span class="tag">&lt;<span class="title">CodeSnippet</span> <span class="attribute">Format</span>=<span class="value">"1.0.0"</span>&gt;</span>
         <span class="tag">&lt;<span class="title">Header</span>&gt;</span>
             <span class="tag">&lt;<span class="title">Title</span>&gt;</span>Double-Check Singleton<span class="tag">&lt;/<span class="title">Title</span>&gt;</span>
             <span class="tag">&lt;<span class="title">Shortcut</span>&gt;</span>dston<span class="tag">&lt;/<span class="title">Shortcut</span>&gt;</span>
             <span class="tag">&lt;<span class="title">Description</span>&gt;</span>Code snippet for singleton<span class="tag">&lt;/<span class="title">Description</span>&gt;</span>
             <span class="tag">&lt;<span class="title">Author</span>&gt;</span>chaoming.edc<span class="tag">&lt;/<span class="title">Author</span>&gt;</span>
             <span class="tag">&lt;<span class="title">SnippetTypes</span>&gt;</span>
                 <span class="tag">&lt;<span class="title">SnippetType</span>&gt;</span>Expansion<span class="tag">&lt;/<span class="title">SnippetType</span>&gt;</span>
             <span class="tag">&lt;/<span class="title">SnippetTypes</span>&gt;</span>
         <span class="tag">&lt;/<span class="title">Header</span>&gt;</span>
         <span class="tag">&lt;<span class="title">Snippet</span>&gt;</span>
             <span class="tag">&lt;<span class="title">Declarations</span>&gt;</span>
                 <span class="tag">&lt;<span class="title">Literal</span> <span class="attribute">Editable</span>=<span class="value">"false"</span>&gt;</span>
                     <span class="tag">&lt;<span class="title">ID</span>&gt;</span>classname<span class="tag">&lt;/<span class="title">ID</span>&gt;</span>
                     <span class="tag">&lt;<span class="title">ToolTip</span>&gt;</span>Class name<span class="tag">&lt;/<span class="title">ToolTip</span>&gt;</span>
                     <span class="tag">&lt;<span class="title">Function</span>&gt;</span>ClassName()<span class="tag">&lt;/<span class="title">Function</span>&gt;</span>
                     <span class="tag">&lt;<span class="title">Default</span>&gt;</span>ClassNamePlaceholder<span class="tag">&lt;/<span class="title">Default</span>&gt;</span>
                 <span class="tag">&lt;/<span class="title">Literal</span>&gt;</span>
             <span class="tag">&lt;/<span class="title">Declarations</span>&gt;</span>
             <span class="tag">&lt;<span class="title">Code</span> <span class="attribute">Language</span>=<span class="value">"csharp"</span>&gt;</span><span class="cdata">&lt;![CDATA[private static object syncRoot = new object();
     private static $classname$ instance;
     private $classname$() { }

     /// &lt;summary&gt;
     /// Double-Check Singleton
     /// &lt;/summary&gt;
     public static $classname$ Instance
     {
         get
         {
             if(instance == null)
             {
                 lock(syncRoot)
                 {
                     if(instance == null)
                     {
                         instance = new $classname$();
                     }
                 }
             }
             return instance;
         }
     }
     $end$]]&gt;</span>
             <span class="tag">&lt;/<span class="title">Code</span>&gt;</span>
         <span class="tag">&lt;/<span class="title">Snippet</span>&gt;</span>
     <span class="tag">&lt;/<span class="title">CodeSnippet</span>&gt;</span>
 <span class="tag">&lt;/<span class="title">CodeSnippets</span>&gt;</span>
</code></pre></li>
<li><p>Nested单例</p>
<pre><code> <span class="pi">&lt;?xml version="1.0" encoding="utf-8" ?&gt;</span>
 <span class="tag">&lt;<span class="title">CodeSnippets</span>  <span class="attribute">xmlns</span>=<span class="value">"http://schemas.microsoft.com/VisualStudio/2005/CodeSnippet"</span>&gt;</span>
     <span class="tag">&lt;<span class="title">CodeSnippet</span> <span class="attribute">Format</span>=<span class="value">"1.0.0"</span>&gt;</span>
         <span class="tag">&lt;<span class="title">Header</span>&gt;</span>
             <span class="tag">&lt;<span class="title">Title</span>&gt;</span>Nested Singleton<span class="tag">&lt;/<span class="title">Title</span>&gt;</span>
             <span class="tag">&lt;<span class="title">Shortcut</span>&gt;</span>nston<span class="tag">&lt;/<span class="title">Shortcut</span>&gt;</span>
             <span class="tag">&lt;<span class="title">Description</span>&gt;</span>Code snippet for singleton<span class="tag">&lt;/<span class="title">Description</span>&gt;</span>
             <span class="tag">&lt;<span class="title">Author</span>&gt;</span>chaoming.edc<span class="tag">&lt;/<span class="title">Author</span>&gt;</span>
             <span class="tag">&lt;<span class="title">SnippetTypes</span>&gt;</span>
                 <span class="tag">&lt;<span class="title">SnippetType</span>&gt;</span>Expansion<span class="tag">&lt;/<span class="title">SnippetType</span>&gt;</span>
             <span class="tag">&lt;/<span class="title">SnippetTypes</span>&gt;</span>
         <span class="tag">&lt;/<span class="title">Header</span>&gt;</span>
         <span class="tag">&lt;<span class="title">Snippet</span>&gt;</span>
             <span class="tag">&lt;<span class="title">Declarations</span>&gt;</span>
                 <span class="tag">&lt;<span class="title">Literal</span> <span class="attribute">Editable</span>=<span class="value">"false"</span>&gt;</span>
                     <span class="tag">&lt;<span class="title">ID</span>&gt;</span>classname<span class="tag">&lt;/<span class="title">ID</span>&gt;</span>
                     <span class="tag">&lt;<span class="title">ToolTip</span>&gt;</span>Class name<span class="tag">&lt;/<span class="title">ToolTip</span>&gt;</span>
                     <span class="tag">&lt;<span class="title">Function</span>&gt;</span>ClassName()<span class="tag">&lt;/<span class="title">Function</span>&gt;</span>
                     <span class="tag">&lt;<span class="title">Default</span>&gt;</span>ClassNamePlaceholder<span class="tag">&lt;/<span class="title">Default</span>&gt;</span>
                 <span class="tag">&lt;/<span class="title">Literal</span>&gt;</span>
             <span class="tag">&lt;/<span class="title">Declarations</span>&gt;</span>
             <span class="tag">&lt;<span class="title">Code</span> <span class="attribute">Language</span>=<span class="value">"csharp"</span>&gt;</span><span class="cdata">&lt;![CDATA[private $classname$() { }
     public static $classname$ Instance
     {
         get
         {
             return Nested.instance;
         }
     }

     private class Nested
     {
         // Explicit static constructor to tell C# compiler
         // not to mark type as before field init
         static Nested()
         {
         }

         internal static readonly $classname$ instance = new $classname$();
     }
     $end$]]&gt;</span>
             <span class="tag">&lt;/<span class="title">Code</span>&gt;</span>
         <span class="tag">&lt;/<span class="title">Snippet</span>&gt;</span>
     <span class="tag">&lt;/<span class="title">CodeSnippet</span>&gt;</span>
 <span class="tag">&lt;/<span class="title">CodeSnippets</span>&gt;</span>
</code></pre></li>
<li><p>Lazy<T>单例</p>
<pre><code> <span class="pi">&lt;?xml version="1.0" encoding="utf-8" ?&gt;</span>
 <span class="tag">&lt;<span class="title">CodeSnippets</span>  <span class="attribute">xmlns</span>=<span class="value">"http://schemas.microsoft.com/VisualStudio/2005/CodeSnippet"</span>&gt;</span>
     <span class="tag">&lt;<span class="title">CodeSnippet</span> <span class="attribute">Format</span>=<span class="value">"1.0.0"</span>&gt;</span>
         <span class="tag">&lt;<span class="title">Header</span>&gt;</span>
             <span class="tag">&lt;<span class="title">Title</span>&gt;</span>Lazy Static Singleton<span class="tag">&lt;/<span class="title">Title</span>&gt;</span>
             <span class="tag">&lt;<span class="title">Shortcut</span>&gt;</span>lston<span class="tag">&lt;/<span class="title">Shortcut</span>&gt;</span>
             <span class="tag">&lt;<span class="title">Description</span>&gt;</span>Code snippet for singleton<span class="tag">&lt;/<span class="title">Description</span>&gt;</span>
             <span class="tag">&lt;<span class="title">Author</span>&gt;</span>chaoming.edc<span class="tag">&lt;/<span class="title">Author</span>&gt;</span>
             <span class="tag">&lt;<span class="title">SnippetTypes</span>&gt;</span>
                 <span class="tag">&lt;<span class="title">SnippetType</span>&gt;</span>Expansion<span class="tag">&lt;/<span class="title">SnippetType</span>&gt;</span>
             <span class="tag">&lt;/<span class="title">SnippetTypes</span>&gt;</span>
         <span class="tag">&lt;/<span class="title">Header</span>&gt;</span>
         <span class="tag">&lt;<span class="title">Snippet</span>&gt;</span>
             <span class="tag">&lt;<span class="title">Declarations</span>&gt;</span>
                 <span class="tag">&lt;<span class="title">Literal</span> <span class="attribute">Editable</span>=<span class="value">"false"</span>&gt;</span>
                     <span class="tag">&lt;<span class="title">ID</span>&gt;</span>classname<span class="tag">&lt;/<span class="title">ID</span>&gt;</span>
                     <span class="tag">&lt;<span class="title">ToolTip</span>&gt;</span>Class name<span class="tag">&lt;/<span class="title">ToolTip</span>&gt;</span>
                     <span class="tag">&lt;<span class="title">Function</span>&gt;</span>ClassName()<span class="tag">&lt;/<span class="title">Function</span>&gt;</span>
                     <span class="tag">&lt;<span class="title">Default</span>&gt;</span>ClassNamePlaceholder<span class="tag">&lt;/<span class="title">Default</span>&gt;</span>
                 <span class="tag">&lt;/<span class="title">Literal</span>&gt;</span>
             <span class="tag">&lt;/<span class="title">Declarations</span>&gt;</span>
             <span class="tag">&lt;<span class="title">Code</span> <span class="attribute">Language</span>=<span class="value">"csharp"</span>&gt;</span><span class="cdata">&lt;![CDATA[/// &lt;summary&gt;
     /// 静态初始化，依赖CLR实现线程安全的实例初始化，利用Lazy&lt;T&gt;实现懒初始化，但需要.NET4以上支持
     /// &lt;/summary&gt;
     private static readonly Lazy&lt;$classname$&gt; instance = new Lazy&lt;$classname$&gt;(() =&gt; new $classname$());
     private $classname$() { }
     public static $classname$ Instance
     {
         get
         {
             return instance.Value;
         }
     }
     $end$]]&gt;</span>
             <span class="tag">&lt;/<span class="title">Code</span>&gt;</span>
         <span class="tag">&lt;/<span class="title">Snippet</span>&gt;</span>
     <span class="tag">&lt;/<span class="title">CodeSnippet</span>&gt;</span>
 <span class="tag">&lt;/<span class="title">CodeSnippets</span>&gt;</span>
</code></pre></li>
</ol>
<p>下载链接：<a href="https://www.dropbox.com/s/nfreaxro1jzsb80/Singleton%20Snippets.7z" target="_blank">https://www.dropbox.com/s/nfreaxro1jzsb80/Singleton%20Snippets.7z</a></p>

	 
	     <p style="margin:20px 0; color:#9f9f9f; font-size:12px;">
<span>Posted by <a style="color:#9f9f9f;" href="http://weibo.com/newdings/"><strong>@cmm要给力</strong></a> - 1月 23 2014</span><br />
<span style="line-height:13px;">如需转载，请注明： 本文来自 <a style="color:#9f9f9f;" href="http://blog.edi-c.com"><strong>@chaoming.edc blog</strong></a></span>
</p>
       	 
      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  
<article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
  <header>
      
      
  
    <h1 class="title"><a href="/post/windows8-and-micron-m4-ssd-firmware-bug.html">Windows 8.1与镁光M4 SSD固件Bug</a></h1>
  

      <time datetime="2014-01-20T07:20:00.000Z"><a href="/post/windows8-and-micron-m4-ssd-firmware-bug.html">1月 20 2014</a></time>
      
  </header>
    <div class="entry">
      
        <p>最近家里的机器经常出现休眠之后无法开机的问题，刚开始的时候以为BIOS里面设置有问题，重置了一下发现还是会出现类似的问题。于是开始怀疑是不是硬盘的问题，然后想起上次刷SSD固件时候已经大半年之前了。查了一下镁光官网的固件更新，发现M4的固件又更新了好几次。最近一次更新说明里面有这么一段：</p>
<blockquote>
<p>该固件解决了一个电源时序问题，该问题可能会导致电脑从休眠会睡眠状态唤醒时引起固态硬盘挂起，导致无法与主机进行通信（丢盘现象）。</p>
</blockquote>
<p>于是去<a href="http://www.crucial.com/support/firmware.aspx" target="_blank">镁光官网查找一下新的固件</a>，下载更新程序之后在Windows下直接更新即可。</p>
<p>PS：但是更新程序在更新过程里面有可能提示更新失败，然后重启之后却发现固件版本号变了。只能当作更新成功了吧~</p>
<p>更新完固件之后还以为Bug已经修复了，结果后面又出现了两次死机，关机之后系统就出问题了。本来想重装系统，但手上又没有完整的安装盘，于是只能跑一下<code>sfc</code>尝试修复。相关链接：<a href="http://support.microsoft.com/kb/929833" target="_blank">使用系统文件检查器工具修复丢失或损坏的系统文件</a>。</p>
<p>在运行<code>sfc /scannow</code>之后，提示<code>urlmon.dll</code>无法修复（有的时候需要打开C:\Windows\Logs\CBS\CBS.log，搜索文件中记录文件无法修复的日志项，查出损坏的文件）。在Windows 8.1下面，如果这个文件损坏了，系统里面很多程序都会出现无法启动的情况，像IE、搜索、Metro系统设置等。按照文章里面的修复方法，关键的三个命令是：</p>
<ul>
<li>取得损坏系统文件的管理权：<code>takeown /f Path_And_File_Name</code></li>
<li>授予管理员对已损坏系统文件的完全访问权限：<code>icacls Path_And_File_Name /GRANT ADMINISTRATORS:F</code></li>
<li>将损坏的系统文件替换为已知完好的文件副本：<code>Copy Source_File Destination</code></li>
</ul>
<p>远程控制之后终于修复了，在此记录一下。</p>

	 
	     <p style="margin:20px 0; color:#9f9f9f; font-size:12px;">
<span>Posted by <a style="color:#9f9f9f;" href="http://weibo.com/newdings/"><strong>@cmm要给力</strong></a> - 1月 20 2014</span><br />
<span style="line-height:13px;">如需转载，请注明： 本文来自 <a style="color:#9f9f9f;" href="http://blog.edi-c.com"><strong>@chaoming.edc blog</strong></a></span>
</p>
       	 
      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  
<article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
  <header>
      
      
  
    <h1 class="title"><a href="/post/flexbox-layout.html">Flexbox 布局简述</a></h1>
  

      <time datetime="2013-08-29T08:10:00.000Z"><a href="/post/flexbox-layout.html">8月 29 2013</a></time>
      
  </header>
    <div class="entry">
      
        <h1 id="Flexbox_布局简述">Flexbox 布局简述</h1>
<p>Flexbox 布局将有下面一系列的属性设置：</p>
<ul>
<li>flex-basis</li>
<li>flex-grow</li>
<li>flex-shrink</li>
<li>flex</li>
<li>align-items</li>
<li>align-self</li>
<li>align-content</li>
<li>order</li>
<li>justify-content</li>
<li>flex-wrap</li>
</ul>
<h2 id="flex\flex-grow\flex-shrink\flex-basis">flex\flex-grow\flex-shrink\flex-basis</h2>
<p><code>flex</code> 属性是 <code>flex-grow</code>\<code>flex-shrink</code>\<code>flex-basis</code> 的速写。下面先讲述一下这一系列的属性。</p>
<h3 id="flex-basis">flex-basis</h3>
<blockquote>
<p>作用：设置弹性项目的初始宽度。<br>初始值：auto<br>可接受的值：非负数，单位可以为CSS提供的长度单位</p>
</blockquote>
<p>效果图如下：</p>
<p><a href="http://d.pr/i/mluE" target="_blank"><img src="http://d.pr/i/mluE.png" alt="flex-basis"></a></p>
<h3 id="flex-grow">flex-grow</h3>
<blockquote>
<p>作用：设置弹性项目宽度比例系数。<em>flex grow</em>设置后将根据外容器剩余宽度和弹性项目的数量来分配对应弹性项目的宽度。<br>初始值：0<br>可接受的值：非负数</p>
</blockquote>
<p>效果图如下：</p>
<p><a href="http://d.pr/i/8Uie" target="_blank"><img src="http://d.pr/i/8Uie.png" alt="flex-grow"></a></p>
<p>外层 flex 容器宽度为 600px，<code>.dodgerBlue</code>的系数设置为2，<code>.limeGreen</code>的系数设置为1。则布局后<code>.dodgerBlue</code>的宽度为200px，<code>.limeGreen</code>宽度为100px。弹性项目按比例均分外层容器的宽度。</p>
<p>值得一提的是，如果弹性项目设置有宽度或者<code>flex-basis</code>，布局时顺序将变化为：先按项目本身设定的宽度或 flex-basis 进行布局，再在剩余空间中根据 flex-grow 系数进行剩余空间分配（在元素内包含文字时弹性项目的大小也会发生变化，具体分配规则暂时还不清楚）。效果图如下（<code>.dodgerBlue</code>的初始宽度为200px，<code>.limeGreen</code>没有设置初始宽度）：</p>
<p><a href="http://d.pr/i/iaDC" target="_blank"><img src="http://d.pr/i/iaDC.png" alt="flex-grow-and-flex-basis"></a></p>
<h3 id="flex-shrink">flex-shrink</h3>
<blockquote>
<p>作用：设置弹性项目压缩比例系数。<em>flex shrink</em>设置后将根据外容器本身宽度和弹性项目的数量来分配对应弹性项目的宽度。<br>初始值：0<br>可接受的值：非负数</p>
</blockquote>
<p>与 <code>flex-grow</code> 相反，<code>flex-shrink</code>在基于弹性项目本身的宽度上再对其宽度按系数进行压缩，具体分配规则暂时确定是：在 <code>flex-basis</code> 存在的情况下，按照 <code>flex-shrink</code> 的值确定弹性项目的分配比例，如外层容器为100px，<code>.dodgerBlue</code> 宽度为100%、压缩系数为3，<code>limeGreen</code> 宽度也为100%、压缩系数为1。此时按照压缩系数对弹性项目的宽度进行重新分配，则 <code>.dodgerBlue</code> 需要压缩100px/4*3=75px，最终宽度为25px。</p>
<p>需要注意的是，在 IE10 下，弹性项目的表现与 <code>flex-shrink:0</code> 效果相同，即 <code>flex-shrink:0</code> 时项目本身不进行宽度压缩。</p>
<p>示例代码：</p>
<pre><code><span class="class">.dodgerBlue</span><span class="rules">{
    <span class="rule"><span class="attribute">background</span>:<span class="value"> dodgerBlue</span></span>;
    <span class="rule"><span class="attribute">flex-basis</span>:<span class="value"><span class="number">100</span>%</span></span>;
    <span class="rule"><span class="attribute">flex-shrink</span>:<span class="value"><span class="number">3</span></span></span>;
<span class="rule">}</span></span>

<span class="class">.limeGreen</span><span class="rules">{
    <span class="rule"><span class="attribute">background</span>:<span class="value"> limeGreen</span></span>;
    <span class="rule"><span class="attribute">flex-basis</span>:<span class="value"><span class="number">100</span>%</span></span>;
<span class="rule">}</span></span>
</code></pre><p>效果图如下：</p>
<p><a href="http://d.pr/i/pjvM" target="_blank"><img src="http://d.pr/i/pjvM.png" alt="flex-shrink"></a></p>
<p>需要注意的是，<code>flex-shrink</code> 只在弹性项目充满外层容器后才会生效，而 <code>flex-grow</code> 则在外层容器空间尚未完全分配时起效。</p>
<h3 id="flex">flex</h3>
<p>此属性是上述三个属性的速写属性，可授受的值为：</p>
<pre><code>flex: <span class="constant">none</span> |[&lt;<span class="string">'flex-grow'</span>&gt; &lt;<span class="string">'flex-shrink'</span>&gt;?||&lt;<span class="string">'flex-basis'</span>&gt;]
</code></pre><h2 id="order">order</h2>
<blockquote>
<p>作用：设置弹性项目在弹性容器中的显示顺序，一般来说弹性项目的显示顺序与源代码中的元素声明顺序相同，除非特别声明 <code>order</code> 属性。<br>初始值：0<br>可接受的值：整数</p>
</blockquote>
<p><strong>注意</strong>：在<code>order</code>相同的情况下，顺序将以元素声明顺序确定。</p>
<p>示例代码：</p>
<pre><code><span class="id">#flex</span><span class="rules">{
    <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">300</span>px</span></span>;
    <span class="rule"><span class="attribute">height</span>:<span class="value"> <span class="number">200</span>px</span></span>;
    <span class="rule"><span class="attribute">overflow</span>:<span class="value"> hidden</span></span>;
    <span class="rule"><span class="attribute">display</span>:<span class="value"> flex</span></span>;
<span class="rule">}</span></span>

<span class="class">.dodgerBlue</span><span class="rules">{
    <span class="rule"><span class="attribute">background</span>:<span class="value"> dodgerBlue</span></span>;
    <span class="rule"><span class="attribute">flex-basis</span>:<span class="value"><span class="number">100</span>%</span></span>;
    <span class="rule"><span class="attribute">order</span>:<span class="value"><span class="number">2</span></span></span>;
<span class="rule">}</span></span>

<span class="class">.limeGreen</span><span class="rules">{
    <span class="rule"><span class="attribute">background</span>:<span class="value"> limeGreen</span></span>;
    <span class="rule"><span class="attribute">flex-basis</span>:<span class="value"><span class="number">100</span>%</span></span>;
    <span class="rule"><span class="attribute">order</span>:<span class="value"><span class="number">0</span></span></span>;
<span class="rule">}</span></span>

<span class="class">.yellowGreen</span><span class="rules">{
    <span class="rule"><span class="attribute">background</span>:<span class="value"> yellowGreen</span></span>;
    <span class="rule"><span class="attribute">flex-basis</span>:<span class="value"><span class="number">100</span>%</span></span>;
    <span class="rule"><span class="attribute">order</span>:<span class="value"><span class="number">1</span></span></span>;
<span class="rule">}</span></span>
</code></pre><p>效果图：</p>
<p><a href="http://d.pr/i/n8LP" target="_blank"><img src="http://d.pr/i/n8LP.png" alt="flex-order"></a></p>
<h2 id="flex-direction">flex-direction</h2>
<blockquote>
<p>作用：设置弹性项目的显示方向<br>初始值：row<br>可接受的值：row | row-reverse | column | column-reverse</p>
</blockquote>
<p>属性比较容易理解，不截图了。</p>
<h2 id="flex-wrap">flex-wrap</h2>
<blockquote>
<p>作用：设置弹性项目在分配空间时横向空间到分配完后是否进行换行分配，此时纵向空间将结合弹性项目本身的高度和弹性盒本身的高度来确定。<br>初始值：nowrap<br>可接受的值：nowrap | wrap | wrap-reverse</p>
</blockquote>
<p>属性比较容易理解，不截图了。</p>
<h2 id="flex-flow">flex-flow</h2>
<p>即 <code>flex-direction</code> 和 <code>flex-wrap</code>　的速写属性，可授受的值为：</p>
<pre><code>flex-<span class="keyword">flow</span>: &lt;<span class="string">'flex-direction'</span>&gt; &lt;<span class="string">'flex-wrap'</span>&gt;
</code></pre><h2 id="align-items/align-self/align-content/justify-content">align-items/align-self/align-content/justify-content</h2>
<h3 id="align-items">align-items</h3>
<blockquote>
<p>作用：对弹性盒设置弹性项目的对齐方式<br>初始值：stretch<br>可接受的值：flex-start | flex-end | center | stretch | baseline</p>
</blockquote>
<h3 id="align-self">align-self</h3>
<blockquote>
<p>作用：对弹性项目本身设置其对齐方式<br>初始值：auto<br>可接受的值：auto | flex-start | flex-end | center | baseline | stretch</p>
</blockquote>
<p><code>auto</code>：如果弹性项目的父元素是一个弹性容器，<code>align-self</code>与弹性容器的<code>align-items</code>属性的值一致。否则其值为<strong>stretch</strong>。</p>
<h3 id="align-content">align-content</h3>
<blockquote>
<p>作用：让弹性项目之间的行间距按照设置的值进行分布，分布方向与 <code>flex-direction</code> 中设置的方向相同<br>初始值：stretch<br>可接受的值：flex-start | flex-end | center | space-between | space-around | stretch</p>
</blockquote>
<p>两个特别的值说明：</p>
<ul>
<li>space-between：弹性项目在 <code>flex-direction</code> 设置的方向上进行两端对齐</li>
<li>space-around：弹性项目在行间距中间的位置进行对齐</li>
</ul>
<p>效果图：</p>
<p><a href="http://d.pr/i/X3il" target="_blank"><img src="http://d.pr/i/X3il.png" alt="align-content"></a></p>
<h3 id="justify-content">justify-content</h3>
<blockquote>
<p>作用：设置弹性项目在主分布轴上的对齐方式（与文字对齐方式类似）<br>初始值：flex-start<br>可接受的值：flex-start | flex-end | center | space-between | space-around</p>
</blockquote>
<p>直接看图比较好理解：</p>
<p><a href="http://d.pr/i/yXgF" target="_blank"><img src="http://d.pr/i/yXgF.png" alt="justify-content"></a></p>

	 
	     <p style="margin:20px 0; color:#9f9f9f; font-size:12px;">
<span>Posted by <a style="color:#9f9f9f;" href="http://weibo.com/newdings/"><strong>@cmm要给力</strong></a> - 8月 29 2013</span><br />
<span style="line-height:13px;">如需转载，请注明： 本文来自 <a style="color:#9f9f9f;" href="http://blog.edi-c.com"><strong>@chaoming.edc blog</strong></a></span>
</p>
       	 
      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>





<nav id="pagination">
  
  
    <a href="/page/2/" class="alignright next">下一页</a>
  
</nav></div>
    </div>
    <div class="tabbar" onload="divideTabBar()">
	
      <div class="tabbaritem"><a class="next" href="/">Home</a></div>
    
      <div class="tabbaritem"><a class="next" href="/archives/">Archives</a></div>
    
      <div class="tabbaritem"><a class="next" href="/about/">About</a></div>
    
      <div class="tabbaritem"><a class="next" href="/atom.xml">Subscribe</a></div>
    
</div>


  </div>

  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>
</body>
</html>